{"componentChunkName":"component---src-templates-blog-post-js","path":"/Etc/analysis-channel.io/","result":{"data":{"site":{"siteMetadata":{"author":"JaeSeoKim","comment":{"utterances":"JaeSeoKim/jaeseokim.github.io"},"sponsor":{"buyMeACoffeeId":"jaeseokim"}}},"markdownRemark":{"excerpt":"🤓 intro 최근 FrontEnd 공부를 하면서 channel.io, crisp 와 같은 플러그인 서비스는 특정 사이트, 서비스 위에 추가 되어서 동작을 하게 되는데 이때 어떤 형태로 구현이 되어서 작동이 되었는지 궁금증과 호기심이 발생 하여서 분석을 해보았습니다. 🔬 개발자 도구를 통해 확인 해보기! 일단 기본적으로 이런 형태의 서비스는 iframe …","html":"<div align=\"center\">\n  <br>\n  <img src=\"https://channel.io/images2/common/ch-logo-ko.png\" alt=\"channel.io\">\n</div>\n<h2 id=\"-intro\" style=\"position:relative;\"><a href=\"#-intro\" aria-label=\" intro permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤓 intro</h2>\n<p>최근 FrontEnd 공부를 하면서 <code>channel.io</code>, <code>crisp</code> 와 같은 플러그인 서비스는 <strong>특정 사이트, 서비스 위에</strong> 추가 되어서 동작을 하게 되는데 이때 어떤 형태로 구현이 되어서 작동이 되었는지 궁금증과 호기심이 발생 하여서 분석을 해보았습니다.</p>\n<h2 id=\"-개발자-도구를-통해-확인-해보기\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC%EB%A5%BC-%ED%86%B5%ED%95%B4-%ED%99%95%EC%9D%B8-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\" 개발자 도구를 통해 확인 해보기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔬 개발자 도구를 통해 확인 해보기!</h2>\n<p>일단 기본적으로 이런 형태의 서비스는 <code>iframe</code> 를 통해 구현이 되어 있는 것으로 알고 있는데 해당 부분이 맞는지 직접 개발자 도구를 이용해서 확인을 해봅니다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1012px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC4UlEQVQoz2WQ20+SYRjA+QtKL1oeEE351GmcJuIRIcNay82pqM2lU1RCRdK1tdmWXXah5vlDEZTD1k25PAJylIM6RL0oQ01QPKCcPLThTTf1fkCt1bvfnj3vs/f37H0e1JrZLxv8sWl1mczW9Q2b33/u8/n/B6n7w7nXC9Jzj8eLsm0EZuCf9p2L9c0tm81xdfX98vIKnD8xBKiHuAher6+vA4EAismsLC+vqGc1cbnPudx2dhOXzUZo475obGzhcHggb21tZ7GesdmtLBanobG5srKmpKSitLQKFRkZc/NGFB5Hyc6mp6YSsSl3CaSsxKRUPD4jJRVHJGVisWk4HBmC8MnJBAKBkk9lEEnZUdF3IiKiUfHxKYD0dBIGAzXUs626Vc2CYW52Sb5gUipMatXKzCe9Xmc26HUbViu3hXf7FjoZSsegEzFxEAqNxqLREJ7wGIdjPnn6clGxJZZZBoTyXv5M/9hs3+h0DzwNi+eE76elH+Scji4ytbjgYQWFXoJJSAvJ2EzKfQqZXlzN654/eTvl6J390jPz+d38V1jtAAwv2oeUCHztEax1iYxnY0uuHEZZWC6gMTIzKHVtr2GVr3tqf1C+2ze3PaT4Nq47FAQZ1yOMag4G5faRRfu4/pj2qCosU6lFJHxGLbdLaHIPK/dg9QFf7YTV+yMqx4gSvHbAKke4C4hap8jgymOUI3JMTFJOzr3crLx63huRyTOk2AOv+eqDMe3hXzjD6JBcCOSioByLTsJCuNgYTFldh8xyCdqLDCeTptMJo+sfQF0QlEWm07Ach8bS0goLE6g1tZ3StQuBZl8YlKUrHsmKR7bqBUiW3QCx+UxodAmNJ2KzOzf07bg4KIdMJ0LE6qbOCbO7+6MFjA0WBmbma5DPC/RHkmUP4oN26n2J/liy6st/UPF7YbQiMplS3fxKajkX6pHZBhZ2+ue3B+S7IILlTxqckuUzyapXrNwT6w6DMvMXuQXcP3d8ypoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"개발자 도구를 이용한 iframe 확인\" title=\"개발자 도구를 이용한 iframe 확인\" src=\"/static/d7f3778fa3f1139e1fa520342bd1a523/ad997/image-20210926223008734.png\" srcset=\"/static/d7f3778fa3f1139e1fa520342bd1a523/5a46d/image-20210926223008734.png 300w,\n/static/d7f3778fa3f1139e1fa520342bd1a523/0a47e/image-20210926223008734.png 600w,\n/static/d7f3778fa3f1139e1fa520342bd1a523/ad997/image-20210926223008734.png 1012w\" sizes=\"(max-width: 1012px) 100vw, 1012px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>Chrome 개발자 도구를 켜서 직접 해당 element 를 확인을 해보니 위와 같이 iframe 으로 구성 되어 있는 것을 알 수 있습니다.</p>\n<p>일단 <code>iframe</code> 를 통해 다른 서비스 내부에서 동작을 한다는 것은 알았지만 이제 어떤 형태로 사이트 내부에서 상호 작용하면서 통신을 하는 거지에 대한 의문을 가질수 있게 되는데 이때 <code>channel.io</code> 의 적용 script를 분석해보면서 의문점을 해결 해보겠습니다.</p>\n<h2 id=\"🧐-channel-plugin-scripts-분석-하기\" style=\"position:relative;\"><a href=\"#%F0%9F%A7%90-channel-plugin-scripts-%EB%B6%84%EC%84%9D-%ED%95%98%EA%B8%B0\" aria-label=\"🧐 channel plugin scripts 분석 하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧐 Channel Plugin Scripts 분석 하기!</h2>\n<p>일단 <code>channel.io</code> 의 개발자 가이드 문서로 가서 Installation 페이지에서 안내하는 스크립트를 분석 합니다!</p>\n<blockquote>\n<p><a href=\"https://developers.channel.io/docs/web-installation#single-page-application\">[docs] web-installation#single-page-application</a></p>\n</blockquote>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// ChannelService.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ChannelService</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5 mtki\">// 해당 Class 생성자 호출시 `loadScript` 함수를 호출 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">constructor</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk3\">loadScript</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">loadScript</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">w</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">window</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// 이미 window 전역 객체에 `ChannelIO` 가 존재 하는 지를 체크 하여 중복으로 Load 되는 것을 방지 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">w</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIO</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">console</span><span class=\"mtk1\">.</span><span class=\"mtk4\">error</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">console</span><span class=\"mtk1\">.</span><span class=\"mtk4\">log</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {})(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk6\">&quot;ChannelIO script included twice.&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// ch 객체를 만들고 내부의 c함수를 전달 받은 `arguments` 를 전달 하여 실행 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ch</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">ch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">c</span><span class=\"mtk1\">(</span><span class=\"mtk11\">arguments</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// ch 객체 내부에 q array를 만들어 줍니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">ch</span><span class=\"mtk1\">.</span><span class=\"mtk4\">q</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// 전달 받은 args를 q에 저장합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">ch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">c</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">args</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">ch</span><span class=\"mtk1\">.</span><span class=\"mtk11\">q</span><span class=\"mtk1\">.</span><span class=\"mtk3\">push</span><span class=\"mtk1\">(</span><span class=\"mtk4\">args</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// window.ChannelIO 를 ch로 설정 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">w</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIO</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">ch</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// boot script 를 정의 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">l</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// 만약 channelIo가 초기화 되었다면 아무 작업을 하지 않도록 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">w</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIOInitialized</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// 초기화 작업 완료 flag를 세워줍니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">w</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIOInitialized</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// script element를 생성합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">s</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;script&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// javascript 구문으로 해석 될 수 있도록 정의 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">s</span><span class=\"mtk1\">.</span><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;text/javascript&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// 비동기 방식으로 불러올 수 있도록 설정합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">s</span><span class=\"mtk1\">.</span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// channel.io가 핵심적으로 동작하게될 bunddle된 script src를 지정합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">s</span><span class=\"mtk1\">.</span><span class=\"mtk4\">src</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;https://cdn.channel.io/plugin/ch-plugin-web.js&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// UTF-8로 핵석 될 수 있도록 알려줍니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">s</span><span class=\"mtk1\">.</span><span class=\"mtk4\">charset</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;UTF-8&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// document 내부에 있는 첫번째 script element를 가져 옵니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">x</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getElementsByTagName</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;script&quot;</span><span class=\"mtk1\">)[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// 위에서 정의한 channel.io 스크립트 태그를 x 이전에 삽입 되도록 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">x</span><span class=\"mtk1\">.</span><span class=\"mtk11\">parentNode</span><span class=\"mtk1\">.</span><span class=\"mtk3\">insertBefore</span><span class=\"mtk1\">(</span><span class=\"mtk4\">s</span><span class=\"mtk1\">, </span><span class=\"mtk4\">x</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// Document의 상태가 complete 또는, 로드가 되어 있다면 l를 호출 한다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk4\">readyState</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;complete&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">l</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    } </span><span class=\"mtk9\">else</span><span class=\"mtk1\"> </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk4\">attachEvent</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">attachEvent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;onload&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">l</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    } </span><span class=\"mtk9\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;DOMContentLoaded&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">l</span><span class=\"mtk1\">, </span><span class=\"mtk7\">false</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;load&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">l</span><span class=\"mtk1\">, </span><span class=\"mtk7\">false</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5 mtki\">// ChannelIO의 boot 작업을 인자로 넘어온 settings 오브젝트를 통해 실행한다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">boot</span><span class=\"mtk1\">(</span><span class=\"mtk4 mtki\">settings</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">ChannelIO</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;boot&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">settings</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5 mtki\">// ChannelIO 종료</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">ChannelIO</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;shutdown&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">export</span><span class=\"mtk1\"> </span><span class=\"mtk9\">default</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ChannelService</span><span class=\"mtk1\">()</span></span></span></code></pre>\n<p>해당 스크립트를 살펴 보면 <strong>CDN</strong> 에서 <strong>script</strong> 를 불러와 실행 할 수 있도록 하는 것을 볼 수 있습니다.</p>\n<p>이제 <code>ChannelService</code> 를 사용하기 위해서는 아래와 같이 <strong>pluginKey</strong> 와 옵션을 함께 전달하여 <code>channel.io</code> 를 실행 할 수 있는 것을 볼 수 있습니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Boot Channel as an anonymous user</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">ChannelService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">boot</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">pluginKey</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;YOUR_PLUGIN_KEY&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk5 mtki\">//please fill with your plugin key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Boot Channel as a registered user</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">ChannelService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">boot</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">pluginKey</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;YOUR_PLUGIN_KEY&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk5 mtki\">//please fill with your plugin key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">profile</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">name</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;YOUR_USER_NAME&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk5 mtki\">//fill with user name</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">mobileNumber</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;YOUR_USER_MOBILE_NUMBER&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk5 mtki\">//fill with user phone number</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">CUSTOM_VALUE_1</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;VALUE_1&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk5 mtki\">//any other custom meta data</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">CUSTOM_VALUE_2</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;VALUE_2&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Shutdown Channel</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">ChannelService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">()</span></span></span></code></pre>\n<p>이제 한번 <strong>CDN</strong> 에서 불러온 <strong>script</strong> 를 분석 해봅니다!</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// https://cdn.channel.io/plugin/ch-plugin-web.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">!</span><span class=\"mtk1\">(</span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// 지원 하는 브라우저와 버전에 속해 있는지 검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ((</span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">navigator</span><span class=\"mtk1\">.</span><span class=\"mtk4\">userAgent</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">!</span><span class=\"mtk4\">/(Opera</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">.</span><span class=\"mtk7\">+</span><span class=\"mtk4\">Opera Mobi.</span><span class=\"mtk7\">+</span><span class=\"mtk4\">Version</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">((10</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">1</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">5</span><span class=\"mtk1\">|</span><span class=\"mtk4\">12</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">(0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">1)))</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Opera</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">((10</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">1</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">5</span><span class=\"mtk1\">|</span><span class=\"mtk4\">12</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">(0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">1)).</span><span class=\"mtk7\">+</span><span class=\"mtk4\">Opera Mobi)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Opera Mobi.</span><span class=\"mtk7\">+</span><span class=\"mtk4\">Opera(?:</span><span class=\"mtk8\">\\/</span><span class=\"mtk1\">|</span><span class=\"mtk4\">\\s</span><span class=\"mtk7\">+</span><span class=\"mtk4\">)((10</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">1</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">5</span><span class=\"mtk1\">|</span><span class=\"mtk4\">12</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">(0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">1)))</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(SamsungBrowser</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">((4</span><span class=\"mtk1\">|</span><span class=\"mtk4\">5)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">5</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">4))</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(IEMobile</span><span class=\"mtk7\">[ /]</span><span class=\"mtk4\">(10</span><span class=\"mtk1\">|</span><span class=\"mtk4\">11)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Android Eclair)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Android Froyo)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Android Gingerbread)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Android Honeycomb)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(PlayBook.</span><span class=\"mtk7\">+</span><span class=\"mtk4\">RIM Tablet OS (7</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">10</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">\\d</span><span class=\"mtk7\">+</span><span class=\"mtk4\">)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">((Black</span><span class=\"mtk7\">[bB]</span><span class=\"mtk4\">erry</span><span class=\"mtk1\">|</span><span class=\"mtk4\">BB10).</span><span class=\"mtk7\">+</span><span class=\"mtk4\">Version</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">(7</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0</span><span class=\"mtk1\">|</span><span class=\"mtk4\">10</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">\\d</span><span class=\"mtk7\">+</span><span class=\"mtk4\">)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Trident</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">6</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Trident</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">5</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(Trident</span><span class=\"mtk8\">\\/</span><span class=\"mtk4\">4</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0)</span><span class=\"mtk1\">|</span><span class=\"mtk4\">((</span><span class=\"mtk7\">[MS]?</span><span class=\"mtk4\">IE) (5</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">5</span><span class=\"mtk1\">|</span><span class=\"mtk4\">(</span><span class=\"mtk7\">[6-9]</span><span class=\"mtk1\">|</span><span class=\"mtk4\">10)</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">0))/</span><span class=\"mtk1\">.</span><span class=\"mtk3\">test</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ) </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// cookie를 가지고 사용 할 수 있는지에 대해서 테스트</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">navigator</span><span class=\"mtk1\">.</span><span class=\"mtk4\">cookieEnabled</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk8\">!</span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk4\">documentMode</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ((</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk4\">cookie</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;ch-session-test=1&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cookie</span><span class=\"mtk1\">.</span><span class=\"mtk3\">split</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;ch-session-test=&quot;</span><span class=\"mtk1\">).</span><span class=\"mtk4\">length</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&gt;=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">2</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          ((</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk4\">cookie</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;ch-session-test=; Max-Age=0&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk7\">1</span><span class=\"mtk1\">))))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// ch-plugin Element가 없다면 해당 Element 만들어서 body에 삽입</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;ch-plugin&quot;</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;div&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ;(</span><span class=\"mtk11\">i</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;ch-plugin&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">body</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">i</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// ch-plugin Element에 렌더링에 필요한 필수 Element와 Iframe 객체 삽입</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;ch-plugin&quot;</span><span class=\"mtk1\">).</span><span class=\"mtk4\">innerHTML</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">&#39;&lt;div id=&quot;ch-plugin-core&quot;&gt;&lt;/div&gt;&lt;div id=&quot;ch-plugin-script&quot; style=&quot;display:none&quot;&gt;&lt;iframe id=&quot;ch-plugin-script-iframe&quot; style=&quot;position:relative!important;height:100%;width:100%!important;border:none!important;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// 위에서 생성한 ch-plugin-script-iframe Element를 n에 저장</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;ch-plugin-script-iframe&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// flag 용 t false로 초기화</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">t</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">1</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5 mtki\">// iframe 초기화 작업을 하는 함수 o 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">o</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// ch-plugin-script-iframe의 내부의 document 객체를 e에 저장</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">contentDocument</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk11\">contentWindow</span><span class=\"mtk1\">.</span><span class=\"mtk4\">document</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// iframe 내부를 writing 모드로 오픈</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">open</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk5 mtki\">// 핵심 기능인 `https://cdn.channel.io/plugin/ch-plugin-core-20210923190001.js` script 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">write</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk6\">&#39;&lt;script async type=&quot;text/javascript&quot; src=&quot;https://cdn.channel.io/plugin/ch-plugin-core-20210923190001.js&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          ),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk5 mtki\">// React Rendering를 위한 필수 HTML 삽입</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">write</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk6\">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          ),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk5 mtki\">// iframe 내부 writing 작성 완료</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">close</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk5 mtki\">// flag ture로 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (</span><span class=\"mtk4\">t</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// Document가 onload시 iframe 초기화 작업 실행.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onload</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk3\">o</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk3\">onload</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">t</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk3\">o</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})()</span></span></span></code></pre>\n<p>이제 여기서 <code>iframe</code> 를 초기화 하는 작업을 진행 하게 되는데 여기서 주요하게 봐야 하는 부분은 <code>CORS</code> 와 <code>browser 호환성</code> 을 고려하여 <strong>iframe</strong>의 <strong>src</strong> 를 통해 미리 만들어진 사이트를 가져오는 것이 아닌 번들링된 script를 이용하여 직접 SPA를 렌더링 하는 것을 볼 수 있습니다!</p>\n<p>위와 같은 방법으로 iframe를 관리하게 되면 CORS의 정책에 따른 <code>script api access</code> 제한이 없어지며 또한 CORS에 따른 <code>X-Frame-Options</code> header를 서버 단에 설정하는 것에 대한 소모를 줄 일 수 있습니다!</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#cross-origin_script_api_access\">https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#cross-origin_script_api_access</a></p>\n<p>이제 한번 번들링된 script를 간단하게 살펴 봅니다!</p>\n<p>일단 <code>https://cdn.channel.io/plugin/ch-plugin-core-20210923190001.js</code> 파일을 다운 후 minify와 난독화가 일부분 적용이 된 상태이므로 formatter와 특정 object의 key를 검색하는 형태로 분석을 해봅니다!</p>\n<p>일단 가장 먼저 보이게 되는 부분은 아래와 같이 주석을 볼 수 있는데 라이선스에 대한 정보를 담고 있는 것을 볼 수 있는데 해당 파일을 확인 하면 내부에는 <code>react</code> 와 함께 여러가지의 부가적인 라이브러리로 구성되어 있는 것을 볼 수 있습니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">/*! For license information please see ch-plugin-core-20210923190001.js.LICENSE.txt */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// ch-plugin-core-20210923190001.js.LICENSE.txt</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">/** @license React v16.13.0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * react.production.min.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * Copyright (c) Facebook, Inc. and its affiliates.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * This source code is licensed under the MIT license found in the</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * LICENSE file in the root directory of this source tree.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>일단 해당 기술 스택은 <code>react</code> 라는 것을 알게 되었으니 <code>window.ChannelIO</code> 객체에 대한 정의 하는 부분을 살펴 봅니다!</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// ch-plugin-core-20210923190001.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">yl</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">(</span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIO</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ChannelIO</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> {}),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">commandQueue</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">n</span><span class=\"mtk1\">.</span><span class=\"mtk11\">ChannelIO</span><span class=\"mtk1\">.</span><span class=\"mtk4\">q</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> []),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">pendingQueue</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">callbacks</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {}),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">methods</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">Ch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">show</span><span class=\"mtk1\">: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">pushQueue</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">apiName</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;show&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">apiArray</span><span class=\"mtk1\">: [</span><span class=\"mtk6\">&quot;show&quot;</span><span class=\"mtk1\">] }))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> ((</span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk3\">nl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;show&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;showMessenger&quot;</span><span class=\"mtk1\">)), </span><span class=\"mtk4\">Ip</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Af</span><span class=\"mtk1\">.</span><span class=\"mtk11\">channelSelectors</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getChannel</span><span class=\"mtk1\">(</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getState</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">wp</span><span class=\"mtk1\">.</span><span class=\"mtk3\">redirectToEdgeBrowser</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          } </span><span class=\"mtk9\">else</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">uiActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setShowMessenger</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">showMessenger</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">hide</span><span class=\"mtk1\">: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">pushQueue</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">apiName</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;hide&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">apiArray</span><span class=\"mtk1\">: [</span><span class=\"mtk6\">&quot;hide&quot;</span><span class=\"mtk1\">] }) </span><span class=\"mtk8\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (</span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk3\">nl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;hide&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;hideMessenger&quot;</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">uiActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setShowMessenger</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">showMessenger</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">1</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          ));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">lounge</span><span class=\"mtk1\">: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk8\">!</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">pushQueue</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">apiName</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;lounge&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">apiArray</span><span class=\"mtk1\">: [</span><span class=\"mtk6\">&quot;lounge&quot;</span><span class=\"mtk1\">] })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk3\">nl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;lounge&quot;</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Xf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getHistory</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk6\">&quot;/lounge&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">location</span><span class=\"mtk1\">.</span><span class=\"mtk4\">pathname</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">Af</span><span class=\"mtk1\">.</span><span class=\"mtk11\">uiSelectors</span><span class=\"mtk1\">.</span><span class=\"mtk3\">showMessenger</span><span class=\"mtk1\">(</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getState</span><span class=\"mtk1\">()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">push</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;/lounge&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">else</span><span class=\"mtk1\"> </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">Ip</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Af</span><span class=\"mtk1\">.</span><span class=\"mtk11\">channelSelectors</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getChannel</span><span class=\"mtk1\">(</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getState</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk11\">wp</span><span class=\"mtk1\">.</span><span class=\"mtk3\">redirectToEdgeBrowser</span><span class=\"mtk1\">(</span><span class=\"mtk4\">n</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            } </span><span class=\"mtk9\">else</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">uiActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setShowMessenger</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">showMessenger</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">disableRedirect</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              ),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">push</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;/lounge&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">boot</span><span class=\"mtk1\">: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">arguments</span><span class=\"mtk1\">.</span><span class=\"mtk4\">length</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk9\">void</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk11\">arguments</span><span class=\"mtk1\">[</span><span class=\"mtk7\">1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> </span><span class=\"mtk11\">arguments</span><span class=\"mtk1\">[</span><span class=\"mtk7\">1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Mn</span><span class=\"mtk1\">.</span><span class=\"mtk4\">a</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk3\">Tn</span><span class=\"mtk1\">()(</span><span class=\"mtk4\">n</span><span class=\"mtk1\">) </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk3\">Sn</span><span class=\"mtk1\">()(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;boot failed: Invalid arguments.&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk11\">On</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">.</span><span class=\"mtk3\">resolve</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk11\">methods</span><span class=\"mtk1\">.</span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setSettings</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">r</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getPluginKey</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk4\">r</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;boot failed: pluginKey not found.&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk11\">On</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">.</span><span class=\"mtk3\">resolve</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">o</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getLanguage</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getLanguageOverrided</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getBootOption</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;YOUR_USER_ID&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">a</span><span class=\"mtk1\">.</span><span class=\"mtk4\">memberId</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> (</span><span class=\"mtk3\">tl</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;boot failed: Invalid memberId&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk11\">On</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">.</span><span class=\"mtk3\">resolve</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">o</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">geoActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setLocale</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">locale</span><span class=\"mtk1\">: </span><span class=\"mtk4\">o</span><span class=\"mtk1\"> })),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              (</span><span class=\"mtk11\">bh</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setLanguage</span><span class=\"mtk1\">(</span><span class=\"mtk4\">i</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">Mp</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk11\">methods</span><span class=\"mtk1\">.</span><span class=\"mtk3\">updateUser</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">language</span><span class=\"mtk1\">: </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> })),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">t</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pluginActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">requestCheckIn</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">pluginKey</span><span class=\"mtk1\">: </span><span class=\"mtk4\">r</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">option</span><span class=\"mtk1\">: </span><span class=\"mtk4\">a</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk11\">promise</span><span class=\"mtk1\">.</span><span class=\"mtk3\">then</span><span class=\"mtk1\">(</span><span class=\"mtk9\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">r</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">wn</span><span class=\"mtk1\">()(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;payload.user&quot;</span><span class=\"mtk1\">, {});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk3\">n</span><span class=\"mtk1\">(</span><span class=\"mtk7\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">r</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk3\">_n</span><span class=\"mtk1\">()(</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">pendingQueue</span><span class=\"mtk1\">) </span><span class=\"mtk8\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">execQueue</span><span class=\"mtk1\">(</span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">pendingQueue</span><span class=\"mtk1\">).</span><span class=\"mtk3\">then</span><span class=\"mtk1\">(</span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                      </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">pendingQueue</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk3\">catch</span><span class=\"mtk1\">(</span><span class=\"mtk9\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">wn</span><span class=\"mtk1\">()(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">e</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk6\">&quot;payload.body&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Error</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;boot failed&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk3\">n</span><span class=\"mtk1\">(</span><span class=\"mtk4\">t</span><span class=\"mtk1\">, </span><span class=\"mtk7\">null</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              }));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dispatch</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Tr</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pluginActions</span><span class=\"mtk1\">.</span><span class=\"mtk3\">checkOut</span><span class=\"mtk1\">({}));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>코드의 양이 방대 함으로 일부분만 확인을 해보니 <code>window.ChannelIO</code> 에 외부에서 <code>channel.io</code> 와 상호 작용이 가능한 함수들을 정의 하는 것을 볼 수 있는데 <code>dispatch</code>, <code>actions</code>, <code>dispatch chaining promise</code> 를 통해 전역으로 상태관리를 위한 <code>redux</code>, <code>redux-saga</code> 와 같은 도구를 사용 하는 것을 볼 수 있습니다.</p>\n<p>이번에는 <code>https://</code> 와 같은 키워드를 이용해서 어디와 통신을 주고 받는지 분석을 해봅니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"js\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * https://api.channel.io에 대한 요청을 실행 하는 함수 정의 부분!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * credentials: &quot;omit&quot; 를 통해 fetch API라는 것을 유추 할 수 있습니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">n</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">he</span><span class=\"mtk1\">()(</span><span class=\"mtk11\">this</span><span class=\"mtk1\">, </span><span class=\"mtk4\">n</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    (</span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">call</span><span class=\"mtk1\">(</span><span class=\"mtk11\">this</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;https://api.channel.io&quot;</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">credentials</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;omit&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">ve</span><span class=\"mtk1\">()(</span><span class=\"mtk3\">bu</span><span class=\"mtk1\">()(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">), </span><span class=\"mtk6\">&quot;language&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Uf</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getLanguageOverrided</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * https://browser.sentry-cdn.com/5.6.2/bundle.min.js 를 통해</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * sentry를 이용하여 프론트 에러 로그를 수집 하는 것을 볼 수 있습니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">key: </span><span class=\"mtk6\">&quot;install&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  value: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;script&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    (</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">onload</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\">, </span><span class=\"mtk4\">t</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">null</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk4\">Sentry</span><span class=\"mtk1\">) </span><span class=\"mtk8\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">void</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">init</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">dsn</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;https://b05367f6be924bb49e15838987b99ce6@sentry.io/306179&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">environment</span><span class=\"mtk1\">: </span><span class=\"mtk3\">In</span><span class=\"mtk1\">()(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          (</span><span class=\"mtk4\">t</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;&quot;</span><span class=\"mtk1\">.</span><span class=\"mtk3\">concat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;production&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;|&quot;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ).</span><span class=\"mtk3\">call</span><span class=\"mtk1\">(</span><span class=\"mtk4\">t</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;App&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">release</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;7.0.5&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">whitelistUrls</span><span class=\"mtk1\">: [</span><span class=\"mtk4\">/cdn</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">channel</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">io/</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> /cdn</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">ravenjs</span><span class=\"mtk8\">\\.</span><span class=\"mtk4\">com/</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">normalizeDepth</span><span class=\"mtk1\">: </span><span class=\"mtk7\">5</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">crossOrigin</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">integrity</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">       </span><span class=\"mtk6\">&quot;sha384-H4chu/XQ3ztniOYTpWo+kwec6yx3KQutpNkHiKyeY05XCZwCSap7KSwahg16pzJo&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">src</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">       </span><span class=\"mtk6\">&quot;https://browser.sentry-cdn.com/5.6.2/bundle.min.js&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">head</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> * 또한 msg와 같이 실시간으로 주고 받기 위한 websocket도 설정 하는 것을 볼 수 있습니다!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  key: </span><span class=\"mtk6\">&quot;connect&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  value: </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">this</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk3\">isConnected</span><span class=\"mtk1\">() </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk3\">disconnect</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">forceDisconnect</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\"> }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">Zc</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">connecting</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">forceDisconnect</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">1</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ready</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!</span><span class=\"mtk7\">1</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">readyQueue</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">socket</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk11\">v_</span><span class=\"mtk1\">.</span><span class=\"mtk4\">a</span><span class=\"mtk1\">)(</span><span class=\"mtk6\">&quot;https://ws.channel.io/front-v4&quot;</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">transports</span><span class=\"mtk1\">: [</span><span class=\"mtk6\">&quot;websocket&quot;</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">upgrade</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">reconnectionDelay</span><span class=\"mtk1\">: </span><span class=\"mtk7\">5e3</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">reconnectionDelayMax</span><span class=\"mtk1\">: </span><span class=\"mtk7\">1e4</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;ready&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onReady</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;connect&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onConnect</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;connect_error&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onConnectError</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;connect_timeout&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onConnectTimeout</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;reconnect_error&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onReconnectError</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;reconnect_failed&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onReconnectFailed</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;reconnect_attempt&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onReconnectAttempt</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;reconnect&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onReconnect</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;error&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onError</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk11\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk3\">on</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;disconnect&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">onDisconnect</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;offline&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">Zc</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">isConnected</span><span class=\"mtk1\">() </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        (</span><span class=\"mtk3\">Zc</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">disconnect</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">forceDisconnect</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">1</span><span class=\"mtk1\"> }));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">window</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;beforeunload&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">Zc</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">disconnect</span><span class=\"mtk1\">({ </span><span class=\"mtk4\">forceDisconnect</span><span class=\"mtk1\">: </span><span class=\"mtk8\">!</span><span class=\"mtk7\">0</span><span class=\"mtk1\"> });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>위에 적은 부분 말고도 여러가지 <strong>Error</strong> 에 대한 메시지를 통해 <code>redux</code>, <code>styled-components</code>, <code>core-decorators</code>, <code>date-fns</code> 등 여러가지 라이브러리를 사용한 것을 볼 수 있습니다.</p>\n<p>이제 대략적으로 어떤 형태로 돌아 가는 지에 대해서 확인을 했으니 추가적으로 사용한 기술 스택에 대해서 조사를 해봅니다!</p>\n<h2 id=\"️-기술-스택-조사하기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%83%9D-%EC%A1%B0%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"️ 기술 스택 조사하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚙️ 기술 스택 조사하기!</h2>\n<p>일단 기술 스택에 조사하는 방법은 여러가지가 존재 하는데 가장 일단 해당 기술 블로그나 채용 사이트에 들어가서 기술 스택에 대해서 조사를 해봅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7ElEQVQY042Q227DIBBE/f+/FbWK1PekToyDGrPcbYwSCRIwXdtJW1Wq1KN9AJZhhq2cc1wIzrlCpDJaX73POU8/KKX82q5UAEBI2zSEUlrXh7ZtHHygtvyDCk3cMCg7vhwvr23YHC+bJm7rXiptFrQ23vtxHDGjtb0x9su8wgZ6kpbuT2J3ku9U7Qi87WUHSghxPndYWuu+7xkDXDPGYowPMT4JwGMIZUpr5XSbppxyTindZu5p4f4Ewz7EIQQAsQxrtuo6JoREKww5DAMX0lqLC/R4/gJT2O/YqMSjWS/lOna8jT10y3+wij8BuzWNOM/sOxIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930031153869\"\n        title=\"image-20210930031153869\"\n        src=\"/static/0b7374b4ed223bd7966e645e63b4c373/c1b63/image-20210930031153869.png\"\n        srcset=\"/static/0b7374b4ed223bd7966e645e63b4c373/5a46d/image-20210930031153869.png 300w,\n/static/0b7374b4ed223bd7966e645e63b4c373/0a47e/image-20210930031153869.png 600w,\n/static/0b7374b4ed223bd7966e645e63b4c373/c1b63/image-20210930031153869.png 1200w,\n/static/0b7374b4ed223bd7966e645e63b4c373/0c3d0/image-20210930031153869.png 1414w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1klEQVQY012O20rDQBCG+/6v44VioT5AL4wtgpiiNDHZ4+zaPWV3swcTwUL9+Gduho9/NrXWGCNwDoxSgoevXgBTF2mNckYvW31LrZRYkQDgnKt/bJYJwfeItR05dbQ9k/clHT317O1zPGPJVRA6zCnlnFNKpZQbueT08iG2Dd0+490BPxzE3au9P8pdg56O5LEh+xZPk/Peh5X4rzlyxihGGI2cEk4xB9lTMQqNQAFn8HschgEhZIy5ked5ttYprZ2btLYrIctQhS/SF2OtMfbK8vxV/gG/ORlwcuXpiAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930031553462\"\n        title=\"image-20210930031553462\"\n        src=\"/static/4b434da8670479cb7b2de609bcd98f66/c1b63/image-20210930031553462.png\"\n        srcset=\"/static/4b434da8670479cb7b2de609bcd98f66/5a46d/image-20210930031553462.png 300w,\n/static/4b434da8670479cb7b2de609bcd98f66/0a47e/image-20210930031553462.png 600w,\n/static/4b434da8670479cb7b2de609bcd98f66/c1b63/image-20210930031553462.png 1200w,\n/static/4b434da8670479cb7b2de609bcd98f66/8bb81/image-20210930031553462.png 1602w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><a href=\"https://stackshare.io/channel-io/frontend\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAABYlAAAWJQFJUiTwAAADWElEQVQ4y5VUTYsdRRR9/8N/4jaCuPIHZDYu4mrAbXCXhZFIMggKxkBE0EU2iYFgAkFcmJBgwkAU3nMmbybjm7zv7q6u6uqu76rOqep2eAvHjMWj36WoU/ece8+tgTZGpSWl7L7W2vC25Zzz3g+qqiryglJGCKGU1nWN3fZtCwmAH+Co89Z6gy1cmWXZcrl0cflpIRZEhOB9OhQ/6WtN+kNmYO6Nbn16d7uWQjfN+xe23926oDhdVfrc588++WGIOxWXfDg1lfCtl8K83CUVUbg0gp+OH/34+Ka2xip16cuvL165ZpUouP7szvDe8wkOGaHo4VxVTWhDzeRfz+dkhdhH2rpRErcmTkoIJRofgjGalaRiLMrzjtVcaRV83CeUaKMj7SjOWQixHVhrnPapmlY1RkkXpToQTJqds7blyhmbwNA0223/vBV323Y0Gs1mM1QOLSzXs6aiCMA8n0rJDdrg16zd+TmsKOKBdYHND+nBM3QY4Pl8jmqnTtrFYllSigxCyOWUlEUFSjwn9a9/VMvcomDQ0AgptYNDon6tcQsCWOb4+HixmBtjhBBlSRijqClltBC8KAnUxWrvjQ8e/b5bN2hpaJoG+CTZKWmNtqd5BocjeHvn5jsffLS/t494OBxCc+ehgxfldFxBZght58oOc7Ii+O6Dh1e/+ma9WiLndDoFGPnB8Gh/NZ8QVOvUzJAkhdBaIRWva0iCz2F48K44qxsO2v86G7FVwKDjMrW3I9ZfvBGcCkZtK84xUsgWwTBR+H9T5ZXx3WUOHQ7tWaayK1i4/aQ8v/N326I/rcz3ZDb0YZP4f4H97kv23cMFwNYHXS4UmTl/NnAcAN1YSbvBILTKCfNpEs4Aduio0za9HV21oD30/fF93P+6nX4f1YYfyrJcZzljrE1u2mjYacxDqnaa5xPfdX7oRndzE2fQTilkf+af/QFIjnJx/wg6Mc/+l1f8fvRzMNZKfihqFLI9HI8/fO/c1StfxA7LRl2/rPMszjMAL1b8wauyjd7wTyfVb0fg7401ol4qEbW8nkw+3tq6cf1bxFqL+qfvLSkjGNQlZ4LmNi1GMlqsYXiwyouSMXgbb4zN8hzV6QY+4wJ2jrR90ueTq/oZaDfi/tX2J/pj7Pt3+w3I4wjwsd1N6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930031433849\"\n        title=\"image-20210930031433849\"\n        src=\"/static/cc9d7d42da989e32faf058a690ad968e/2bef9/image-20210930031433849.png\"\n        srcset=\"/static/cc9d7d42da989e32faf058a690ad968e/5a46d/image-20210930031433849.png 300w,\n/static/cc9d7d42da989e32faf058a690ad968e/0a47e/image-20210930031433849.png 600w,\n/static/cc9d7d42da989e32faf058a690ad968e/2bef9/image-20210930031433849.png 1024w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></a></p>\n<p>채용공고를 확인 해 보니 내부에서 사용 하는 기술 스택에 대해서 자세히 설명을 하고 <code>stackshare</code> 를 통해 자세하게 공유 하는 것을 볼 수 있습니다!</p>\n<p>아래의 기술 블로그에서 설명하는 <code>frontend-stack</code> 글을 통해 window와 macos의 native app를 제공하기 위해 <code>electron</code> 를 사용한다는 정보를 추가로 얻을 수 있었습니다!</p>\n<p><a href=\"https://channel.io/ko/blog/frontend-stack\">https://channel.io/ko/blog/frontend-stack</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6ElEQVQY05WPXU/CMBSG+4sM2SYJRiOweMnfBoM3Xmn34ViirOv6AbadW5kbnJRguPXJm7bn9PTNW2SMyfOcEFKWZd/3x/+Auq77diilfq/or4AZ6AzD8Nc5l8geDjtASsYY7JzzqqogBqVUCiE5gwPkglUIQR0wAzGttahpGnijtRKc7/dgIqSU3CFUvatb5gBH8DK1+XForSEOgj9HUZJ+bHCUYBy/veM4TkFZtnlNPl9Sgl0ZOX1ti4LQoihBbWvR6nk98h7923kwDoPx/KLQ86f3s8Xk7skPZpfb0AumZ92MHpbL9QlSPypqQTgC8gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930033226497\"\n        title=\"image-20210930033226497\"\n        src=\"/static/01cce546cfc37f3e25f07a75fab3f75c/c1b63/image-20210930033226497.png\"\n        srcset=\"/static/01cce546cfc37f3e25f07a75fab3f75c/5a46d/image-20210930033226497.png 300w,\n/static/01cce546cfc37f3e25f07a75fab3f75c/0a47e/image-20210930033226497.png 600w,\n/static/01cce546cfc37f3e25f07a75fab3f75c/c1b63/image-20210930033226497.png 1200w,\n/static/01cce546cfc37f3e25f07a75fab3f75c/27f8b/image-20210930033226497.png 1730w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이번에는 더욱더 상세하게 세부 라이브러리를 어떤 것을 사용 하는지에 대해 확인을 하도록 <code>오픈소스 라이선스</code> 사이트에 들어가 확인을 해봅니다.!</p>\n<p><a href=\"https://channel.io/ko/oss\">https://channel.io/ko/oss</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVQoz5WSWY7DIBBEff97RprECwzQQO/T9lyAIH6fXqmqt5TLz/twd1P1L9+GYifgUWce3NiBvZCzrcGDNAFW1CH+D6O4LcId+Z3hAgK2gCuvah8z69HoAk4jvv6S98dsSzDKWefVMHcqqEH28JOLLcWWvYyzIZA1uWNPWY4NpJ9Ke6M8NaFnvLW2OhVL6TjZyG4nqet6YQ3llfoOHPNej/kLGEVLnAdKaGPqKIyXL23rJJ+K52222CnM64X9AWBTxpeiJ5YoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930032327345\"\n        title=\"image-20210930032327345\"\n        src=\"/static/d63481ceb078b037d59f7050ac4e8c9b/c1b63/image-20210930032327345.png\"\n        srcset=\"/static/d63481ceb078b037d59f7050ac4e8c9b/5a46d/image-20210930032327345.png 300w,\n/static/d63481ceb078b037d59f7050ac4e8c9b/0a47e/image-20210930032327345.png 600w,\n/static/d63481ceb078b037d59f7050ac4e8c9b/c1b63/image-20210930032327345.png 1200w,\n/static/d63481ceb078b037d59f7050ac4e8c9b/d61c2/image-20210930032327345.png 1800w,\n/static/d63481ceb078b037d59f7050ac4e8c9b/38116/image-20210930032327345.png 2086w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>해당 라이선스 문서를 통해 세부 적으로 사용한 라이브러리를 확인 할 수 있다는 것을 쉽게 알 수 있습니다!</p>\n<p>마지막으로 <code>wappalyzer</code> 와 같은 분석 도구를 이용해서 분석을 해봅니다.</p>\n<p>일단 iframe 내부는 분석을 제대로 하지 못하기 때문에 <code>channel.io</code> 의 메인 홈페이지를 분석을 해봅니다.!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1018px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAABYlAAAWJQFJUiTwAAADIklEQVQ4y2VU+U8TQRidQi8uW6CUSwQFDIe926UchRYKtRS8EAhRxBCJ4RDBVGi33Z7bdktXUCw3KEEENZpIMJj4gzEx/qB/ld9uCWfyZbKZmTffe2/eLNKmEFiaV5fqwVI9+gwfjGq+WyMgYFQL3IokvK9myVI8o0zGNQK3kuuCeRXfpUh2wgeyltIDhtUBw0oftjBq27ynX9QKCXnyNOzQCIlK5Nh5cRAb/9JZMWcro2tFfo3QjQn9tvw3mDCI1gIHc/Y9WOsop/UXfLo0j4bvaZMu1aSQar5LxsEft8b7tK+MuWFLyYz5IqXiQXOiLp3S8L3I3rU8Yl025kXaS2PWKzHgr+YRRvGsTuCH5qwET3N+xFxEXb8803GVhhEmlVycoa3kEnpRwFIShR2MHp4bRgXXwdAWEDLkfHLr3fjt7RsVs0AbylxIMXawhR7ULw21rPdq4ndkL0GkmpdYYAxjNT/fWvsbmNhvEAewDG8FssuTnMfgXcf2wshWjZi0lcXAbRXrZ6LAXhlyhEf2n3Xt1Iq8plzKIl3GUvysbBbcdincUhCCL1ALu4+QCfA15CBH9ybvvq/P9BtzKJM4fuQFA7aVzfao4oPG1eb8MFym+gQeaFehqc34n6j9mykvZC6grblv69IjSh5+CA6OfZzu32rKCTfmBI/4HBWkorkg3CgJghdwFnA5yQ5N9qwPd64AuElKngdDtV6ierXxbuU8pE3OYepYM5biU/Ldco5TyT2LhKuqQtOr/l/+R18bsgOtRRSEBArinMCjwea1bvVrRbJLx6b6DBgMw+9/gruEYAK4pTByCrxI/6bwHyYpebNyTp/hVZ3uDwqxNE9bcRSWqpFDxnFCbID/Ie155x45vNuQFTJknzVMw76q/vrlIfMG2FafGWjMIQ2SoEFCwluELKJ5z35o/LMhi6wV+c61BdpTC7P/AhPfO8piVjb87aW0rZyuSWeYo6fRn2POg1YJ2V5Og+yTzaFzNcIDDzcmbEsGSYh5qqzb8iQ88QSQuSRqKozohAQcpj6XsErk+hDapobWDFLKyN4l0Dn8VfDd/wEqaDt5t/yUygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20210930032645845\"\n        title=\"image-20210930032645845\"\n        src=\"/static/9b70b5d2778b9af2676db24b7cb6bfe3/3dde1/image-20210930032645845.png\"\n        srcset=\"/static/9b70b5d2778b9af2676db24b7cb6bfe3/5a46d/image-20210930032645845.png 300w,\n/static/9b70b5d2778b9af2676db24b7cb6bfe3/0a47e/image-20210930032645845.png 600w,\n/static/9b70b5d2778b9af2676db24b7cb6bfe3/3dde1/image-20210930032645845.png 1018w\"\n        sizes=\"(max-width: 1018px) 100vw, 1018px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위와 같이 홈페이지의 경우 <code>Next.js</code> 를 이용하여 <code>SSR</code> 를 제공 하는 것을 볼 수 있습니다.</p>\n<h2 id=\"-분석-해보면서-알게된-사실\" style=\"position:relative;\"><a href=\"#-%EB%B6%84%EC%84%9D-%ED%95%B4%EB%B3%B4%EB%A9%B4%EC%84%9C-%EC%95%8C%EA%B2%8C%EB%90%9C-%EC%82%AC%EC%8B%A4\" aria-label=\" 분석 해보면서 알게된 사실 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📖 분석 해보면서 알게된 사실!</h2>\n<p>기존 이런 특정 서비스 위에서 돌아가게 되는 플러그인 서비스는 <code>iframe</code> 위에서 동작을 하게 된다라고 알고 있었는데 왜 그러한 방식을 채택 하는지에 대해서는 자세히 모르는 부분이 있었는데, 이번에 분석을 통한 학습을 하면서 <code>iframe</code> 를 사용하면 <code>namespace</code> , <code>css scope</code> 등이 분리 되기 때문에 채택을 한다는 것과 <code>iframe</code> 의 <code>cors</code> 정책을 해결하기 위해 <code>script</code> 를 직접 <code>iframe</code> 내부에 삽입 하는 방식을 사용하는 것을 알게 되었습니다.</p>\n<p>또한 플러그인의 사용자 경험에 대한 향상을 위해 <code>SPA</code> 형태로 제공을 하는 것을 알게 되었습니다!</p>\n<blockquote>\n<p>결론 : 플러그인 서비스를 개발하기 위해서는 브라우저의 작동방식과 호환성에 대해서 깊게 공부를 해야 하고, 사용자 경험을 위해 <code>SPA</code> 를 제공하는 것이 좋다!</p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/Etc/analysis-channel.io/#-intro\">🤓 intro</a></li>\n<li><a href=\"/Etc/analysis-channel.io/#-%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC%EB%A5%BC-%ED%86%B5%ED%95%B4-%ED%99%95%EC%9D%B8-%ED%95%B4%EB%B3%B4%EA%B8%B0\">🔬 개발자 도구를 통해 확인 해보기!</a></li>\n<li><a href=\"/Etc/analysis-channel.io/#%F0%9F%A7%90-channel-plugin-scripts-%EB%B6%84%EC%84%9D-%ED%95%98%EA%B8%B0\">🧐 Channel Plugin Scripts 분석 하기!</a></li>\n<li><a href=\"/Etc/analysis-channel.io/#%EF%B8%8F-%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%83%9D-%EC%A1%B0%EC%82%AC%ED%95%98%EA%B8%B0\">⚙️ 기술 스택 조사하기!</a></li>\n<li><a href=\"/Etc/analysis-channel.io/#-%EB%B6%84%EC%84%9D-%ED%95%B4%EB%B3%B4%EB%A9%B4%EC%84%9C-%EC%95%8C%EA%B2%8C%EB%90%9C-%EC%82%AC%EC%8B%A4\">📖 분석 해보면서 알게된 사실!</a></li>\n</ul>","frontmatter":{"date":"2021년 09월 30일","title":"channel.io 분석 하기!","tags":["web","javascript","분석"]}}},"pageContext":{"slug":"/Etc/analysis-channel.io/","previous":{"fields":{"slug":"/React/React-Portal_Render의_차이점_활용방안_알아보기/"},"frontmatter":{"title":"[React] Portal, Render의 차이점, 활용방안 알아보기!"}},"next":{"fields":{"slug":"/Javascript/똑똑하게 Typescript 사용하기/"},"frontmatter":{"title":"똑똑하게 Typescript 사용하기!"}}}},"staticQueryHashes":["1081905842","3911196313"]}