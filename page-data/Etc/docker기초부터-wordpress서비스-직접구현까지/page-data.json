{"componentChunkName":"component---src-templates-blog-post-js","path":"/Etc/docker기초부터-wordpress서비스-직접구현까지/","result":{"data":{"site":{"siteMetadata":{"author":"JaeSeoKim","comment":{"utterances":"JaeSeoKim/jaeseokim.github.io"},"sponsor":{"buyMeACoffeeId":"jaeseokim"}}},"markdownRemark":{"excerpt":"귀여운 Docker Logo! 🐳 Docker란! Docker는 Linux Container 기술을 이용하여 만든 Container 기술 중 하나! Linux Container는 기본적으로 프로세스를 격리 시킨다는 개념에서 출발. 예를 들어 chroot 명령어는 프로세스가 접근 할 수 있는 / 경로를 변경하여 접근 하는 파일에 대해서 제어 가능. 하지만 …","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 601px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADq0lEQVQ4y01TaUxUVxQ+M0zSxp+mgpDYAO/de98MpMRI3Vprk8YtkopVq3VLEBGtxVqpAWQRFa0FrdsA4wgupAGXVlt3cSvWrQ7qUJVUTRFG0eqMMAZtWea947kvqH3Jeeeu3/nOPd8BbfIucCRkgUNbBI7Y+WAflAv2IYWQAJEg98SMvUks34ss9xrytCMFfMEJ4F/W2viS8yBm/2wVX9RYxMy9QN48b/4c8ZkQF50Gce9MlYB97cNW9rOP+C4iAaLeEpN3pbLCmyhBCbCIwIAvPGkTM/ZYtOQKsA8uAG3STgsZiJRfAMSUKuDpx2z2j4tBTK8ZzL+96GNZV+7zRWd9xKqFfIAtq+9hy66imPNrkZi1jxiefFtM3w3axO2J9pFr+2njy0DM3Gej4BagHxAAsBwPRdoxlK0gNituIcvzorrmDrKcevJ3u1jhDeTzjuYRU+Bph2EYQBjL+uMhW3qpLvYogja+HLSxW4jh5z++K1IPZvDF587y+ccv8szzOsv26HzhKZ0Y6sRQp0s6BSXAI3d55oXjlJGbAN5Xi5t1df191D7bkUHpJ2jjnP1Bm1BhJ7BqtrIRWcGfSN5gy8nnXkdWdBtZ9hVUVxPTggYZCNWSZiTQ5/HWTyLY8hutiiuIavE9MlrPONMIYu6hNfyr01dlFdnSy90SgN7LoCoaZiEyL9C83pCp829+DxGIwRfXBUXqoQ30NH7V+QTVdS2SSIDWpoG63ofm4oZWXd34EF8Z39Q73vTo9Vrv2DD95seobA3K4Lco/VGkjv4UCEB1+ruUbR2olD01lPI2Qy1vw5iyNoxytmMseTlX3phhennWFfxPkhEpB9L53MOk23CS0ykrqCUtnWppAMlCaqnfUEoDxkB3AFN+eoLx7qcY4zT3pBm9JsfdEpiq3JAIYItCtJD8rKRNAJZ3/R6li4r7WZdwBzFyS7sxvNJvlJ1oxsTKNoyWgMToFSix61a2PpPSMrRPtw2hCktBW7XkSlOCQHSX8GyPT/mhFcNX/d01Yl1j6EPXAz1iM6Xv9EsgnViHCKiH0gyZzApv9ohp1cnUOUCNEMbyG4AvqKWu2wmAiBA+yvVRavG5jlrPA/y34wUGOhEn7H+O0eUkCVe7+Y4Ejur3TUgAl7QkVyJVFEhmYZF0fwCZ2cfm12cefDCnBpLSq5WSKo9z/29N1xr++qfljPdR56SKps6Yots+nu/18q/rqqjdxsQNSOlL7PqMpquOgTnwHjj+BwbwEr8xKNryBuGqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Moby-logo.png (601×431)\"\n        title=\"Moby-logo.png (601×431)\"\n        src=\"/static/7bcbbab5e4c7c9a94f7a32016ae8f827/d8f62/Moby-logo.png\"\n        srcset=\"/static/7bcbbab5e4c7c9a94f7a32016ae8f827/5a46d/Moby-logo.png 300w,\n/static/7bcbbab5e4c7c9a94f7a32016ae8f827/0a47e/Moby-logo.png 600w,\n/static/7bcbbab5e4c7c9a94f7a32016ae8f827/d8f62/Moby-logo.png 601w\"\n        sizes=\"(max-width: 601px) 100vw, 601px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<blockquote>\n<p>귀여운 Docker Logo!</p>\n</blockquote>\n<h1 id=\"-docker란\" style=\"position:relative;\"><a href=\"#-docker%EB%9E%80\" aria-label=\" docker란 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐳 Docker란!</h1>\n<p>Docker는 Linux Container 기술을 이용하여 만든 Container 기술 중 하나!</p>\n<details>\n<summary>📦Linux Container 기술이란?</summary>\n<hr>\n<p>Linux Container는 기본적으로 프로세스를 격리 시킨다는 개념에서 출발.</p>\n<p>예를 들어 <code>chroot</code> 명령어는 프로세스가 접근 할 수 있는 <code>/</code> 경로를 변경하여 접근 하는 파일에 대해서 제어 가능.</p>\n<p>하지만 <code>chroot</code> 명령어 만으로는 네트워크 및 프로세스 등을 제한하기 어렵기 때문에 <code>cgroups</code> 기능을 이용하여 각종 리소스에 대해서 제어가 가능.</p>\n<p>위와 같은 기능들을 이용하고 발전 시켜서 Linux Container 기술이 탄생됨.</p>\n<p>Host와 프로세스, 리소스 격리를 통하여 컨테이너로 가둔 환경을 생성.</p>\n<p>이를 통해 가상화와 달리 운영체제를 가상화 하기 위한 시스템이 별도로 필요가 없고 격리를 이용하여 Native 수준으로 실행이 가능함.</p>\n<hr>\n</details>\n<p>Docker를 이용하게 되면 응용 프로그램을 Host와 격리되어 실행이 되고 응용 프로그램을 위한 환경 전체가 미리 이미지에 대해 정의가 되어 실행이 되기 때문에 host의 환경과 상관없이 언제나 동일한 실행할 수 있다!</p>\n<p>또한 가상화와 달리 격리하여 프로세스를 실행하는 것 이기 때문에 평범한 프로그램을 실행하고 종료하는 것과 같이 빠른 실행과 종료가 가능하다.</p>\n<p>위 장점들을 통해서 하나의 이미지에서 <strong>개발과 테스트 배포</strong> 모든 것이 <strong>빠르고 신속</strong>하게 이루어 질 수 있다.</p>\n<p>Docker는 대부분의 운영 체제에서 지원을 하나 Linux Container 기술이기 때문에 Linux 이외의 환경, Mac, Windows에서는 VM위에서 동작하게 된다.</p>\n<h2 id=\"-docker-image\" style=\"position:relative;\"><a href=\"#-docker-image\" aria-label=\" docker image permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💿 Docker Image</h2>\n<p>Docker는 만들어진 Container 환경 상태를 Image로 저장을 할 수 있도록 지원을 한다.</p>\n<p>이렇게 만들어진 Docker Image를 기반으로 새로운 이미지를 만들거나 다른 서버에서 동일하게 실행이 가능하다.</p>\n<p>이러한 Docker Image를 업로드 하여 보관하고 버전 관리 하는 곳이 있는데 그 곳을 <code>registry</code> 라고 한다.</p>\n<p>대표적인 registry로 <a href=\"https://hub.docker.com/\"><strong>Docker Hub</strong></a>가 있다.</p>\n<h2 id=\"-dockerfile\" style=\"position:relative;\"><a href=\"#-dockerfile\" aria-label=\" dockerfile permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗂 Dockerfile</h2>\n<p>Dockerfile은 image를 생성하기 위한 Script 파일이다.</p>\n<p>Dockerfile은 Image를 만들기 위한 작업이 기재되어 있기 때문에 Build가 되면 동일한 Image를 만들어내게 된다.</p>\n<p>이 점을 이용하여 배포 시에 Build 후 나온 몇 기가 이상되는 이미지를 이용하여 배포하기 보다는 Dockerfile를 이용하여 build 하여 배포를 한다.</p>\n<h3 id=\"dockerfile-작성-문법\" style=\"position:relative;\"><a href=\"#dockerfile-%EC%9E%91%EC%84%B1-%EB%AC%B8%EB%B2%95\" aria-label=\"dockerfile 작성 문법 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📝Dockerfile 작성 문법!</h3>\n<h4 id=\"-from\" style=\"position:relative;\"><a href=\"#-from\" aria-label=\" from permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 FROM</h4>\n<p>기본적으로 Dockerfile은 어떤 이미지를 기반으로 시작하는 지에 대해서 정의를 시작한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># FROM &lt;image-name&gt;:&lt;label&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">FROM</span><span class=\"mtk1\"> debian:buster</span></span></span></code></pre>\n<p>위와 같이 <code>FROM</code> 뒤에 이미지의 이름이 오고 그 다음에는 이미지의 label이 오게 된다.</p>\n<p>여기서 이미지는 기본적으로 <a href=\"https://hub.docker.com/\">**Docker Hub</a>** 와 Alias가 되어 있어서 다른 registry에서 이미지를 가져 올 때에는 registry의 전체 url를 포함하여 작성을 해야 한다.</p>\n<h4 id=\"-run\" style=\"position:relative;\"><a href=\"#-run\" aria-label=\" run permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 RUN</h4>\n<p>Dockerfile에서 이미지 내부에서 실행 되어야 하는 명령어를 작성을 할 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># RUN &lt;command&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> apt update -y</span></span></span></code></pre>\n<p>위와 같이 <code>RUN</code> 뒤에 실행이 필요한 명령어를 작성을 하여 사용을 한다.</p>\n<p>이때 위와 같이 사용 하는 방법만이 있는 것이 아니라 직접 실행 되어야 하는 경로를 직접 적어 주는 방법과 인자에 대해서 확실하게 array형태로 정의 해주는 방법도 존재 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> /bin/bash -c </span><span class=\"mtk6\">&#39;echo &quot;Hello World!&quot;&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;/bin/bash&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;-c&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;echo &#39;Hello World!&#39;&quot;</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<p>이때 명령어를 실행한 후에 만들어지는 이미지를 레이어 별로 저장을 하게 되어서 <code>Dockerfile</code>에서 수정을 하여도 이전 레이어를 활용하여 빠르게 빌드가 가능하다.</p>\n<h4 id=\"-copy\" style=\"position:relative;\"><a href=\"#-copy\" aria-label=\" copy permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 COPY</h4>\n<p>Docker image를 만들면서 내부에 Sourcefile를 복사하여 이동이 필요 할 때가 있는데 이러한 상황에서는 아래와 같이 사용을 할 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># COPY &lt;src&gt; &lt;dst&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">COPY</span><span class=\"mtk1\"> init.sh /</span></span></span></code></pre>\n<h4 id=\"-add\" style=\"position:relative;\"><a href=\"#-add\" aria-label=\" add permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 ADD</h4>\n<p>Dockerfile에는 <code>COPY</code> 와 유사한 성격인 <code>ADD</code> 명령어가 존재를 한다.</p>\n<p><code>ADD</code> 는 <code>COPY</code> 와 달리 파일의 src 부분에 url를 적게 되면 자동으로 파일을 다운 받아서 복사를 하고 압축 파일의 경우에는 압축을 해제해서 전달하게 되는 특징이 존재한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># ADD &lt;src(url)&gt; &lt;dest&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ADD</span><span class=\"mtk1\"> &lt;https://www.docker.com/sites/default/files/d8/2019-07/Moby-logo.png&gt; /</span></span></span></code></pre>\n<p>이러한 특성이 존재하기 때문에 <code>COPY</code> 와 <code>ADD</code> 를 적절히 선택을 하여서 사용을 해야 한다.</p>\n<h4 id=\"-env\" style=\"position:relative;\"><a href=\"#-env\" aria-label=\" env permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 ENV</h4>\n<p>Dockerfile에서는 내부 이미지에서 설정되는 환경 변수에 대해서도 아래와 같이 설정이 가능하다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># ENV name=value</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ENV</span><span class=\"mtk1\"> DEV_ENV=true</span></span></span></code></pre>\n<h4 id=\"-workdir\" style=\"position:relative;\"><a href=\"#-workdir\" aria-label=\" workdir permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 WORKDIR</h4>\n<p>Dockerfile에서 작업 하는 경로에 대해서 정의를 할 때에는 <code>WORKDIR</code> 를 이용하여 정의를 하게 된다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># WORKDIR &lt;dir&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">WORKDIR</span><span class=\"mtk1\"> /root</span></span></span></code></pre>\n<h4 id=\"-user\" style=\"position:relative;\"><a href=\"#-user\" aria-label=\" user permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 USER</h4>\n<p><code>WORKDIR</code> 를 이용하여 작업 경로를 지정하는 것과 같이 작업하는 사용자에 대해서도 정의가 가능하다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk5 mtki\"># USER &lt;user&gt;[:&lt;group&gt;] | &lt;UID&gt;[:&lt;GID&gt;]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">USER</span><span class=\"mtk1\"> 0:0</span></span></span></code></pre>\n<p>단 이때 사용 되는 user에 대해서는 미리 <code>RUN</code> 를 이용해서 user와 group를 추가를 하거나 이미지에 등록이 된 user여만 작동을 하게 된다.</p>\n<h4 id=\"-run-1\" style=\"position:relative;\"><a href=\"#-run-1\" aria-label=\" run 1 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 RUN</h4>\n<p><code>RUN</code> 를 할 때에 사용이 되는 기본 shell에 대해 아래와 같이 정의가 가능 하다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># SHELL [&lt;executable&gt;, &lt;parameters&gt;]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">SHELL</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;/bin/bash&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;-&quot;</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<h4 id=\"-arg\" style=\"position:relative;\"><a href=\"#-arg\" aria-label=\" arg permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 ARG</h4>\n<p>Dockerfile은 image를 만들어주는 script 이므로 동적으로 할당이 가능한 <code>ARG</code> 를 사용 가능을 하다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># ARG &lt;name&gt;[=&lt;default value&gt;]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ARG</span><span class=\"mtk1\"> user=root</span></span></span></code></pre>\n<p>이때 <code>ARG</code> 명령어로 정의하게 된 환경 변수는 동일한 <code>ARG</code> 변수를 재정의 한다.</p>\n<p>빌드 할 때 만약 arg의 값을 변경하고 싶다면 아래와 같이 사용 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker build --build-arg user=jaeskim </span><span class=\"mtk8\">.</span></span></span></code></pre>\n<p>만약 환경 변수를 arg를 이용하여 재정의 하여 사용을 하고 싶다면 아래와 같이 사용 할 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ARG</span><span class=\"mtk1\"> TEST</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ENV</span><span class=\"mtk1\"> TEST=${TEST:-hello_world}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> echo $TEST</span></span></span></code></pre>\n<h4 id=\"-expose\" style=\"position:relative;\"><a href=\"#-expose\" aria-label=\" expose permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 EXPOSE</h4>\n<p>컨테이너 내부에서 네트워크 포트를 수신 대기 함을 Docker에게 미리 알려줄 수 있는데 이때 <code>EXPOSE</code> 명령어로 설정한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># EXPOSE &lt;port&gt; | &lt;port&gt;&lt;protocol&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">EXPOSE</span><span class=\"mtk1\"> 80</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">EXPOSE</span><span class=\"mtk1\"> 443/tcps</span></span></span></code></pre>\n<p>기본적으로 protocol에 대해서 정의를 하지 않게 된다면 tcp로 작동을 하게 되고, 여기서 정의를 하였다고 바로 HOST와 port가 연결이 되는 것이 아니기 때문에 run time시에 port binding 작업이 수행 되어야 한다.</p>\n<h4 id=\"-cmd-entrypoint\" style=\"position:relative;\"><a href=\"#-cmd-entrypoint\" aria-label=\" cmd entrypoint permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 CMD, ENTRYPOINT</h4>\n<p>이제 <code>Dockerfile</code> 에서 컨테이너가 올라가고 실행이 명령어에 대해서 정의 하는 방법에 대해 알아 본다.</p>\n<p><code>CMD</code> , <code>ENTRYPOINT</code> 라는 명령어를 이용하여 정의를 하게 되는데 각 각 사용 할 때와 같이 사용할 때의 예제와 함께 차이를 알아 본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">CMD</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;echo&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;hello&quot;</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<p>위와 같이 만들어진 dockerfile를 빌드 후 실행을 하게 되면 <code>echo hello</code> 가 작동 하는 것을 볼 수 있다.</p>\n<p>이 때 <code>docker run test:cmd echo hi</code> 와 같이 마지막에 실행 인자를 전달 하게 되면 <code>echo hi</code> 가 실행이 되고 <code>inspect</code> 명령어로 확인을 해보면 <code>CMD</code> 부분의 정보가 새로 정의한 내용으로 변경이 되어 있는 것을 볼 수 가 있다.</p>\n<p>이번에는 <code>ENTRYPOINT</code> 명령어를 단독으로 사용을 해본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ENTRYPOINT</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;echo&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;hello&quot;</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<p>위와 같이 작성한 dockerfile를 빌드 후 실행하면 당연하게 <code>hello</code> 가 출력이 되는 것을 볼 수 있다.</p>\n<p>이 때 <code>docker run test:entrypoint echo world</code> 로 실행을 하게 되면 <code>hello echo world</code> 가 나오는 것을 볼 수 있다.</p>\n<p>이러한 동작이 나온 이유를 <code>inspect</code> 명령어를 통해 알아본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"json\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">&quot;Cmd&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;echo&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;world&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">&quot;Image&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;test:entrypoint&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">&quot;Volumes&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">&quot;WorkingDir&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">&quot;Entrypoint&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;echo&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;hello&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>dcokerfile에서 작성된 <code>ENTRYPOINT</code> 는 재정의 되지 않고 <code>CMD</code> 부분은 재정의 되었지만 <code>ENTRYPOINT</code> + <code>CMD</code> 부분이 이어져서 작동을 한다.</p>\n<p>즉 <code>ENTRYPOINT</code> 에는 서비스로 돌아가는 어플리케이션 으로 정의를 하고 <code>CMD</code> 부분을 추가 적으로 인자를 통해 정보를 전달 하는 형태로 만들어지는 것이 권장 된다.</p>\n<h4 id=\"-volume\" style=\"position:relative;\"><a href=\"#-volume\" aria-label=\" volume permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 VOLUME</h4>\n<p>Docker에서는 기본적으로 데이터를 이미지 레이어에 저장을 하게 되므로 container가 내려가고 새로운 것을 올릴 때마다 초기 설정된 데이터로 초기화 되는 휘발성이라는 특징을 가지고 있다.</p>\n<p>이때 log file이나 db와 같은 데이터는 휘발성이 아닌 비 휘발성으로 관리 되어야 하므로 아래와 같이 특정 폴더를 기본 volume으로 저장을 하지 않고 따로 저장을 할 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># VOLUME [&lt;dir&gt;]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">VOLUME</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;/data&quot;</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<h4 id=\"-onbuild\" style=\"position:relative;\"><a href=\"#-onbuild\" aria-label=\" onbuild permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 ONBUILD</h4>\n<p>만약 만들어진 image를 가지고 FROM를 할 때에 미리 수행 되어야 하는 작업이 있을 때 <code>ONBUILD</code> 를 사용한다.</p>\n<p>예를 들어서 아래와 같이 <code>python build</code> 에 관련된 이미지라면 <code>FROM</code> 으로 사용하면 build를 할 때 src 파일들을 가져와 사용을 하게 만들 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># ONBUILD &lt;INSTRUCTION&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">ONBUILD</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ADD</span><span class=\"mtk1\"> . /app/src</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">ONBUILD</span><span class=\"mtk1\"> </span><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> /usr/local/bin/python-build --dir /app/src</span></span></span></code></pre>\n<h4 id=\"-stopsignal\" style=\"position:relative;\"><a href=\"#-stopsignal\" aria-label=\" stopsignal permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 STOPSIGNAL</h4>\n<p>기본적으로 Docker Container를 종료하게 되면 내부에서 작동하는 프로세스에게 <code>SIGTERM</code> 를 보내게 되는데 이 때 보내지는 SIGNAL에 대해서 정의가 가능하다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># STOPSIGNAL signal</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">STOPSIGNAL</span><span class=\"mtk1\"> SIGKILL</span></span></span></code></pre>\n<h4 id=\"-healthcheck\" style=\"position:relative;\"><a href=\"#-healthcheck\" aria-label=\" healthcheck permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 HEALTHCHECK</h4>\n<p>DockerContainer가 올라갔을 때 실제로 프로세스가 정상적으로 동작 하는 지에 대해서 Healthcheck가 가능한데 이것을 아래와 같이 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># HEALTHCHECK [OPTIONS] CMD command</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">HEALTHCHECK</span><span class=\"mtk1\"> --interval=5m --timeout=3s \\\\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">CMD</span><span class=\"mtk1\"> curl -f &lt;http://localhost/&gt; || exit 1</span></span></span></code></pre>\n<p>여기서 사용 되는 옵션은 아래와 같이 사용이 된다.</p>\n<ul>\n<li><code>-interval=DURATION</code> (default: <code>30s</code>)</li>\n<li><code>-timeout=DURATION</code> (default: <code>30s</code>)</li>\n<li><code>-start-period=DURATION</code> (default: <code>0s</code>)</li>\n<li><code>-retries=N</code> (default: <code>3</code>)</li>\n</ul>\n<h4 id=\"-label\" style=\"position:relative;\"><a href=\"#-label\" aria-label=\" label permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📋 LABEL</h4>\n<p>생성된 image에 대해 여러가지 정보를 담을 때에는 아래와 같이 사용을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># LABEL &lt;name&gt;=&lt;value&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">LABEL</span><span class=\"mtk1\"> maintainer=</span><span class=\"mtk6\">&quot;jaeskim &lt;jaeskim.student.42seoul.kr&gt;&quot;</span></span></span></code></pre>\n<h2 id=\"-docker-명령어\" style=\"position:relative;\"><a href=\"#-docker-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\" docker 명령어 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🖥 docker 명령어</h2>\n<p>docker를 관리 할 때 사용되는 다양한 명령어가 존재 하는데 그 중 자주 사용되고 중요한 명령어에 대해서 알아 본다.</p>\n<p>옵션이 방대하여 모든 내용을 설명을 못하므로 필요한 기능이 있을 때에는 <a href=\"https://docs.docker.com/engine/reference/commandline/docker/\">reference site</a>에서 확인 하여 사용을 한다.</p>\n<h3 id=\"️-build\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-build\" aria-label=\"️ build permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚙️ build</h3>\n<p><code>build</code> 명령어는 기본적으로 <code>Dockerfile</code> 를 이용하여 image를 만들 때 사용을 하게 된다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"bash\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker build [OPTIONS] PATH | URL | -</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker build --tag test:v1 </span><span class=\"mtk8\">.</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-t</code>, <code>--tag</code> name:tag 와 같은 형태로 인자를 주고 생성되는 image의 tag를 지정하는 옵션이다.</li>\n<li><code>-f</code>, <code>--file string</code> 특정 <code>Dockerfile</code> 를 지정 하여서 이미지를 만들 때 사용한다.</li>\n<li><code>--build-arg</code> Dockerfile에 정의된 변수에 대해서 값을 지정할 때 사용한다.</li>\n<li><code>--no-cache</code> build 할 때 cache를 남기지 않도록 할 때 사용한다.</li>\n</ul>\n<h3 id=\"♂️-run\" style=\"position:relative;\"><a href=\"#%E2%99%82%EF%B8%8F-run\" aria-label=\"♂️ run permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🏃🏻‍♂️ run</h3>\n<p><code>run</code> 명령어는 만들어진 image를 가지고 실행 할 때 사용을 하게 된다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run -p 8080:80 -it --rm --name testserver test:v1 /bin/bash</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-p</code>, <code>--publish</code> (host<em>port:container</em>port) container 내부의 port와 host의 port를 binding 할 때 사용이 된다.</li>\n<li><code>-i</code>, <code>--interactive</code> STDIN를 container와 연결 하여서 동적으로 반응 할 수 있도록 한다.</li>\n<li><code>-t</code>, <code>--tty</code> tty처럼 작동 할 수 있게 한다.</li>\n<li><code>--rm</code> container가 종료되면 자동으로 image를 지워주는 옵션이다.</li>\n<li><code>-e</code>, <code>--env</code> 환경변수를 정의할 때 사용하게 된다.</li>\n<li><code>--name</code> 컨테이너 이름을 정의 한다.</li>\n<li><code>-d</code>, <code>--detach</code> background로 container가 동작하게 되고 ID를 출력한다.</li>\n<li><code>-v</code>, <code>--volume</code> volume를 마운트 시킬 때 사용한다.</li>\n</ul>\n<h3 id=\"-stop\" style=\"position:relative;\"><a href=\"#-stop\" aria-label=\" stop permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✋ stop</h3>\n<p><code>stop</code> 명령어는 container를 중지 시킬때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker stop [OPTIONS] CONTAINER [CONTAINER...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker stop testserver</span></span></span></code></pre>\n<ul>\n<li><code>-t</code>, <code>--time</code> STOPSIGNAL 시그널을 보내고 몇초간 대기를 할지 설정하는 옵션이다.</li>\n</ul>\n<h3 id=\"-start\" style=\"position:relative;\"><a href=\"#-start\" aria-label=\" start permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎬 start</h3>\n<p><code>start</code> 명령어는 멈춰진 container를 다시 동작 시킬 때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker start [OPTIONS] CONTAINER [CONTAINER...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker start testserver</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-a</code>, <code>--attach</code> stdout/stderr 연결 한다.</li>\n<li><code>-i</code>, <code>--interactive</code> STDIN를 container와 연결 하여서 동적으로 반응 할 수 있도록 한다.</li>\n</ul>\n<h3 id=\"️-attach\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-attach\" aria-label=\"️ attach permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚓️ attach</h3>\n<p><code>attach</code> 명령어는 실행된 container의 프로세스에 연결 할 때 사용을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker attach [OPTIONS] CONTAINER</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker attach testserver</span></span></span></code></pre>\n<p>이 때 전달 연결하게 되는 프로세스는 cmd, entrypoint로 정의된 프로세스 이므로 여기서 <code>ctr-c</code> 를 눌러 종료하면 컨테이너가 멈추므로 <code>ctr-p</code>, <code>ctr-q</code> 로 deattach를 하여 나오는 것이 권장이 된다.</p>\n<h3 id=\"-exec\" style=\"position:relative;\"><a href=\"#-exec\" aria-label=\" exec permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📡 exec</h3>\n<p><code>exec</code> 명령어는 실행된 container에게 프로세스를 실행을 시킬 때 사용을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker </span><span class=\"mtk8\">exec</span><span class=\"mtk1\"> -it testserver /bin/bash</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-d</code>, <code>--detach</code> 실행한 프로세스와 연결 시키지 않고 백그라운드로 동작 하게 한다.</li>\n<li><code>-e</code>, <code>--env</code> 컨테이너에게 환경변수를 전달.</li>\n<li><code>-i</code>, <code>--interactive</code> STDIN를 container와 연결 하여서 동적으로 반응 할 수 있도록 한다.</li>\n<li><code>-t</code>, <code>--tty</code> tty처럼 작동 할 수 있게 한다.</li>\n<li><code>-u</code> <code>--user</code> 실행하는 프로세스의 유저를 정의 한다. &#x3C;name|uid>[:&#x3C;group|gid>]</li>\n<li><code>-w</code>, <code>--workdir</code> 실행되는 작업 경로를 지정한다.</li>\n</ul>\n<h3 id=\"-ps\" style=\"position:relative;\"><a href=\"#-ps\" aria-label=\" ps permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗂 ps</h3>\n<p><code>ps</code> 명령어는 continaer로 목록을 확인 할 때 사용을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker ps [OPTIONS]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker ps -a</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-a</code>, <code>--all</code> 모든 container 목록을 출력! (기본값은 작동 중인 continer만 출력함)</li>\n</ul>\n<h3 id=\"-images\" style=\"position:relative;\"><a href=\"#-images\" aria-label=\" images permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📀 images</h3>\n<p><code>images</code> 명령어는 images의 목록을 확인🇧🇸 할 때 사용을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker images [OPTIONS] [REPOSITORY[:TAG]]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker images -a</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-a</code>, <code>--all</code> 모든 images 목록을 출력! (기본값은 중간 layer 단계의 images는 숨김)</li>\n</ul>\n<h3 id=\"-inspect\" style=\"position:relative;\"><a href=\"#-inspect\" aria-label=\" inspect permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🖨 inspect</h3>\n<p><code>inspect</code> 명령어는 container object의 정보를 출력 할 때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker inspect testserver</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-f</code>, <code>--format</code> 옵션과 함께 주어진 template 형태로 출력를 한다.</li>\n</ul>\n<h3 id=\"-rm\" style=\"position:relative;\"><a href=\"#-rm\" aria-label=\" rm permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗑 rm</h3>\n<p><code>rm</code> 명령어는 contiainer를 제거 할 때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker rm [OPTIONS] CONTAINER [CONTAINER...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker rm testserver</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-f</code>, <code>--force</code> 작동 중인 container여도 SIGKILL를 보내어 강제로 종료후 삭제를 한다.</li>\n</ul>\n<h3 id=\"-rmi\" style=\"position:relative;\"><a href=\"#-rmi\" aria-label=\" rmi permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✨ rmi</h3>\n<p><code>rmi</code> 명령어는 images를 제거를 할 때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker rmi [OPTIONS] IMAGE [IMAGE...]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker rmi </span><span class=\"mtk8\">test</span></span></span></code></pre>\n<p>기본적으로 위와 같은 구조로 작동이 되는데 자주 사용 되는 옵션에 대해서만 설명을 한다.</p>\n<ul>\n<li><code>-f</code>, <code>--force</code> 강제로 image를 제거한다.</li>\n</ul>\n<h3 id=\"-commit\" style=\"position:relative;\"><a href=\"#-commit\" aria-label=\" commit permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛎 commit</h3>\n<p><code>commit</code> 명령어는 container의 상태를 가지고 새로운 이미지를 만들 때 사용한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"32\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker commit testserver testserver:v2</span></span></span></code></pre>\n<ul>\n<li><code>-a</code>, <code>--author</code> author에 대해 정의 한다.</li>\n<li><code>-c</code>, <code>--change</code> 생성된 image에 Dockerfile 명령어를 적용.</li>\n<li><code>-m</code>, <code>--message</code> 커밋 메세지 작성.</li>\n<li><code>-p</code>, <code>--pause</code> commit 시점에 container 일시 중단. (Default true)</li>\n</ul>\n<h1 id=\"-docker를-wordpress-서비스-직접-구현\" style=\"position:relative;\"><a href=\"#-docker%EB%A5%BC-wordpress-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84\" aria-label=\" docker를 wordpress 서비스 직접 구현 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐳 Docker를 Wordpress 서비스 직접 구현!</h1>\n<p>이제 위에서 정리한 내용을 바탕으로 Wordpress 서비스를 직접 구현을 한다.!</p>\n<p>일단 시작 하기 전에 아래와 같은 조건으로 구현을 할 예정이다.</p>\n<ul>\n<li>Docker Container 에서는 web server를 Nginx로 사용을 하고, base Images는 debian buster로 설정한다.</li>\n<li>WebServer는 동시에 여러가지 서비스를 실행 하며, 서비스의 목록은 WordPress, phpMyAdmin, MySQL 이다.</li>\n<li>WebServer는 SSL protocol이 적용이 되어야 한다.</li>\n<li>Url에 따라서 각 서비스로 연결이 되어야 한다.</li>\n<li>비활성화가 가능한 autoindex를 이용하여 서비스가 동작 하는지에 대해 확인이 가능해야 한다.</li>\n</ul>\n<h2 id=\"-ssl-설정-하기\" style=\"position:relative;\"><a href=\"#-ssl-%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0\" aria-label=\" ssl 설정 하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔐 SSL 설정 하기!</h2>\n<p>일단 <code>Makefile</code>를 먼저 간단하게 작성을 해본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"33\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">FROM</span><span class=\"mtk1\"> debian:buster</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">LABEL</span><span class=\"mtk1\"> maintainer=</span><span class=\"mtk6\">&quot;jaeskim &lt;jaeskim.student.42seoul.kr&gt;&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># init setup</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> apt update -y; apt upgrade -y</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># install dependency</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> apt install nginx curl -y</span></span></span></code></pre>\n<p>이렇게 작성한 dockerfile를 가지고 일단 build를 하여서 내부에 접근하여서 <code>SSL</code> 설정을 시작한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"34\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker build --tag ft_server:v1 </span><span class=\"mtk8\">.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run -it --name ft_server ft_server:v1 /bin/bash</span></span></span></code></pre>\n<p><code>SSL</code> 를 적용 하기 위해서는 인증서가 필요한데 인증서를 CA에 등록을 하여 사용을 하게 되면 비용이 발생하므로 OpenSSL를 이용하여 자체 서명 인증서를 발급 받아서 구현을 한다.</p>\n<p>SSL 인증서를 발급 받기 위해서는 아래의 절차가 진행되어야 한다.</p>\n<ol>\n<li>\n<p>개인키 생성</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"35\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">openssl genrsa -out ft_server.localhost.key 4096</span></span></span></code></pre>\n</li>\n<li>\n<p>개인키를 가지고 자체 서명 인증서 생성</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"36\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">openssl req -x509 -nodes -days 365 -key ft_server.localhost.key -out ft_server.localhost.crt -subj </span><span class=\"mtk6\">&quot;/C=KR/ST=SEOUL/L=Gaepo-dong/O=42Seoul/OU=jaeskim/CN=localhost&quot;</span></span></span></code></pre>\n</li>\n</ol>\n<p>이제 위에서 만든 <code>ft_server.localhost.key</code>, <code>ft_server.localhost.crt</code> 파일을 <code>/etc/ssl/certs</code> 와 <code>/etc/ssl/private</code> 경로로 이동을 시켜준다.</p>\n<p>각 인증서 파일에 대한 권한을 <code>644</code> 변경을 하여서 root 소유자 만이 수정이 가능하도록 한다.</p>\n<p>이제 <code>/etc/nginx/sites-available/default</code> 파일을 아래와 같이 수정을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"nginx\" data-index=\"37\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">server {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tlisten 80 default_server;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tlisten [::]:80 default_server;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\treturn 301 https://$host$request_uri;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">server {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tlisten 443 ssl default_server;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tlisten [::]:443 ssl default_server;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tserver_name _;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tssl_certificate /etc/ssl/certs/ft_server.localhost.crt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tssl_certificate_key /etc/ssl/private/ft_server.localhost.key;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\troot /var/www/html;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tindex index.html index.htm index.nginx-debian.html;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tlocation / {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\ttry_files $uri $uri/ =404;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p><code>443</code> 으로 들어온 요청은 설정한 <code>ssl_certificate</code>, <code>ssl_certificate_key</code> 파일들을 이용하여 ssl 통신을 하게 되고, 기존 <code>80</code> 으로 들어온 요청은 <code>https</code> 요청을 redirect 하도록 하였다.</p>\n<p>continer 내부에서 수정한 파일을 continer 외부로 복사하기 위하여 <code>docker cp</code> 명령어를 이용하여 외부로 파일을 가져오고 위에서 했던 작업들을 dockerfile에 다시 정의를 해주었다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"38\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">FROM</span><span class=\"mtk1\"> debian:buster</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">LABEL</span><span class=\"mtk1\"> maintainer=</span><span class=\"mtk6\">&quot;jaeskim &lt;jaeskim.student.42seoul.kr&gt;&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># init setup</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> apt update -y; apt upgrade -y</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># install dependency</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> apt install nginx vim curl -y</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># environment</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ENV</span><span class=\"mtk1\"> AUTO_INDEX=false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># setup SSL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> openssl genrsa -out ft_server.localhost.key 4096; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\topenssl req -x509 -nodes -days 365 \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t-key ft_server.localhost.key \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t-out ft_server.localhost.crt \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t-subj </span><span class=\"mtk6\">&quot;/C=KR/ST=SEOUL/L=Gaepo-dong/O=42Seoul/OU=jaeskim/CN=localhost&quot;</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tchmod 644 ft_server.localhost.*; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tmv ft_server.localhost.crt /etc/ssl/certs/;\t\\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tmv ft_server.localhost.key /etc/ssl/private/;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">COPY</span><span class=\"mtk1\"> src/nginx-sites-available-default.conf /etc/nginx/sites-available/default</span></span></span></code></pre>\n<h2 id=\"-비활성화가-가능한-autoindex-기능-추가\" style=\"position:relative;\"><a href=\"#-%EB%B9%84%ED%99%9C%EC%84%B1%ED%99%94%EA%B0%80-%EA%B0%80%EB%8A%A5%ED%95%9C-autoindex-%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80\" aria-label=\" 비활성화가 가능한 autoindex 기능 추가 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗂 비활성화가 가능한 autoindex 기능 추가!</h2>\n<p>이번에는 비활성화가 가능한 autoindex 기능을 추가를 해본다.</p>\n<p><code>cmd</code> 를 이용하여 비활성화 하도록 만들어 본다.</p>\n<p>일단 <code>server.sh</code> 파일을 작성을 하고 <code>ENTRYPOINT</code> 로 설정을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"39\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#!/bin/bash</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">/bin/bash -C /setup_autoindex.sh </span><span class=\"mtk4\">$1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">service nginx start</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">if</span><span class=\"mtk1\"> [ </span><span class=\"mtk4\">$?</span><span class=\"mtk1\"> </span><span class=\"mtk8\">-eq</span><span class=\"mtk1\"> 0 ]; </span><span class=\"mtk10\">then</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\ttail -f /var/log/nginx/access.log /var/log/nginx/error.log</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">f</span></span></span></code></pre>\n<p>그리고 <code>setup_autoindex.sh</code> 에게 첫번째 인자를 같이 전달하여 <code>cmd</code> 를 이용하여 제어가 가능하도록 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"40\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#!/bin/bash</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># setup index.html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">if</span><span class=\"mtk1\"> [ </span><span class=\"mtk8\">-e</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;/var/www/html/index.nginx-debian.html&quot;</span><span class=\"mtk1\"> ]; </span><span class=\"mtk10\">then</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tmv /var/www/html/index.nginx-debian.html /var/www/html/index.html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">fi</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">if</span><span class=\"mtk1\"> [ </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">$1</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;autoindex&quot;</span><span class=\"mtk1\"> ]; </span><span class=\"mtk10\">then</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;autoindex on!&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s@autoindex off;@autoindex on;@g&quot;</span><span class=\"mtk1\"> /etc/nginx/sites-available/default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s@index index.html index.htm;@index index.htm;@g&quot;</span><span class=\"mtk1\"> /etc/nginx/sites-available/default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">else</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;autoindex off!&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s@autoindex on;@autoindex off;@g&quot;</span><span class=\"mtk1\"> /etc/nginx/sites-available/default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s@index index.htm;@index index.html index.htm;@g&quot;</span><span class=\"mtk1\"> /etc/nginx/sites-available/default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">fi</span></span></span></code></pre>\n<p>이제 빌드를 하고 <code>run</code> 를 동작 할 때 <code>autoindex</code> cmd를 같이 보냈을 떄에 대해서 제대로 동작 하는지를 확인 해본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"41\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run --rm -it --env AUTO_INDEX=true -p 443:443 -p 80:80 --name ft_server ft_server:v3 autoindex</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQY052ORw7CQBRD5xyQPr0lk8D9r2b4loKyQUIsnuxfZaWtx2IcZm2Jjxm5bqjbTi9zqV1ISKUi5kIvs5Dy28dPLah2PHlwNqyPuPcjbt1Avfpr7xtqbTva8WCisjZiXEA/zn+hfEyMLE+0dUw4LQbdMHHh1F95AfmKcNDaHyYOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201012220274\"\n        title=\"image-20201201012220274\"\n        src=\"/static/b7cadaf85224b0ee97399bcbab130a30/c1b63/image-20201201012220274.png\"\n        srcset=\"/static/b7cadaf85224b0ee97399bcbab130a30/5a46d/image-20201201012220274.png 300w,\n/static/b7cadaf85224b0ee97399bcbab130a30/0a47e/image-20201201012220274.png 600w,\n/static/b7cadaf85224b0ee97399bcbab130a30/c1b63/image-20201201012220274.png 1200w,\n/static/b7cadaf85224b0ee97399bcbab130a30/2ed34/image-20201201012220274.png 1776w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5klEQVQY062Oy06DYBSEeakWW1qJCGg1bn0XXRlTF01/SLSQAj6AD6ayBCKEO/kEksbb1pNM5lxmTkbSVqdcnqicT2SuFiuUi2s08wxF01CPVQzDGKHr+hebJsvFnHnvmclLpvIUZXLErJ+l9WaNuL9D3NziPDxhPb/w6O6xXRdnt8P3fYIgwPO8sfe8/chOf98KgW3biJ63lkDYFlIYhry+v5GkKf9RUpYUFFlF27TUdU1Zln+QJAlRFBHHMXmeU1UVRVGQ9iF+a6U0yck+cpqmoW3bH+i6buThwcEw6A77IcB33YBPFh5EL6HQxkQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201012247664\"\n        title=\"image-20201201012247664\"\n        src=\"/static/1da30d60dfe7dbbbb8e271e0b94e872a/c1b63/image-20201201012247664.png\"\n        srcset=\"/static/1da30d60dfe7dbbbb8e271e0b94e872a/5a46d/image-20201201012247664.png 300w,\n/static/1da30d60dfe7dbbbb8e271e0b94e872a/0a47e/image-20201201012247664.png 600w,\n/static/1da30d60dfe7dbbbb8e271e0b94e872a/c1b63/image-20201201012247664.png 1200w,\n/static/1da30d60dfe7dbbbb8e271e0b94e872a/e92cd/image-20201201012247664.png 1778w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"-mysqldbmaria-db-설치-및-설정-하기\" style=\"position:relative;\"><a href=\"#-mysqldbmaria-db-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0\" aria-label=\" mysqldbmaria db 설치 및 설정 하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📦 mysqlDB(maria DB) 설치 및 설정 하기!</h2>\n<p>이번에는 wordpress를 위한 DB를 설정해 본다.</p>\n<p><code>apt install marinade-server</code> 명령어를 이용하여 설치를 한다.</p>\n<p>여기서 mariadb를 사용하는 이유는 기존 mysql이 Oracle로 인수가 되면서 Fork되어 진행되고 있는 opensource 프로젝트 이다. (mysql과 동일한 소스코드를 기반으로 하여 대부분의 작업이 호환이 된다.)</p>\n<p>Maria db를 php와 함께 사용을 하기 위해서는 여러가지 모듈이 필요한데 이에 따른 모듈을 설치한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"42\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ apt install php-mysql php-mbstring</span></span></span></code></pre>\n<ul>\n<li>php-mysql : php에서 mysql명령어를 실행하기 위한 모듈</li>\n<li>php-mbstring : 한국어, 중국어, 일본어와 같은 multibyte 문자열을 처리 하기 위해 사용되는 모듈</li>\n</ul>\n<p>이제 <code>mysql service</code> 를 시작시키고 SQL 명령어에 대해서 작성을 해본다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"mysql\" data-index=\"43\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"># wordpress db 생성</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">CREATE DATABASE wordpress;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># wordpress db를 사용</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">USE wordpress;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># jaeskim user를 password `testpassword`으로 만들고 localhost에서만 접근이 가능하도록 함.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">CREATE USER &#39;jaeskim&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;testpassword&#39;;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># jaeskim에게 wordpress db에 대한 권한을 전부 위임</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">GRANT ALL PRIVILEGES ON wordpress.* TO &#39;jaeskim&#39;@&#39;localhost&#39; WITH GRANT OPTION;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># 권한 설정 업데이트</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">FLUSH PRIVILEGES;</span></span></code></pre>\n<p>이제 이렇게 작성한 내용을 바탕으로 실제 dockerfile에 적용을 해본다.</p>\n<p>이때 db<em>name, db</em>user, db_password에 대한 항목은 <code>ARG</code> 명령어를 이용하여 관리를 한다. (실제로 암호와 같은 중요 정보는 <code>docker secret</code> 명령어를 이용하여 관리하는 것이 권장됨.)</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"44\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># init arg</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ARG</span><span class=\"mtk1\"> WP_DB_NAME=wordpress</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ARG</span><span class=\"mtk1\"> WP_DB_USER=jaeskim</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">ARG</span><span class=\"mtk1\"> WP_DB_PASSWORD=42seoul</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\"># setup mysqlDB(mariaDB)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> service mysql start; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tmysql -e </span><span class=\"mtk6\">&quot;CREATE DATABASE ${WP_DB_NAME};\\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">\tUSE ${WP_DB_NAME}; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">\tCREATE USER &#39;${WP_DB_USER}&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;${WP_DB_PASSWORD}&#39;; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">\tGRANT ALL PRIVILEGES ON ${WP_DB_NAME}.* TO &#39;${WP_DB_USER}&#39;@&#39;localhost&#39; WITH GRANT OPTION; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">\tFLUSH PRIVILEGES;&quot;</span></span></span></code></pre>\n<p>위와 같이 <code>mysql -e</code> 와 <code>ARG</code> 를 이용하여 mysql 서비스 부분을 완성하였다.</p>\n<h2 id=\"-wordpress-서비스-설치-및-설정하기\" style=\"position:relative;\"><a href=\"#-wordpress-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\" wordpress 서비스 설치 및 설정하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 wordpress 서비스 설치 및 설정하기!</h2>\n<p>이전에 설치한 <code>curl</code> 를 이용하여 <a href=\"https://wordpress.org/latest.tar.gz\">https://wordpress.org/latest.tar.gz</a> 를 다운 받아서 설치를 해본다!!!</p>\n<p>일단 wordpress를 설치 하기 전에 nignix에서 php를 동작 할 수 있도록 도와 주는 모듈인 <code>php-fpm</code> 를 설치 하여 사용을 한다.</p>\n<p>그리고 <code>niginx/sites-available/default</code> 파일을 수정하여서 php가 동작 하도록 수정을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"nginx\" data-index=\"45\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">index index.html index.htm index.php;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">location ~ \\.php$ {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tinclude snippets/fastcgi-php.conf;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\tfastcgi_pass unix:/var/run/php/php7.3-fpm.sock;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p>이제 기본적인 준비가 끝났으니 아래의 명령어를 통해서 wordpress를 다운 받고 압축을 해제 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"46\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ curl -O https://wordpress.org/latest.tar.gz</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ tar -xzf latest.tar.gz -C /var/www/html/</span></span></span></code></pre>\n<p>이제 내부에 존재하는 <code>wp-config-sample.php</code> sed 명령어를 통해서 수정을 해본다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQY04WQzVKDQBCEeQ+VZAMILIFl2Q3s8k+SikaN5cX3f5R23NIqL4mHr2Yu09PdXlLskKkWen7Dth4h+xOE2SOVBnkzOwqzQNi9m5nukYgaXFo3M9UhLQ3CVIBFKTzRHpDXE1SzRzdfsGuP4GWD/vCBZjxD2wPM+AIzvUKoAUGcwV8HxAYPf1kxh5eIHXhlkeYaBX3LiSgtaO8dj7SH9JltIvg+w72/ItZX8eTwhIpiqnpGv7zDkpM4kzDDGZacST2AcwnGQtzRwa+Ta3gRHX+7TApNXTQU1yDeVohz5dhE/Cdi8K+YEyy7I0rqqdIjWnK0nD4xLBdwKtwOz+R8gqTofKsQBomLdUvwC4sJtjIc7nYnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201190619006\"\n        title=\"image-20201201190619006\"\n        src=\"/static/8a1bcc2b0c500fa61868f4aabb683458/c1b63/image-20201201190619006.png\"\n        srcset=\"/static/8a1bcc2b0c500fa61868f4aabb683458/5a46d/image-20201201190619006.png 300w,\n/static/8a1bcc2b0c500fa61868f4aabb683458/0a47e/image-20201201190619006.png 600w,\n/static/8a1bcc2b0c500fa61868f4aabb683458/c1b63/image-20201201190619006.png 1200w,\n/static/8a1bcc2b0c500fa61868f4aabb683458/7960f/image-20201201190619006.png 1274w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>내부를 보게 되면 기본적으로 정의 해야 하는 DB 정보가 있는데 이 부분을 아까전에 mysql를 설정 하면서 사용 하였던 변수를 이용하여 수정을 하도록 한다.!</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"47\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> mv /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/database_name_here/${WP_DB_NAME}/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/username_here/${WP_DB_USER}/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/password_here/${WP_DB_PASSWORD}/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php</span></span></span></code></pre>\n<p>그리고 아래와 같이 여러가지 key, salt 값을 정의 하는 부분이 있는데 이것을 <code>/dev/null</code> 를 이용하여서 채워준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6UlEQVQY05WRzW6DMBCEeZCA+THYYGIMxIWQBPKn5JBUVXvo+7/JdHHUnunh04xW61mv7ZWbA1S7g9AbyOqNsJDagsUpVkH4b7zSjtD9Cbo7OtZOJ5R27waodkBRdyhpaFH3yA3Vmq2rFaZ7KZEqAxZxeMV8iMjyCixMECUCSSrBMwUuFGIuEVA9oGanjvjP+78+Is9ieHa4YTw8cLl+QeQaphkwTg+czh+kT5iqx8pny1eeA6fxidv9G7mq0bR7F3S+fGI8vqM2W/jU6LNoEV45v49uIaRGSB8xr5jJNd22chpz8Zq+MPAHtwmxBD9P8osAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201192914636\"\n        title=\"image-20201201192914636\"\n        src=\"/static/f37620ced0e16f24cff89328689cab7e/c1b63/image-20201201192914636.png\"\n        srcset=\"/static/f37620ced0e16f24cff89328689cab7e/5a46d/image-20201201192914636.png 300w,\n/static/f37620ced0e16f24cff89328689cab7e/0a47e/image-20201201192914636.png 600w,\n/static/f37620ced0e16f24cff89328689cab7e/c1b63/image-20201201192914636.png 1200w,\n/static/f37620ced0e16f24cff89328689cab7e/d61c2/image-20201201192914636.png 1800w,\n/static/f37620ced0e16f24cff89328689cab7e/97a96/image-20201201192914636.png 2400w,\n/static/f37620ced0e16f24cff89328689cab7e/2ef06/image-20201201192914636.png 2448w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"48\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">wp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;AUTH_KEY&#39;,         &#39;put your unique phrase here&#39; );/define( &#39;AUTH_KEY&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;SECURE_AUTH_KEY&#39;,  &#39;put your unique phrase here&#39; );/define( &#39;SECURE_AUTH_KEY&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;LOGGED_IN_KEY&#39;,    &#39;put your unique phrase here&#39; );/define( &#39;LOGGED_IN_KEY&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;NONCE_KEY&#39;,        &#39;put your unique phrase here&#39; );/define( &#39;NONCE_KEY&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;AUTH_SALT&#39;,        &#39;put your unique phrase here&#39; );/define( &#39;AUTH_SALT&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;SECURE_AUTH_SALT&#39;, &#39;put your unique phrase here&#39; );/define( &#39;SECURE_AUTH_SALT&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;LOGGED_IN_SALT&#39;,   &#39;put your unique phrase here&#39; );/define( &#39;LOGGED_IN_SALT&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\twp_salt=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s/define( &#39;NONCE_SALT&#39;,       &#39;put your unique phrase here&#39; );/define( &#39;NONCE_SALT&#39;, &#39;</span><span class=\"mtk4\">$wp_salt</span><span class=\"mtk6\">&#39; );/g&quot;</span><span class=\"mtk1\"> /var/www/html/wordpress/wp-config.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">unset</span><span class=\"mtk1\"> wp_salt</span></span></span></code></pre>\n<p>이제 저번에 작성한 <code>src/server.sh</code> 파일을 수정하여서 <code>mysql</code>, <code>php-fpm</code> 등도 같이 실행이 가능하도록 설정을 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"49\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#!/bin/bash</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">/bin/bash -C /setup_autoindex.sh </span><span class=\"mtk4\">$1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">service mysql start</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">service php7.3-fpm start</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">service nginx start</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">if</span><span class=\"mtk1\"> [ </span><span class=\"mtk4\">$?</span><span class=\"mtk1\"> </span><span class=\"mtk8\">-eq</span><span class=\"mtk1\"> 0 ]; </span><span class=\"mtk10\">then</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\ttail -f /var/log/nginx/access.log /var/log/nginx/error.log</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">fi</span></span></span></code></pre>\n<p>이제 dockerfile로 정리하여서 서비스를 실행해 본다.!</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"50\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run --rm -it -p 443:443 -p 80:80 --name ft_server ft_server</span></span></span></code></pre>\n<p><code>https://localhost/wordpress</code> 로 접근을 해보면 아래와 같이 wordpress가 정상적으로 올라온 것을 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4UlEQVQ4y51U2Y7TQBDMZ/M98AN8BUirRQjxshFogQhwfHsOX3HsomvWHZx1sstiqTRXu7r6mNlUVQVjzArVPFrBm/db3Hz9hdY7XLWf9ze6IMqyXMwrIasQpTlevb3F63d36LxFsbBZQnk2uvDeo2ka1HUd5opG1mlpkBsb5sszgvbO/VUeCK21YTPLMrRti5d+XdetCbkgYZ7nIfSiKJCmKZIkQSxIZM5zgvsK/tv3ffjnjJBQMo4kpFqGxFQssdyjuosKmQ8SEfRM4sPhcAYqUZBkGIbrITvnYSWPavxYyVKdFo62Fwmds6HvMlH3P9+KkBNVNk1TCIU51KZlGoz0ZNeKwrm9qFA74mLITdMGQ34kjOPkVEnaZIUUy9bBseb0yRyq12AwdLiLP+PTjw/4eH+Lb+UWP02MqKpxHKd/C5mhngz6Dl++bxEXEfZZhCj/jdIU4abwApi5Kwj+R8JVH3oxrmbicRwlX5LPUdjFD8dJlI1ytnT8fFEEJCMeWunhSmpxOCeUVMcVoZdnicnf7XairA2yWNn9fh+uHsFzrumIDp8ktNag6Xq4tkfdDxiOx1BBvR1aUY7XQj7LoROvpW+wy0xAexhOCh5DU6LgHvtx9cCStJb8EPr6vARK+AfNd7kxtH5QvAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201193659307\"\n        title=\"image-20201201193659307\"\n        src=\"/static/2eb8927e4c4c653e73a6583be2bdc059/c1b63/image-20201201193659307.png\"\n        srcset=\"/static/2eb8927e4c4c653e73a6583be2bdc059/5a46d/image-20201201193659307.png 300w,\n/static/2eb8927e4c4c653e73a6583be2bdc059/0a47e/image-20201201193659307.png 600w,\n/static/2eb8927e4c4c653e73a6583be2bdc059/c1b63/image-20201201193659307.png 1200w,\n/static/2eb8927e4c4c653e73a6583be2bdc059/d61c2/image-20201201193659307.png 1800w,\n/static/2eb8927e4c4c653e73a6583be2bdc059/ec09f/image-20201201193659307.png 1916w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"🧑-phpmyadmin-설치-하기\" style=\"position:relative;\"><a href=\"#%F0%9F%A7%91-phpmyadmin-%EC%84%A4%EC%B9%98-%ED%95%98%EA%B8%B0\" aria-label=\"🧑 phpmyadmin 설치 하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧑‍💻 phpmyadmin 설치 하기!</h2>\n<p>이제 마지막으로 db관리를 위한 <code>phpmyadmin</code> 를 설치 해본다.</p>\n<p>Curl 명령어를 이용하여 일단 phpmyadmin를 다운 받는다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"dockerfile\" data-index=\"51\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">RUN</span><span class=\"mtk1\"> curl -O https://files.phpmyadmin.net/phpMyAdmin/5.0.4/phpMyAdmin-5.0.4-all-languages.tar.gz</span></span></span></code></pre>\n<p>그리고 이제 압축을 해제하고 생성된 폴더의 이름을 수정해준 후 <code>config.sample.inc.php</code> 를 이용하여 간단하게 설정을 해본다.</p>\n<p>여기서는 <code>blowfish_secret</code> 라는 cookie를 암호화 하게 되는 키를 만들어서 넣어주게 된다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"sh\" data-index=\"52\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">blowfish_secret=</span><span class=\"mtk6\">$(cat /dev/urandom </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> tr -dc &#39;a-zA-Z0-9!@#\\%+=&#39; </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> fold -w 64 </span><span class=\"mtk1\">|</span><span class=\"mtk6\"> sed 1q)</span><span class=\"mtk1\">; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tsed -i </span><span class=\"mtk6\">&quot;s@&#39;&#39;; /\\* YOU MUST FILL IN THIS FOR COOKIE AUTH! \\*/@&#39;</span><span class=\"mtk4\">$blowfish_secret</span><span class=\"mtk6\">&#39;;@g&quot;</span><span class=\"mtk1\"> /var/www/html/phpmyadmin/config.inc.php; \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">unset</span><span class=\"mtk1\"> blowfish_secret;</span></span></span></code></pre>\n<p>그리고 마지막으로 현재 <code>/var/www/html</code> 이 <code>root</code> 소유자로 등록이 되어 있어서 <code>phpmyadmin</code> 에서 temp directory를 생성을 못한는 이슈가 있기 때문에 권한을 <code>www-data:www-data</code> 로 수정을 해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1116px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQ4y51U226jMBDl/z9lnyvt40qV+tzupo0gaQi3AuUSbglgIJzOuHVENiR7GelosBmfOZ6xreE3G8fx5BVohL7vMR6PZzFzpt0iU9YPI7K8hB+843gl5kQ4r+jTWjEQW4303YFpLLBaPqKt9zdValN1U8Isr/D0EiBdPyBbfEP8fIdk+R2iCNAfR15wsYa9Nid9GAYYqxUMw4C5tWCaJrbkfy2esV6/Yrfb4VrtTwq7rkOSJMiyDHEcI01TNE0jyXuC9NQYxvA1VjhTqAirqoJt2xK6rmOz2SAMQ0nMiRj8zerYK+R5Pk/IahzHged58H1fBrdti7quJfi/IldkakezhLy4KEvs93uplsHfU/BcURQnsDqeu2iKGrCKum5kPf/VLprCCixrC9N+gxdElD1DSYpZifKsaAqe43WzWz4cDrJ2y+ULEVuy+KoZQRBIr4hVEq7j1RrydqMokmfPdV0ZKAtP4G7zmJvDiT9Ry7mbTQkCnw6wSdkLCtwhl8jQdwIDnb+OvEJPda5Y8bVjU1ZUQ9eH5flw/BDuFPQocF2neAsjOK6HMIrnCZOswKNO12vt4OfKPsMTw5h4woLiftw/QH/dnr0F2vT+Nq2grf8FhJCxQnQQtPU/Pg7/Y4rjA0iqcAXSXURRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20201201194547831\"\n        title=\"image-20201201194547831\"\n        src=\"/static/1aea308733faa51a3b00be2ec1b4dc0b/ea64c/image-20201201194547831.png\"\n        srcset=\"/static/1aea308733faa51a3b00be2ec1b4dc0b/5a46d/image-20201201194547831.png 300w,\n/static/1aea308733faa51a3b00be2ec1b4dc0b/0a47e/image-20201201194547831.png 600w,\n/static/1aea308733faa51a3b00be2ec1b4dc0b/ea64c/image-20201201194547831.png 1116w\"\n        sizes=\"(max-width: 1116px) 100vw, 1116px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이제 접근을 하게 되면 위에서 만들었던 계정을 통해서 로그인이 가능 한 모습을 볼 수 있다.</p>\n<hr>\n<blockquote>\n<p><code>42Seoul</code> 에서 진행한 <strong>ft_server</strong> 프로젝트를 정리한 글 입니다.\n여기서 진행된 Dockerfile과 src 파일은 아래의 github에서 확인 할 수 있습니다.!</p>\n<p><a href=\"https://github.com/JaeSeoKim/42cursus/tree/master/02_ft_server\">jaeseokim/42cursus/02<em>ft</em>server</a></p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk10 { color: #C678DD; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-docker%EB%9E%80\">🐳 Docker란!</a></p>\n<ul>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-docker-image\">💿 Docker Image</a></li>\n<li>\n<p><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-dockerfile\">🗂 Dockerfile</a></p>\n<ul>\n<li>\n<p><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#dockerfile-%EC%9E%91%EC%84%B1-%EB%AC%B8%EB%B2%95\">📝Dockerfile 작성 문법!</a></p>\n<ul>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-from\">📋 FROM</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-run\">📋 RUN</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-copy\">📋 COPY</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-add\">📋 ADD</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-env\">📋 ENV</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-workdir\">📋 WORKDIR</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-user\">📋 USER</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-run-1\">📋 RUN</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-arg\">📋 ARG</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-expose\">📋 EXPOSE</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-cmd-entrypoint\">📋 CMD, ENTRYPOINT</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-volume\">📋 VOLUME</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-onbuild\">📋 ONBUILD</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-stopsignal\">📋 STOPSIGNAL</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-healthcheck\">📋 HEALTHCHECK</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-label\">📋 LABEL</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-docker-%EB%AA%85%EB%A0%B9%EC%96%B4\">🖥 docker 명령어</a></p>\n<ul>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#%EF%B8%8F-build\">⚙️ build</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#%E2%99%82%EF%B8%8F-run\">🏃🏻‍♂️ run</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-stop\">✋ stop</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-start\">🎬 start</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#%EF%B8%8F-attach\">⚓️ attach</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-exec\">📡 exec</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-ps\">🗂 ps</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-images\">📀 images</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-inspect\">🖨 inspect</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-rm\">🗑 rm</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-rmi\">✨ rmi</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-commit\">🛎 commit</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-docker%EB%A5%BC-wordpress-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84\">🐳 Docker를 Wordpress 서비스 직접 구현!</a></p>\n<ul>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-ssl-%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0\">🔐 SSL 설정 하기!</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-%EB%B9%84%ED%99%9C%EC%84%B1%ED%99%94%EA%B0%80-%EA%B0%80%EB%8A%A5%ED%95%9C-autoindex-%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80\">🗂 비활성화가 가능한 autoindex 기능 추가!</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-mysqldbmaria-db-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0\">📦 mysqlDB(maria DB) 설치 및 설정 하기!</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#-wordpress-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">📚 wordpress 서비스 설치 및 설정하기!</a></li>\n<li><a href=\"/Etc/docker%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-wordpress%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84%EA%B9%8C%EC%A7%80/#%F0%9F%A7%91-phpmyadmin-%EC%84%A4%EC%B9%98-%ED%95%98%EA%B8%B0\">🧑‍💻 phpmyadmin 설치 하기!</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"2020년 12월 01일","title":"🐳 Docker 기초 부터 Wordpress 서비스 직접 구현 까지!","tags":["docker","ft_server","42seoul"]}}},"pageContext":{"slug":"/Etc/docker기초부터-wordpress서비스-직접구현까지/","previous":{"fields":{"slug":"/C/42Seoul-ft_printf-프로젝트-기록/"},"frontmatter":{"title":"[42Seoul] ft_printf 프로젝트 기록."}},"next":null}},"staticQueryHashes":["1081905842","63159454"]}