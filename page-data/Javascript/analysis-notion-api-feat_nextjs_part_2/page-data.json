{"componentChunkName":"component---src-templates-blog-post-js","path":"/Javascript/analysis-notion-api-feat_nextjs_part_2/","result":{"data":{"site":{"siteMetadata":{"author":"JaeSeoKim","comment":{"utterances":"JaeSeoKim/jaeseokim.github.io"},"sponsor":{"buyMeACoffeeId":"jaeseokim"}}},"markdownRemark":{"excerpt":"âœï¸ ì´ì „ 1í¸ ì½ìœ¼ëŸ¬ ê°€ê¸°! í•˜ìœ„ Notion Block ë¶ˆëŸ¬ì˜¤ê¸°! ì €ë²ˆì— ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ë‘” Block Rendering ë¶€ë¶„ì—ì„œ Child Component ë¥¼ Rendering í•˜ëŠ” ë¶€ë¶„ì€ ì½”ë“œ ìƒìœ¼ë¡œ ì¡´ì¬í•˜ì§€ë§Œ notion ì˜ ì‘ë‹µì´ ì‹¤ì œ typedef ëœ ë¶€ë¶„ê³¼ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì•„ë˜ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì¬ê·€ë¥¼ ëŒë ¤ í•˜ìœ„ child blocks ëª¨ë‘ ë¶ˆâ€¦","html":"<p><a href=\"/Javascript/analysis-notion-api-feat_nextjs_part_1/\">âœï¸ ì´ì „ 1í¸ ì½ìœ¼ëŸ¬ ê°€ê¸°!</a></p>\n<h3 id=\"í•˜ìœ„-notion-block-ë¶ˆëŸ¬ì˜¤ê¸°\" style=\"position:relative;\"><a href=\"#%ED%95%98%EC%9C%84-notion-block-%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0\" aria-label=\"í•˜ìœ„ notion block ë¶ˆëŸ¬ì˜¤ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•˜ìœ„ Notion Block ë¶ˆëŸ¬ì˜¤ê¸°!</h3>\n<p>ì €ë²ˆì— ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ë‘” <code>Block Rendering</code> ë¶€ë¶„ì—ì„œ <code>Child Component</code> ë¥¼ Rendering í•˜ëŠ” ë¶€ë¶„ì€ ì½”ë“œ ìƒìœ¼ë¡œ ì¡´ì¬í•˜ì§€ë§Œ <code>notion</code> ì˜ ì‘ë‹µì´ ì‹¤ì œ <code>typedef</code> ëœ ë¶€ë¶„ê³¼ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì•„ë˜ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì¬ê·€ë¥¼ ëŒë ¤ í•˜ìœ„ <code>child blocks</code> ëª¨ë‘ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>typescriptì˜ type ë•Œë¬¸ì— ì½”ë“œê°€ ì¡°ê¸ˆ ê¸¸ê²Œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. (ê°œì„  í•˜ì‹œëŠ” ë°©ë²•ì„ ì•„ì‹œëŠ” ë¶„ì€ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì„¸ìš”!)</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"ts\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">blocks</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Block</span><span class=\"mtk1\">[]) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Promise</span><span class=\"mtk1\">.</span><span class=\"mtk3\">all</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">blocks</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">(</span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">block</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlockWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">block</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlockWithChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">block</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Block</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk4\">has_children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">true</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocks</span><span class=\"mtk1\">(</span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk4\">type</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;paragraph&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">paragraph</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;undefined&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">paragraph</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;bulleted_list_item&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">bulleted_list_item</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;undefined&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">bulleted_list_item</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">children</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;numbered_list_item&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">numbered_list_item</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;undefined&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">numbered_list_item</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">children</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;to_do&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">to_do</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;undefined&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">to_do</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;toggle&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">toggle</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;undefined&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk11\">toggle</span><span class=\"mtk1\">.</span><span class=\"mtk4\">children</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ì´ì œ <code>next.js</code> ì˜ <code>getStaticProps</code> ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•¨ìœ¼ë¡œ í•˜ìœ„ Block ëª¨ë‘ë¥¼ ê°€ì§€ê³  ì˜¨ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getStaticProps</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">_ctx</span><span class=\"mtk1\">: </span><span class=\"mtk11\">GetStaticPropsContext</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk4\">process</span><span class=\"mtk1\">.</span><span class=\"mtk7\">env</span><span class=\"mtk1\">.</span><span class=\"mtk4\">NOTION_INDEX_PAGE</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;string&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk10\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Error</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Missing NOTION_INDEX_PAGE environment variable&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">page</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getPage</span><span class=\"mtk1\">(</span><span class=\"mtk4\">process</span><span class=\"mtk1\">.</span><span class=\"mtk7\">env</span><span class=\"mtk1\">.</span><span class=\"mtk4\">NOTION_INDEX_PAGE</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">blocks</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocks</span><span class=\"mtk1\">(</span><span class=\"mtk4\">process</span><span class=\"mtk1\">.</span><span class=\"mtk7\">env</span><span class=\"mtk1\">.</span><span class=\"mtk4\">NOTION_INDEX_PAGE</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">blocksWithAllChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">props</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">page</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">: </span><span class=\"mtk4\">blocksWithAllChildren</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">revalidate</span><span class=\"mtk1\">: </span><span class=\"mtk7\">64</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3 id=\"nextjs-pages-api-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#nextjs-pages-api-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"nextjs pages api ë§Œë“¤ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js pages API ë§Œë“¤ê¸°!</h3>\n<p>ì´ì „ì— <code>Notion mention</code> ì—ì„œ <code>page.id</code>, <code>database.id</code> ë§Œì„ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ ì´ ë•Œ í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” APIë¥¼ ì‘ì„± í–ˆìŠµë‹ˆë‹¤.</p>\n<p><code>end-point</code> ë¥¼ ì‹¤ì œ notionê³¼ ìœ ì‚¬í•˜ê²Œ ì„¤ì •ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"ts\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// pages/api/pages/[page_id].ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">APIErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">ClientErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">isNotionClientError</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">Page</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4\">NextApiResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">getPage</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../lib/notion&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">GetPagesResData</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">error</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">page</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Page</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">code</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">ClientErrorCode</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">APIErrorCode</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GetPagesResData</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">page_id</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">query</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">page</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getPage</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk4\">page_id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;string&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">page_id</span><span class=\"mtk1\"> </span><span class=\"mtk10\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">page_id</span><span class=\"mtk1\">[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">200</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">page</span><span class=\"mtk1\">: </span><span class=\"mtk4\">page</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk10\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">: </span><span class=\"mtk11\">unknown</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk3\">isNotionClientError</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">500</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">page</span><span class=\"mtk1\">: </span><span class=\"mtk7\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">error</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">message</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">code</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">code</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">else</span><span class=\"mtk1\"> </span><span class=\"mtk10\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">handler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">method</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;GET&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\">(</span><span class=\"mtk4\">req</span><span class=\"mtk1\">, </span><span class=\"mtk4\">res</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">default</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">handler</span></span></span></code></pre>\n<p>ì´ì œ <code>metion</code> ë¶€ë¶„ì—ì„œ <code>swr</code> ë¥¼ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ <code>fetch</code> í•˜ê³  ë°›ì•„ì˜¤ëŠ” ë¡œì§ì„ ì¶”ê°€ í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">PageMention</span><span class=\"mtk1\"> </span><span class=\"mtk10\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">PageMentionType</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next/link&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">classes</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/classes&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">useRequest</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/hooks/useRequest&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">getTitleFromPage</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/notion&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">GetPagesResData</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../pages/api/pages/[page_id]&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk11\">PageMentionProps</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">mention</span><span class=\"mtk1\">: </span><span class=\"mtk11\">PageMentionType</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">className</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">PageMention</span><span class=\"mtk1\">: </span><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk11\">FC</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">PageMentionProps</span><span class=\"mtk1\">&gt; </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ </span><span class=\"mtk4 mtki\">mention</span><span class=\"mtk1\">, </span><span class=\"mtk4 mtki\">className</span><span class=\"mtk1\"> }) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">page</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">mention</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">data</span><span class=\"mtk1\">, </span><span class=\"mtk11\">error</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRequest</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GetPagesResData</span><span class=\"mtk1\">&gt;({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">url</span><span class=\"mtk1\">: </span><span class=\"mtk6\">`/api/pages/</span><span class=\"mtk10\">${</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">error</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk11\">data</span><span class=\"mtk1\">?.</span><span class=\"mtk4\">page</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk11\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">href</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`/pages/</span><span class=\"mtk10\">${</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;requests fail: </span><span class=\"mtk10\">{</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk11\">Link</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">data</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk11\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">href</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`/pages/</span><span class=\"mtk10\">${</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">title</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`loading-page-</span><span class=\"mtk10\">${</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          Loading ğŸ“¡</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk11\">Link</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">title</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getTitleFromPage</span><span class=\"mtk1\">(</span><span class=\"mtk11\">data</span><span class=\"mtk1\">.</span><span class=\"mtk4\">page</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk11\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">href</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`/pages/</span><span class=\"mtk10\">${</span><span class=\"mtk11\">page</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">title</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk4\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk11\">Link</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">PageMention</span></span></span></code></pre>\n<p>ì´ë•Œ <code>next/link</code> ë¥¼ ì´ìš©í•˜ì—¬ <code>/pages/[page_id]</code> ë¡œ ì´ë™í•˜ë„ë¡ ë§Œë“¤ì–´ ë‘ì—ˆëŠ”ë° í•´ë‹¹ pageë¥¼ ë§Œë“¤ì–´ ë´…ë‹ˆë‹¤.</p>\n<h3 id=\"nextjs-getstaticpaths-fallbackë¥¼-ì´ìš©í•œ-notion-pages-rendering\" style=\"position:relative;\"><a href=\"#nextjs-getstaticpaths-fallback%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-notion-pages-rendering\" aria-label=\"nextjs getstaticpaths fallbackë¥¼ ì´ìš©í•œ notion pages rendering permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js getStaticPaths fallbackë¥¼ ì´ìš©í•œ notion pages rendering</h3>\n<p><code>next.js</code> ì—ì„œ ì œê³µí•˜ëŠ” ê°•ë ¥í•œ ê¸°ëŠ¥ì¤‘ í•˜ë‚˜ì¸ <code>getStaticPaths</code> <code>fallback: true</code> ì˜µì…˜ì„ í†µí•´ì„œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ <code>SSG</code> ë¥¼ ì‘ë™í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">GetStaticPropsContext</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">Head</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next/head&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useRouter</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next/router&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">Block</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../components/notion/Block&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">Block</span><span class=\"mtk1\"> </span><span class=\"mtk10\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">BlockType</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">PagesRetrieveResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-endpoints&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">classes</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../lib/classes&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">getBlocks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">getBlocksWithChildren</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">getPage</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">getTitleFromPage</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../lib/notion&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">Loading</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../components/Loding&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getStaticPaths</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> () </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">paths</span><span class=\"mtk1\">: [], </span><span class=\"mtk4\">fallback</span><span class=\"mtk1\">: </span><span class=\"mtk7\">true</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getStaticProps</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">ctx</span><span class=\"mtk1\">: </span><span class=\"mtk11\">GetStaticPropsContext</span><span class=\"mtk1\">&lt;{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">page_id</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">page_id</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ctx</span><span class=\"mtk1\">.</span><span class=\"mtk4\">params</span><span class=\"mtk8\">!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">page</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getPage</span><span class=\"mtk1\">(</span><span class=\"mtk4\">page_id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">blocks</span><span class=\"mtk1\">, </span><span class=\"mtk11\">next_cursor</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocks</span><span class=\"mtk1\">(</span><span class=\"mtk4\">page_id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">blocksWithAllChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getBlocksWithChildren</span><span class=\"mtk1\">(</span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">props</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">page</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">: </span><span class=\"mtk4\">blocksWithAllChildren</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">revalidate</span><span class=\"mtk1\">: </span><span class=\"mtk7\">64</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk10\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">error</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">notFound</span><span class=\"mtk1\">: </span><span class=\"mtk7\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">PageByIdPage</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">page</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">page</span><span class=\"mtk1\">: </span><span class=\"mtk11\">PagesRetrieveResponse</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">blocks</span><span class=\"mtk1\">: </span><span class=\"mtk11\">BlockType</span><span class=\"mtk1\">[]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">isFallback</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">isFallback</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk11\">Loading</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">&quot;container&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">&quot;min-w-screen-md&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">&quot;min-h-screen&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">&quot;mx-auto&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk6\">&quot;w-8&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ])</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">title</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getTitleFromPage</span><span class=\"mtk1\">(</span><span class=\"mtk4\">page</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk4\">div</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk6\">&quot;container&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;max-w-screen-md&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;mx-auto&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;px-2&quot;</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk11\">Head</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk4\">title</span><span class=\"mtk1\">&gt;</span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk11\">Head</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk4\">article</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk4\">h1</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk6\">&quot;text-4xl&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;py-3&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;font-bold&quot;</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk4\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk4\">hr</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">{</span><span class=\"mtk11\">blocks</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">block</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk11\">Block</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">key</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`</span><span class=\"mtk10\">${</span><span class=\"mtk11\">block</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">-</span><span class=\"mtk10\">${new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Date</span><span class=\"mtk1\">()</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">value</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk4\">block</span><span class=\"mtk10\">}</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ))</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk4\">article</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">PageByIdPage</span></span></span></code></pre>\n<p><code>next/router</code> ì˜ <code>useRouter</code> hookë¥¼ ì´ìš©í•˜ì—¬ <code>isFallback</code> ì— ëŒ€í•œ ê²½ìš°ë¥¼ ì²´í¬ë¥¼ í•˜ì—¬ Loadingë¥¼ í•˜ë„ë¡ ì²˜ë¦¬ë¥¼ í•´ë‘ê³  ë§Œì•½ <code>getStaticProps</code> ì—ì„œ <code>notFound</code> ê°€ trueë¡œ ì‘ë‹µì´ ì˜¤ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ 404ë¡œ ì—°ê²°ì´ ë©ë‹ˆë‹¤.</p>\n<p>ì´ë°©ë²•ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ <code>getServerSideProps</code> ì™€ ê°™ì€ ì‘ì—…ì€ ë¬´ì¡°ê±´ ë§¤ìš”ì²­ë§ˆë‹¤ <code>SSR</code> ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ë§Œ ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ì—†ì—ˆë˜ ìš”ì²­ì´ë©´ <code>SSG</code> ì‘ì—…ì„ ê±°ì¹˜ê³  ì‘ë‹µì„ í•´ì£¼ê³  ì•„ë‹ˆë¼ë©´ ë¯¸ë¦¬ ì‚¬ì „ì— ë Œë”ë§ ëœ HTMLì„ ì‘ë‹µí•˜ì—¬ ë¹ ë¥¸ ì†ë„ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p><img src=\"/8ef26b1ff2ca5bc4075fb6449a5a3ce8/getStaticPath-fallback.gif\" alt=\"getStaticPaths fallback\"></p>\n<p>ì‹¤ì œë¡œ <code>vercel</code> ë¥¼ í†µí•´ deploy í•œ ê²°ê³¼ë¬¼ì˜ ë™ì‘ì€ ì§€ì—°ì´ ì—†ì´ ë§¤ìš° ë¶€ë“œëŸ½ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>\n<h3 id=\"nextjs-databases-api-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#nextjs-databases-api-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"nextjs databases api ë§Œë“¤ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js databases API ë§Œë“¤ê¸°!</h3>\n<p>ì´ì œ <code>Database</code> ê´€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” APIë¥¼ ë§Œë“¤ì–´ ë´…ë‹ˆë‹¤!</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"ts\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// pages/api/databases/[database_id].ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">APIErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">ClientErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">isNotionClientError</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">Database</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4\">NextApiResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">getDatabase</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../lib/notion&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">GetDatabasesResData</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">error</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">database</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Database</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">code</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">ClientErrorCode</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">APIErrorCode</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GetDatabasesResData</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">database_id</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">query</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">database</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getDatabase</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk4\">database_id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;string&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">database_id</span><span class=\"mtk1\"> </span><span class=\"mtk10\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">database_id</span><span class=\"mtk1\">[</span><span class=\"mtk7\">0</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">200</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">database</span><span class=\"mtk1\">: </span><span class=\"mtk4\">database</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk10\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">: </span><span class=\"mtk11\">unknown</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk3\">isNotionClientError</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">500</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">database</span><span class=\"mtk1\">: </span><span class=\"mtk7\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">error</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">message</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">code</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">code</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">else</span><span class=\"mtk1\"> </span><span class=\"mtk10\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">handler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">method</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;GET&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\">(</span><span class=\"mtk4\">req</span><span class=\"mtk1\">, </span><span class=\"mtk4\">res</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">default</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">handler</span></span></span></code></pre>\n<p>ìœ„ì™€ ê°™ì´ APIë¥¼ êµ¬í˜„í•˜ì˜€ìœ¼ë‹ˆ <code>PageMention</code> ê³¼ ë™ì¼í•˜ê²Œ <code>DatabaseMention</code> ë„ APIì™€ ì—°ê²° í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">DatabaseMention</span><span class=\"mtk1\"> </span><span class=\"mtk10\">as</span><span class=\"mtk1\"> </span><span class=\"mtk4\">DatabaseMentionType</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">classes</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/classes&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">useRequest</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/hooks/useRequest&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">GetDatabasesResData</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../pages/api/databases/[database_id]&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk11\">DatabaseMentionProps</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">mention</span><span class=\"mtk1\">: </span><span class=\"mtk11\">DatabaseMentionType</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">className</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">DatabaseMention</span><span class=\"mtk1\">: </span><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk11\">FC</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">DatabaseMentionProps</span><span class=\"mtk1\">&gt; </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">mention</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">className</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">database</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">mention</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">data</span><span class=\"mtk1\">, </span><span class=\"mtk11\">error</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRequest</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GetDatabasesResData</span><span class=\"mtk1\">&gt;({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">url</span><span class=\"mtk1\">: </span><span class=\"mtk6\">`/api/databases/</span><span class=\"mtk10\">${</span><span class=\"mtk11\">database</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">error</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk11\">data</span><span class=\"mtk1\">?.</span><span class=\"mtk4\">database</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;requests fail: </span><span class=\"mtk10\">{</span><span class=\"mtk11\">database</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">data</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk4\">span</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7 mtki\">title</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk6\">`loading-database-</span><span class=\"mtk10\">${</span><span class=\"mtk11\">database</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk10\">}</span><span class=\"mtk6\">`</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        Loading ğŸ“¡</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">title</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">data</span><span class=\"mtk1\">.</span><span class=\"mtk11\">database</span><span class=\"mtk1\">.</span><span class=\"mtk11\">title</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">value</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">value</span><span class=\"mtk1\">.</span><span class=\"mtk4\">plain_text</span><span class=\"mtk1\">).</span><span class=\"mtk3\">join</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">className</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk3\">classes</span><span class=\"mtk1\">([</span><span class=\"mtk4\">className</span><span class=\"mtk1\">])</span><span class=\"mtk10\">}</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtki\">title</span><span class=\"mtk8\">=</span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">{</span><span class=\"mtk4\">title</span><span class=\"mtk10\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">DatabaseMention</span></span></span></code></pre>\n<p>ê·¸ë¦¬ê³  í•´ë‹¹ <code>Database</code> ì— ëŒ€í•œ ì¢…ì† <code>pages</code> ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” APIë„ ì‘ì„±ì„ í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"ts\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// pages/api/databases/[database_id]/pages.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">APIErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">ClientErrorCode</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">isNotionClientError</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">Page</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@notionhq/client/build/src/api-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4\">NextApiResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;next&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">getDatabasePages</span><span class=\"mtk1\"> } </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;../../../../lib/notion&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">GetDatabasesPagesResData</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">error</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">pages</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">[] | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">code</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">ClientErrorCode</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">APIErrorCode</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">next_cursor</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">GetDatabasesPagesReqData</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">database_id</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">start_cursor</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">page_size</span><span class=\"mtk10\">?</span><span class=\"mtk1\">: </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GetDatabasesPagesResData</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">database_id</span><span class=\"mtk1\">, </span><span class=\"mtk11\">start_cursor</span><span class=\"mtk1\">, </span><span class=\"mtk11\">page_size</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">query</span><span class=\"mtk1\"> </span><span class=\"mtk10\">as</span><span class=\"mtk1\"> </span><span class=\"mtk11\">unknown</span><span class=\"mtk1\"> </span><span class=\"mtk10\">as</span><span class=\"mtk1\"> </span><span class=\"mtk11\">GetDatabasesPagesReqData</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk11\">pages</span><span class=\"mtk1\">, </span><span class=\"mtk11\">next_cursor</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getDatabasePages</span><span class=\"mtk1\">(</span><span class=\"mtk4\">database_id</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">start_cursor</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">page_size</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk4\">page_size</span><span class=\"mtk1\">) </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk7\">50</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">200</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">pages</span><span class=\"mtk1\">: </span><span class=\"mtk4\">pages</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">next_cursor</span><span class=\"mtk1\">: </span><span class=\"mtk4\">next_cursor</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk10\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">: </span><span class=\"mtk11\">unknown</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk3\">isNotionClientError</span><span class=\"mtk1\">(</span><span class=\"mtk4\">e</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">res</span><span class=\"mtk1\">.</span><span class=\"mtk3\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">500</span><span class=\"mtk1\">).</span><span class=\"mtk3\">json</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">pages</span><span class=\"mtk1\">: </span><span class=\"mtk7\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">next_cursor</span><span class=\"mtk1\">: </span><span class=\"mtk7\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">error</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">message</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">code</span><span class=\"mtk1\">: </span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">code</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">else</span><span class=\"mtk1\"> </span><span class=\"mtk10\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">handler</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">req</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk4 mtki\">res</span><span class=\"mtk1\">: </span><span class=\"mtk11\">NextApiResponse</span><span class=\"mtk1\">) </span><span class=\"mtk10\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">req</span><span class=\"mtk1\">.</span><span class=\"mtk4\">method</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">case</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;GET&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getHandler</span><span class=\"mtk1\">(</span><span class=\"mtk4\">req</span><span class=\"mtk1\">, </span><span class=\"mtk4\">res</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">default</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">break</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">handler</span></span></span></code></pre>\n<p>ì´ì œ <code>Database</code> ë¶€ë¶„ì„ ê°€ì§€ê³  ë Œë”ë§ í•˜ëŠ” ë¶€ë¶„ì€ ë‹¤ìŒí¸ì— ì´ì–´ì„œ ì‘ì„±ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>ëª‡ì¼ì— ê±¸ì³ì„œ <code>Notion-api</code> ë¥¼ ì§ì ‘ ì‚¬ìš©í•´ë³´ë‹ˆ ì—¬ëŸ¬ê°€ì§€ ì‚¬ìš©í•˜ê¸° í¸í•œ ë¶€ë¶„ë“¤ì´ ë§ì´ ìˆì–´ì„œ ì‹ ê¸° í–ˆê³  Betaê°€ ëë‚˜ë©´ <code>oopy.io</code>, <code>super.so</code> ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ ì‰½ê²Œ ë‚˜ë§Œì˜ <code>Notion Site</code> ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ˜¸ Github Repo : <a href=\"https://github.com/JaeSeoKim/nextjs-notion-api-example\">https://github.com/JaeSeoKim/nextjs-notion-api-example</a></p>\n<p>Original Notion Page: <a href=\"https://www.notion.so/Notion-API-Next-js-INDEX-PAGE-13cb8d2d3328425e815a1896267f5906\">https://www.notion.so/Notion-API-Next-js-INDEX-PAGE-13cb8d2d3328425e815a1896267f5906</a></p>\n<p>Demo Site : <a href=\"https://nextjs-notion-api.vercel.app/\">https://nextjs-notion-api.vercel.app/</a></p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk10 { color: #C678DD; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/Javascript/analysis-notion-api-feat_nextjs_part_2/#%ED%95%98%EC%9C%84-notion-block-%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0\">í•˜ìœ„ Notion Block ë¶ˆëŸ¬ì˜¤ê¸°!</a></li>\n<li><a href=\"/Javascript/analysis-notion-api-feat_nextjs_part_2/#nextjs-pages-api-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Next.js pages API ë§Œë“¤ê¸°!</a></li>\n<li><a href=\"/Javascript/analysis-notion-api-feat_nextjs_part_2/#nextjs-getstaticpaths-fallback%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-notion-pages-rendering\">Next.js getStaticPaths fallbackë¥¼ ì´ìš©í•œ notion pages rendering</a></li>\n<li><a href=\"/Javascript/analysis-notion-api-feat_nextjs_part_2/#nextjs-databases-api-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Next.js databases API ë§Œë“¤ê¸°!</a></li>\n</ul>","frontmatter":{"date":"2021ë…„ 07ì›” 26ì¼","title":"Notion API ë¶„ì„í•´ë³´ê¸°!(feat. Next.js)(2)","tags":["notion","notion-api","next.js"]}}},"pageContext":{"slug":"/Javascript/analysis-notion-api-feat_nextjs_part_2/","previous":{"fields":{"slug":"/Javascript/analysis-notion-api-feat_nextjs_part_1/"},"frontmatter":{"title":"Notion API ë¶„ì„í•´ë³´ê¸°!(feat. Next.js)(1)"}},"next":null}},"staticQueryHashes":["1081905842","63159454"]}