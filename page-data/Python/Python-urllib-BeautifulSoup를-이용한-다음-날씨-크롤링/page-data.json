{"componentChunkName":"component---src-templates-blog-post-js","path":"/Python/Python-urllib-BeautifulSoup를-이용한-다음-날씨-크롤링/","result":{"data":{"site":{"siteMetadata":{"author":"JaeSeoKim","comment":{"utterances":"JaeSeoKim/jaeseokim.github.io"},"sponsor":{"buyMeACoffeeId":"jaeseokim"}}},"markdownRemark":{"excerpt":"평소 requests에만 너무 의존을 하는 것 같아 한번 urllib라는 python 기본 제공 라이브러리를 이용해서 크롤링 스크립트를 만들었습니다. 크롤링 대상은 다음 홈페이지의 메인 포털 상단 오른쪽의 지역별 날씨 항목을 가져와 크롤링 했습니다.  아래의 코드에 주석을 달아 두었으니 한번 보시면서 이해하시면 될것 같습니다. 후기... requests …","html":"<p>평소 requests에만 너무 의존을 하는 것 같아 한번 urllib라는 python 기본 제공 라이브러리를 이용해서 크롤링 스크립트를 만들었습니다.</p>\n<p>크롤링 대상은 다음 홈페이지의 메인 포털 상단 오른쪽의 지역별 날씨 항목을 가져와 크롤링 했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 667px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjElEQVQ4y5VU2W7bQAzU//9If6ToU4uiD0UdH5Iv2bpvrW5Nh7QcJ20CJAYorne5w+G11jDNEBknYJwBLlXPMz946I/+rJ5AAyVvZmSUqJoRUCbFmfFJPFiF6dAQteyAop1VEjMR8MHwlby190KsOI7RtO2CT2bThGHo3wz1JejN+iHPDN+j/h6D5RCT52M6u5gvV0zuRddT18E6nU5I0xTr9RphGMJ1XXie96ogd10UBXzaXGwb4ddvuKxW8P6sEOx2yH/+wuz7sJqmQcuQJexhGNDRi4is+75fNP+PI/VyzjuNs0ez3aF8WsPsbF33VfUIeeQFQ0PJoYiwEkdVVXN/RJlnqMtUHQsJ1S0L2vUoadPS+ZLDWzgjWZRFjmkcyGpcAMmmNciSFX5vzzif9kiTBDlDz8uKTmIYY6gLtHSiVe7HW+/FNeBXzFPzKErb9jTMEF+/wAkLeGGKNAqQESAnqyL1YOpKIxNgZfj9Cvw4GgRRwh4E2uHWCPJtaBSGEQICScgVc+QHAQJKWZYsZqYFvF6veqaAq72Hzf6EIk+eO+pW1VmLIvkqmIqqrpVFEkeoioz7LWruZVmGPM813wrong7YbddkEep0zC/mWACllUSPHHbJb9VNSM2tYE1j1KEAS/UVcL8/YLvdIIwIOL3uOzF2HEe1dMHIFsrqHlE5KIiEKaFLf4rNAriHbe+0uf9tZOnBjHmSs6pizhLqsoB7OmqoIkHACGh3v2cdDgcFNIuHew/eQ7Y5FefzGY7tYP201iLJdB15b7PZaFHu4SqgHOw4OkmS/DfPgwAyZDkTKdguF46m5FXYSV7vz8Tza3M4Hgm4gc85NKbRlpAKfuRxbZdp6QZ5oG/gfwHLv3QL3Iar/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"yBsICk9sLAdYA9F8YqzRT1img\"\n        title=\"yBsICk9sLAdYA9F8YqzRT1img\"\n        src=\"/static/94870534b7598a225091036613d24d36/295bd/yBsICk9sLAdYA9F8YqzRT1img.png\"\n        srcset=\"/static/94870534b7598a225091036613d24d36/5a46d/yBsICk9sLAdYA9F8YqzRT1img.png 300w,\n/static/94870534b7598a225091036613d24d36/0a47e/yBsICk9sLAdYA9F8YqzRT1img.png 600w,\n/static/94870534b7598a225091036613d24d36/295bd/yBsICk9sLAdYA9F8YqzRT1img.png 667w\"\n        sizes=\"(max-width: 667px) 100vw, 667px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>아래의 코드에 주석을 달아 두었으니 한번 보시면서 이해하시면 될것 같습니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"python\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">from</span><span class=\"mtk1\"> urllib </span><span class=\"mtk10 mtki\">import</span><span class=\"mtk1\"> request, parse, error</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">from</span><span class=\"mtk1\"> bs4 </span><span class=\"mtk10 mtki\">import</span><span class=\"mtk1\"> BeautifulSoup</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">url </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;https://www.daum.net/&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki\">#url 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">response </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki\">#전역 변수 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">try</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    response </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> request.</span><span class=\"mtk3\">urlopen</span><span class=\"mtk1\">(url) </span><span class=\"mtk5 mtki\">#request로 url에 대한 응답값 가져옴</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">except</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">print</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;URL 오류&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk5 mtki\">#try문을 이용하여 response를 못받아오면 안내 메세지 출력후 종료</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">exit</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">soup </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">BeautifulSoup</span><span class=\"mtk1\">(response.</span><span class=\"mtk3\">read</span><span class=\"mtk1\">(), </span><span class=\"mtk6\">&#39;html.parser&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#응답값을 BeautifulSoup으로 soup에 담음</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">info_today </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> soup.</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;div&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;info_today&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#soup의 내용중 필요한 div info_today만 가져옴</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">date_today </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> info_today.</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;strong&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;date_today&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#info_today의 내용중 현재 날짜에 해당하는 data_today를 가져옴</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">list_weather </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> info_today.</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;ul&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;list_weather&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#info_today의 내용중 list_weather항목을 추출</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">weather </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> list_weather.</span><span class=\"mtk3\">find_all</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;li&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#list_weather의 li 항목들을 분리하여 list에 저장</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">text_weather </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">dict</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">#dictionary 형태로 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">for</span><span class=\"mtk1\"> i </span><span class=\"mtk10\">in</span><span class=\"mtk1\"> </span><span class=\"mtk8\">range</span><span class=\"mtk1\">(</span><span class=\"mtk8\">len</span><span class=\"mtk1\">(weather)):</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#weater에서 하나씩 열어서 분리함</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    place </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> weather[i].</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;span&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;txt_part&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#지역에 대한 정보를 분리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    state </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> weather[i].</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;strong&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;ico_ws&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#날씨에 대한 정보를 분리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    temperature </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> weather[i].</span><span class=\"mtk3\">find</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;em&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk6\">&#39;class&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&#39;screen_out&#39;</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#온도에 대한 정보를 분리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    text_weather[place.text] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;지역 : </span><span class=\"mtk7\">{}</span><span class=\"mtk8\">\\n</span><span class=\"mtk6\">상태 : </span><span class=\"mtk7\">{}</span><span class=\"mtk8\">\\n</span><span class=\"mtk6\">온도 : </span><span class=\"mtk7\">{}</span><span class=\"mtk8\">\\n</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">.</span><span class=\"mtk3\">format</span><span class=\"mtk1\">(place.text, state.text, temperature.text)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#dictionary 형태로 저장</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">def</span><span class=\"mtk1\"> </span><span class=\"mtk3\">findWeather</span><span class=\"mtk1\">(</span><span class=\"mtk7 mtki\">place</span><span class=\"mtk1\">): </span><span class=\"mtk5 mtki\">#함수선언 매개변수를 받아 dictonary에서 검색해서 리턴해준다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10 mtki\">try</span><span class=\"mtk1\"> :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10 mtki\">return</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;날짜 : </span><span class=\"mtk7\">{}</span><span class=\"mtk8\">\\n</span><span class=\"mtk7\">{}</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">.</span><span class=\"mtk3\">format</span><span class=\"mtk1\">(date_today.text, text_weather[place])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10 mtki\">except</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">           </span><span class=\"mtk5 mtki\">#dictionary에 항목이 존재 안하면 출력</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10 mtki\">return</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;정상적인 도시를 입력하세요.&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10 mtki\">if</span><span class=\"mtk1\"> </span><span class=\"mtk4\">__name__</span><span class=\"mtk1\"> </span><span class=\"mtk8\">==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;__main__&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk5 mtki\">#메인 함수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    place </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">input</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;도시를 입력해주세요 : &quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#도시를 입력받는다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">print</span><span class=\"mtk1\">(</span><span class=\"mtk3\">findWeather</span><span class=\"mtk1\">(place.</span><span class=\"mtk3\">strip</span><span class=\"mtk1\">()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">#findWeather를 이용하여 리턴값을 출력</span></span></span></code></pre>\n<ul>\n<li>후기... requests 라이브러리 사용하는 이유가 있구나... urllib는 너무 불친절합니다..</li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk10 { color: #C678DD; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"","frontmatter":{"date":"2019년 11월 25일","title":"Python urllib, BeautifulSoup를 이용한 다음 날씨 크롤링!","tags":["Python","BeautifulSoup","urllib"]}}},"pageContext":{"slug":"/Python/Python-urllib-BeautifulSoup를-이용한-다음-날씨-크롤링/","previous":{"fields":{"slug":"/Python/Python-requests를-이용한-blind-injecthion-스크립트-제작-2편/"},"frontmatter":{"title":"Python requests를 이용한 blind injecthion 스크립트 제작 (2편)"}},"next":{"fields":{"slug":"/Writeup/X-MAS-CTF-2019-Lapland-Mission/"},"frontmatter":{"title":"X-MAS CTF 2019 : Lapland Mission"}}}},"staticQueryHashes":["1081905842","63159454"]}