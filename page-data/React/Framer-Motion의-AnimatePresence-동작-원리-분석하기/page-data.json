{"componentChunkName":"component---src-templates-blog-post-js","path":"/React/Framer-Motionì˜-AnimatePresence-ë™ì‘-ì›ë¦¬-ë¶„ì„í•˜ê¸°/","result":{"data":{"site":{"siteMetadata":{"author":"JaeSeoKim","comment":{"utterances":"JaeSeoKim/jaeseokim.github.io"},"sponsor":{"buyMeACoffeeId":"jaeseokim"}}},"markdownRemark":{"excerpt":"Framer Motionì˜ AnimatePresence ë™ì‘ ì›ë¦¬ ë¶„ì„í•˜ê¸°! Framer Motionì˜ AnimatePresence ë˜ëŠ” React Transition Groupë¥¼ ì‚¬ìš©í•´ë³¸ ê°œë°œìë¼ë©´ ê³µí†µì ìœ¼ë¡œ ë– ì˜¤ë¥´ê²Œ ë˜ëŠ” ì˜ë¬¸ì ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ UnMount ëœ Componentë¥¼ ìœ ì§€í•˜ë©° ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ì§€? ì´ ê¶ê¸ˆì¦ì„ í•´ê²°í•˜ê¸°â€¦","html":"<h1 id=\"framer-motionì˜-animatepresence-ë™ì‘-ì›ë¦¬-ë¶„ì„í•˜ê¸°\" style=\"position:relative;\"><a href=\"#framer-motion%EC%9D%98-animatepresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0\" aria-label=\"framer motionì˜ animatepresence ë™ì‘ ì›ë¦¬ ë¶„ì„í•˜ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Framer Motionì˜ AnimatePresence ë™ì‘ ì›ë¦¬ ë¶„ì„í•˜ê¸°!</h1>\n<p>Framer Motionì˜ <code>AnimatePresence</code> ë˜ëŠ” <code>React Transition Group</code>ë¥¼ ì‚¬ìš©í•´ë³¸ ê°œë°œìë¼ë©´ ê³µí†µì ìœ¼ë¡œ ë– ì˜¤ë¥´ê²Œ ë˜ëŠ” ì˜ë¬¸ì ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<h4 id=\"ì–´ë–»ê²Œ-unmount-ëœ-componentë¥¼-ìœ ì§€í•˜ë©°-ì• ë‹ˆë©”ì´ì…˜ì„-ë™ì‘ì‹œí‚¤ëŠ”-ê²ƒì´ì§€\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-unmount-%EB%90%9C-component%EB%A5%BC-%EC%9C%A0%EC%A7%80%ED%95%98%EB%A9%B0-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%84-%EB%8F%99%EC%9E%91%EC%8B%9C%ED%82%A4%EB%8A%94-%EA%B2%83%EC%9D%B4%EC%A7%80\" aria-label=\"ì–´ë–»ê²Œ unmount ëœ componentë¥¼ ìœ ì§€í•˜ë©° ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ì§€ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–»ê²Œ UnMount ëœ Componentë¥¼ ìœ ì§€í•˜ë©° ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ì§€?</h4>\n</blockquote>\n<p>ì´ ê¶ê¸ˆì¦ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í•œë²ˆ Framer Motionì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ëœ¯ì–´ë³´ë©° ê³µë¶€í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<h4 id=\"ë¶„ì„í•œ-ì‹œì ì˜-ê¹ƒí—ˆë¸Œ-ì½”ë“œ-ë§í¬\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%84%9D%ED%95%9C-%EC%8B%9C%EC%A0%90%EC%9D%98-%EA%B9%83%ED%97%88%EB%B8%8C-%EC%BD%94%EB%93%9C-%EB%A7%81%ED%81%AC\" aria-label=\"ë¶„ì„í•œ ì‹œì ì˜ ê¹ƒí—ˆë¸Œ ì½”ë“œ ë§í¬ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¶„ì„í•œ ì‹œì ì˜ ê¹ƒí—ˆë¸Œ ì½”ë“œ ë§í¬</h4>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx\">https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx</a></p>\n</blockquote>\n<p>ê·¸ëŸ¬ë©´ì„œ ì•½ 2ë…„ë™ì•ˆ í•´ê²°ë˜ì§€ ì•Šì€ ì• ë‹ˆë©”ì´ì…˜ ê´€ë ¨ ë²„ê·¸ì™€ ì¼ë¶€ ì˜ëª»ëœ ì½”ë“œì— ëŒ€í•´ì„œ ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.! ğŸ¤“ ğŸ¥³</p>\n<details>\n<summary>ì½”ë“œê¸°ì—¬ ë‚´ìš©</summary>\n<p><a href=\"https://github.com/framer/motion/pull/1569\">Fix AnimatePresence won't unmount fastly changing content by JaeSeoKim Â· Pull Request #1569 Â· framer/motion</a></p>\n<p><img src=\"https://res.craft.do/user/full/9b73b1e8-42ea-cb9a-4429-738126302e2a/doc/F15132A1-9A4D-4DE6-B39E-314A720C2D54/828B5C8E-51BF-4D37-AB02-AB0BB6A8CCCF_2/HCisdd25EULCQmVgvAPjK9MSbLAIM4x73W8fpMEYqAsz/Image.png\" alt=\"Image.png\"></p>\n<p><a href=\"https://github.com/framer/motion/pull/1531\">Remove unnecessary log codes by JaeSeoKim Â· Pull Request #1531 Â· framer/motion</a></p>\n<p><img src=\"https://res.craft.do/user/full/9b73b1e8-42ea-cb9a-4429-738126302e2a/doc/F15132A1-9A4D-4DE6-B39E-314A720C2D54/BCB95CAA-8799-478F-B72C-6C89BD58E6F2_2/Q87qCQvU84Fto6diHGiiHCydylsPA9jUA6CFYVcxt4Mz/%202022-06-02%20%208.08.32.png\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-02 á„‹á…©á„’á…® 8.08.32.png\"></p>\n</details>\n<h1 id=\"ì‚¬ì „-ì§€ì‹-í•™ìŠµí•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A0%84-%EC%A7%80%EC%8B%9D-%ED%95%99%EC%8A%B5%ED%95%98%EA%B8%B0\" aria-label=\"ì‚¬ì „ ì§€ì‹ í•™ìŠµí•˜ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì‚¬ì „ ì§€ì‹ í•™ìŠµí•˜ê¸°</h1>\n<p><code>AnimatePresence</code> ë¥¼ ë¶„ì„í•˜ê¸° ì´ì „ì— ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” custom hookê³¼ ì¼ë¶€ React APIì— ëŒ€í•´ ë¨¼ì € ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê³  ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<h1 id=\"react-ê³µì‹-api-hook\" style=\"position:relative;\"><a href=\"#react-%EA%B3%B5%EC%8B%9D-api-hook\" aria-label=\"react ê³µì‹ api hook permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React ê³µì‹ API, Hook</h1>\n<h2 id=\"reactnode\" style=\"position:relative;\"><a href=\"#reactnode\" aria-label=\"reactnode permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReactNode</h2>\n<p>Reactì—ì„œ ë Œë”ë§ í•  ìˆ˜ ìˆëŠ” typeì— ëŒ€í•œ ì§‘í•©ì´ë©°, ì´ ë•Œ <code>boolean</code> , <code>null</code>, <code>undefined</code> ì™€ ê°™ì€ ê°’ë„ í¬í•¨ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReactFragment</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Iterable</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">ReactNode</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReactNode</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">ReactElement</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">number</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">ReactFragment</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">ReactPortal</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">boolean</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  | </span><span class=\"mtk11\">undefined</span></span></span></code></pre>\n<h3 id=\"reactelement\" style=\"position:relative;\"><a href=\"#reactelement\" aria-label=\"reactelement permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReactElement</h3>\n<p><code>React.createElement</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©ì‹œ ë°˜í™˜í•˜ëŠ” typeìœ¼ë¡œ ì¼ë°˜ì ìœ¼ë¡œëŠ” JSX ë¬¸ë²•ì„ ì‚¬ìš©ì‹œ ì–»ê²Œ ë˜ëŠ” ê°ì²´ ì…ë‹ˆë‹¤.</p>\n<p>í•´ë‹¹ ê°ì²´ ë‚´ë¶€ì—ëŠ” <code>props</code>ì™€ ê°™ì€ ì •ë³´ì™€ í•¨ê»˜ <code>key</code> ì— ëŒ€í•´ì„œ ì ‘ê·¼í•˜ì—¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReactElement</span><span class=\"mtk1\">&lt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">P</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">any</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">T</span><span class=\"mtk1\"> </span><span class=\"mtk9\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk11\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">JSXElementConstructor</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt; </span><span class=\"mtk8\">=</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    | </span><span class=\"mtk11\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    | </span><span class=\"mtk11\">JSXElementConstructor</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">type</span><span class=\"mtk1\">: </span><span class=\"mtk11\">T</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">props</span><span class=\"mtk1\">: </span><span class=\"mtk11\">P</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">key</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Key</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"cloneelement\" style=\"position:relative;\"><a href=\"#cloneelement\" aria-label=\"cloneelement permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>cloneElement()</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk3\">cloneElement</span><span class=\"mtk1\">(</span><span class=\"mtk4\">element</span><span class=\"mtk1\">, [</span><span class=\"mtk4\">config</span><span class=\"mtk1\">], [...</span><span class=\"mtk4\">children</span><span class=\"mtk1\">])</span></span></span></code></pre>\n<p>element ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ ìƒˆë¡œìš´ ReactElementë¥¼ ë³µì‚¬í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ</p>\n<h2 id=\"isvalidelement\" style=\"position:relative;\"><a href=\"#isvalidelement\" aria-label=\"isvalidelement permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>isValidElement()</h2>\n<p>ì•„ë˜ì™€ ê°™ì´ <code>object</code> ë¥¼ ë„˜ê¸°ë©´ í•´ë‹¹ ê°ì²´ê°€ <code>ReactElement</code> ì¸ì§€ ê²€ì¦í•˜ëŠ”í•¨ìˆ˜ ì…ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk3\">isValidElement</span><span class=\"mtk1\">(</span><span class=\"mtk4\">object</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><a href=\"https://reactjs.org/docs/react-api.html#isvalidelement\">React Top-Level API â€“ React</a></p>\n<h2 id=\"reactchildren\" style=\"position:relative;\"><a href=\"#reactchildren\" aria-label=\"reactchildren permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React.Children</h2>\n<p><code>this.props.children</code> ìœ¼ë¡œ ë„˜ì–´ì˜¨ ë¶ˆëª…í™•í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì•„ë˜ì™€ ê°™ì€ ìœ í‹¸ë¦¬í‹°ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"reactchildrenonly\" style=\"position:relative;\"><a href=\"#reactchildrenonly\" aria-label=\"reactchildrenonly permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React.Children.only</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk11\">Children</span><span class=\"mtk1\">.</span><span class=\"mtk3\">only</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><code>this.props.children</code> ìœ¼ë¡œ ë„˜ì–´ì˜¨ ê°ì²´ê°€ ë‹¨ì¼ ê°ì²´ì¸ì§€ì— ëŒ€í•´ì„œ íŒë³„í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>\n<p>ë§Œì•½ <code>children</code> ì´ <code>Fragment</code> ë¡œ ê°ì‹¸ì ¸ ìˆë‹¤ë©´, ë‹¨ì¼ ê°ì²´ë¡œ ì·¨ê¸‰í•©ë‹ˆë‹¤.</p>\n<h3 id=\"reactchildrenforeach\" style=\"position:relative;\"><a href=\"#reactchildrenforeach\" aria-label=\"reactchildrenforeach permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React.Children.forEach</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">React</span><span class=\"mtk1\">.</span><span class=\"mtk11\">Children</span><span class=\"mtk1\">.</span><span class=\"mtk3\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">, </span><span class=\"mtk9\">function</span><span class=\"mtk1\">[(</span><span class=\"mtk4 mtki\">thisArg</span><span class=\"mtk1\">)])</span></span></span></code></pre>\n<p>ìœ„ì™€ ê°™ì´ <code>children</code> ë‚´ë¶€ì˜ ê°ì²´ë¥¼ ìˆœí™˜í•˜ì—¬ <code>forEach</code> í•¨ìˆ˜ì™€ ë™ì¼í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ <code>children</code> ì´ ë‹¨ì¼ ê°ì²´ë¼ë©´ ìˆœí™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>\n<h2 id=\"useref\" style=\"position:relative;\"><a href=\"#useref\" aria-label=\"useref permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useRef</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">refContainer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk4\">initialValue</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>ìˆ˜ì •ì´ ê°€ëŠ¥í•œ <code>ref</code> ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©°, <code>.current</code> ê°ì²´ë¡œ ì´ˆê¸°ê°’ì´ ì „ë‹¬ë©ë‹ˆë‹¤.</p>\n<p>í•´ë‹¹ ê°ì²´ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì „ ìƒëª…ì£¼ê¸° ë™ì•ˆ ìœ ì§€ë©ë‹ˆë‹¤.</p>\n<h2 id=\"uselayouteffect\" style=\"position:relative;\"><a href=\"#uselayouteffect\" aria-label=\"uselayouteffect permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useLayoutEffect</h2>\n<p><code>useEffect</code> ì™€ ì‚¬ìš©ë²•ì´ ë™ì¼í•˜ë©° íš¨ê³¼ë„ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, <code>useEffect</code> ì˜ ê²½ìš° í™”ë©´ì˜ paintê°€ ëë‚œ ì´í›„ ì‹¤í–‰ì´ ë˜ì§€ë§Œ, Reactì—ì„œ domë¥¼ ì—…ë°ì´íŠ¸ í›„ ë¸Œë¼ìš°ì €ì—ì„œ paint í•˜ê¸° ì´ì „ì— <code>useLayoutEffect</code> ê°€ ë™ì‘í•©ë‹ˆë‹¤.</p>\n<h1 id=\"custom-react-hook\" style=\"position:relative;\"><a href=\"#custom-react-hook\" aria-label=\"custom react hook permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom React Hook</h1>\n<h2 id=\"useisomorphiclayouteffect\" style=\"position:relative;\"><a href=\"#useisomorphiclayouteffect\" aria-label=\"useisomorphiclayouteffect permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useIsomorphicLayoutEffect</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useEffect</span><span class=\"mtk1\">, </span><span class=\"mtk4\">useLayoutEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">isBrowser</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;./is-browser&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">export</span><span class=\"mtk1\"> </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useIsomorphicLayoutEffect</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">isBrowser</span><span class=\"mtk1\"> </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">useLayoutEffect</span><span class=\"mtk1\"> </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">useEffect</span></span></span></code></pre>\n<p>SSR ì‹œì ì—ëŠ” <code>useLayoutEffect</code> ì— ëŒ€í•´ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì´ ì—†ê¸° ë•Œë¬¸ì— SSR ì´í›„ <code>hydrate</code> ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí•˜ë¯€ë¡œ, í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <code>isBrowser</code> ì¦‰ <code>typeof document !== \"undefined\"</code> ì¸ì§€ ì²´í¬ í•˜ëŠ” ê²ƒìœ¼ë¡œ ë¸Œë¼ìš°ì € ì¸ ê²½ìš° <code>useLayoutEffect</code> ë¥¼ SSR ì‹œì ì—ëŠ” <code>useEffect</code> ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´ ë¬¸ì œì ì„ í•´ê²° í•˜ëŠ” Hook ì…ë‹ˆë‹¤.</p>\n<h2 id=\"useismounted\" style=\"position:relative;\"><a href=\"#useismounted\" aria-label=\"useismounted permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useIsMounted</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useRef</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useIsomorphicLayoutEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;./use-isomorphic-effect&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">export</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useIsMounted</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk7\">false</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">useIsomorphicLayoutEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">isMounted</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>useRef ê°ì²´ì— ë§ˆìš´íŠ¸ ì‹œì ê³¼ ì–¸ë§ˆìš´íŠ¸ ì‹œì ì— í•´ë‹¹ ìƒíƒœë¥¼ ê¸°ë¡ í•˜ë©°, í•´ë‹¹ ë§ˆìš´íŠ¸ ref ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” hook ì…ë‹ˆë‹¤.</p>\n<p>ì´ë¥¼ í†µí•´ ë¦¬ë Œë”ë§ì€ ì¼ì–´ë‚˜ì§€ ì•Šì§€ë§Œ <code>isMounted.current</code> ì— ì ‘ê·¼í•˜ëŠ” ê²ƒìœ¼ë¡œ ë§ˆìš´íŠ¸ ë˜ì—ˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"useforceupdate\" style=\"position:relative;\"><a href=\"#useforceupdate\" aria-label=\"useforceupdate permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useForceUpdate</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">sync</span><span class=\"mtk1\"> </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;framesync&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useState</span><span class=\"mtk1\">, </span><span class=\"mtk4\">useCallback</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useIsMounted</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;./use-is-mounted&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">export</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useForceUpdate</span><span class=\"mtk1\">(): [</span><span class=\"mtk11\">VoidFunction</span><span class=\"mtk1\">, </span><span class=\"mtk11\">number</span><span class=\"mtk1\">] {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useIsMounted</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk11\">forcedRenderCount</span><span class=\"mtk1\">, </span><span class=\"mtk11\">setForcedRenderCount</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useState</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">forceRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useCallback</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">setForcedRenderCount</span><span class=\"mtk1\">(</span><span class=\"mtk4\">forcedRenderCount</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk4\">forcedRenderCount</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">   * Defer this to the end of the next animation frame in case there are multiple</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">   * synchronous calls.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">   */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">deferredForceRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useCallback</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">sync</span><span class=\"mtk1\">.</span><span class=\"mtk3\">postRender</span><span class=\"mtk1\">(</span><span class=\"mtk4\">forceRender</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    [</span><span class=\"mtk4\">forceRender</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> [</span><span class=\"mtk4\">deferredForceRender</span><span class=\"mtk1\">, </span><span class=\"mtk4\">forcedRenderCount</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><code>framer motion</code> ë‚´ë¶€ì—ì„œ ì •ì˜ëœ custom hookìœ¼ë¡œ <code>state</code> ë¥¼ ì¦ê°€ì‹œí‚´ìœ¼ë¡œì¨ í•´ë‹¹ hookë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ì„ ì‹œí‚µë‹ˆë‹¤.</p>\n<p>ë˜í•œ <code>hook</code> ì˜ ê²½ìš° ì •ì˜ ìˆœì„œì— ë”°ë¥¸ sideEffectê°€ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ì •í™•í•˜ê²Œ forceUpdate í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœìƒë‹¨ì˜ ì²«ë²ˆì§¸ hookìœ¼ë¡œì¨ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ <code>framer motion</code> ì€ <code>popmotion</code> ì´ë¼ëŠ” javascript animation ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, <code>framesync</code> ë¥¼ í†µí•´ ë‹¤ìŒ ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ì— ê°•ì œ ë Œë”ë§ ì‹œí–‰ ì‹œí‚¤ë„ë¡ êµ¬í˜„ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"useunmounteffect\" style=\"position:relative;\"><a href=\"#useunmounteffect\" aria-label=\"useunmounteffect permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useUnmountEffect</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">useEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk9\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">export</span><span class=\"mtk1\"> </span><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useUnmountEffect</span><span class=\"mtk1\">(</span><span class=\"mtk3\">callback</span><span class=\"mtk1\">: () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">void</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">callback</span><span class=\"mtk1\">(), [])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ì˜ì¡´ì„± ë°°ì—´ì´ ë¹„ì–´ìˆëŠ” <code>useEffect</code> cleanUp ë™ì‘ì— ì •ì˜ í•˜ëŠ” ê²ƒìœ¼ë¡œ ì–¸ë§ˆìš´íŠ¸ ì‹œì ì— ë™ì‘í•  í•¨ìˆ˜ë¥¼ ì •ì˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ unmount ë˜ëŠ” ì‹œì ì— ì •í™•í•˜ê²Œ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” hook ì •ì˜ ìˆœì„œëŒ€ë¡œ ë™ì‘í•œë‹¤ëŠ” íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬ ë§¨ë§ˆì§€ë§‰ì˜ hookìœ¼ë¡œì¨ ì •ì˜ í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<h1 id=\"animatepresence-ì½”ë“œ-ë¶„ì„í•˜ê¸°\" style=\"position:relative;\"><a href=\"#animatepresence-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0\" aria-label=\"animatepresence ì½”ë“œ ë¶„ì„í•˜ê¸° permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AnimatePresence ì½”ë“œ ë¶„ì„í•˜ê¸°!</h1>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// We want to force a re-render once all exiting animations have finished. We</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// either use a local forceRender function, or one from a parent context if it exists.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">let</span><span class=\"mtk1\"> [</span><span class=\"mtk4\">forceRender</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useForceUpdate</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">forceRenderLayoutGroup</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useContext</span><span class=\"mtk1\">(</span><span class=\"mtk4\">LayoutGroupContext</span><span class=\"mtk1\">).</span><span class=\"mtk4\">forceRender</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">forceRenderLayoutGroup</span><span class=\"mtk1\">) </span><span class=\"mtk4\">forceRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">forceRenderLayoutGroup</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L86-L90\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L86-L90</a></p>\n<p>ì½”ë“œë¥¼ ë³´ê²Œ ë˜ë©´ ì²« hookìœ¼ë¡œ <code>useForceUpdate()</code> ì‚¬ìš©í•˜ì§€ë§Œ ì£¼ì„ê³¼ í•¨ê»˜ ì´í›„ì˜ ì½”ë“œë¥¼ í™•ì¸í•˜ë©´, ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ ì´í›„ì— ë¦¬ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì•¼ í•˜ë¯€ë¡œ, <code>context</code> ë¥¼ í†µí•´ ì´ì „ì— ì •ì˜ëœ forceRenderê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì—¬ ìˆë‹¤ë©´ ë¶€ëª¨ì˜ forceRenderë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useIsMounted</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Filter out any children that aren&#39;t ReactElements. We can only track ReactElements with a props.key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">filteredChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">onlyElements</span><span class=\"mtk1\">(</span><span class=\"mtk4\">children</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">let</span><span class=\"mtk1\"> </span><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">filteredChildren</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L92-L96\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L92-L96</a></p>\n<p>ê·¸ ë‹¤ìŒì—ëŠ” childrenì—ì„œ <code>React.Children</code> ì™€ <code>isValidElement</code> í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ Elementë§Œ ì¶”ì¶œ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´í›„ ë Œë”ë§ í•´ì•¼ í•˜ëŠ” ëŒ€ìƒì„ ì €ì¥í•˜ëŠ” ë³€ìˆ˜ëŠ” <code>childrenToRender</code> ì— ì €ì¥í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">ComponentKey</span><span class=\"mtk1\">&gt;()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Keep a living record of the children we&#39;re actually rendering so we</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// can diff to figure out which are entering and exiting</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// A lookup table to quickly reference components by key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">allChildren</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Map</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">ComponentKey</span><span class=\"mtk1\">, </span><span class=\"mtk11\">ReactElement</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt;&gt;()).</span><span class=\"mtk4\">current</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// If this is the initial component render, just deal with logic surrounding whether</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// we play onMount animations or not.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isInitialRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk7\">true</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L98-L111\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L98-L111</a></p>\n<p>ì¡´ì¬ ì—¬ë¶€ì— ëŒ€í•´ì„œ ì‚¬ìš©í•˜ëŠ” <code>exiting</code> ì´ˆê¸°í™” í•˜ê³  <code>useRef</code> ë¥¼ ì´ìš©í•˜ì—¬ ë¼ì´í”„ ì‚¬ì´í´ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€ë  ì´ì „ì— ë„˜ì–´ì˜¨ Childrenë¥¼ ì €ì¥í•˜ëŠ” <code>presentChildren</code> ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì´ ë•Œ í•œê°€ì§€ì˜ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆëŠ”ë° ë°”ë¡œ <code>exiting</code> ê°ì²´ëŠ” <code>useRef</code> ë¡œ ê°ì‹¸ì ¸ ìˆì§€ ì•Šë‹¤ëŠ” ë¬¸ì œì  ì…ë‹ˆë‹¤.\nì´ ë•Œ ë¬¸ì— ë¼ì´í”„ì‚¬ì´í´ ì „ë°˜ì— ì´ë£¨ì–´ ë§¤ë²ˆ ì´ˆê¸°í™” ì‘ì—…ì´ ì´ë£¨ì–´ ì§€ê¸° ë•Œë¬¸ì— ì´í›„ì— ì´ì•¼ê¸° í•˜ëŠ” íŠ¹ì • ì‘ì—…ì—ì„œ ë²„ê·¸ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n</blockquote>\n<p><a href=\"https://github.com/framer/motion/pull/1569\">Fix AnimatePresence won't unmount fastly changing content by JaeSeoKim Â· Pull Request #1569 Â· framer/motion</a></p>\n<p>ë˜í•œ ComponentKey ì™€ ReactElementë¥¼ key value ìŒìœ¼ë¡œ ë¬¶ì–´ ì „ ë¼ì´í”„ ì‚¬ì´í´ì—ì„œ ê±¸ì³ ê¸°ë¡ í•  ìˆ˜ ìˆëŠ” refë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">useIsomorphicLayoutEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">isInitialRender</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">updateChildLookup</span><span class=\"mtk1\">(</span><span class=\"mtk4\">filteredChildren</span><span class=\"mtk1\">, </span><span class=\"mtk4\">allChildren</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">childrenToRender</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L113-L118\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L113-L118</a></p>\n<p>ì˜ì¡´ì„±ì— ëŒ€í•´ì„œ ì •ì˜ í•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ë¦¬ë Œë”ë§ ë  ë•Œ ë§ˆë‹¤ ë™ì‘í•˜ê²Œ ë˜ëŠ” <code>effect</code> ë¥¼ ì •ì˜ í•©ë‹ˆë‹¤.</p>\n<p>ì´ ë•Œ <code>presentChildren</code> ì— í˜„ì¬ propsë¡œ ë„˜ì–´ì˜¨ childrenì—ì„œ ì¶”ì¶œí•œ ReactElementë¥¼ ë„£ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">type</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ComponentKey</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">number</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getChildKey</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk4 mtki\">child</span><span class=\"mtk1\">: </span><span class=\"mtk11\">ReactElement</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt;): </span><span class=\"mtk11\">ComponentKey</span><span class=\"mtk1\"> </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">child</span><span class=\"mtk1\">.</span><span class=\"mtk4\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">updateChildLookup</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">children</span><span class=\"mtk1\">: </span><span class=\"mtk11\">ReactElement</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt;[],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4 mtki\">allChildren</span><span class=\"mtk1\">: </span><span class=\"mtk11\">Map</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">ComponentKey</span><span class=\"mtk1\">, </span><span class=\"mtk11\">ReactElement</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">any</span><span class=\"mtk1\">&gt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">children</span><span class=\"mtk1\">.</span><span class=\"mtk3\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">child</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">getChildKey</span><span class=\"mtk1\">(</span><span class=\"mtk4\">child</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">allChildren</span><span class=\"mtk1\">.</span><span class=\"mtk3\">set</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">, </span><span class=\"mtk4\">child</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L20-L32\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L20-L32</a></p>\n<p>ìœ„ì™€ ê°™ì´ <code>updateChildLookup</code> í•¨ìˆ˜ë¥¼ í†µí•´ <code>allChildren</code> ì´ë¼ëŠ” <code>Map</code> ìë£Œí˜•ì— <code>Componentkey</code> ë¥¼ ì´ìš©í•˜ì—¬ <code>child</code> ë¥¼ ì €ì¥ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://res.craft.do/user/full/9b73b1e8-42ea-cb9a-4429-738126302e2a/doc/F15132A1-9A4D-4DE6-B39E-314A720C2D54/C89AD05F-B18A-4DF4-BA33-A4E7695674B9_2/Ng7Fizy1TfJlCyopirWE2cfmL2qHNSqk2RjBl4mjX7Qz/Image.png\" alt=\"Image.png\"></p>\n<p>ì´ì™€ ê°™ì´ <code>Component</code> ì˜ <code>key</code> ë¥¼ ì´ìš©í•˜ì—¬ ì´ì „ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ì–µí•˜ê³  ì´ë¥¼ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•œ ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">useUnmountEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">isInitialRender</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">allChildren</span><span class=\"mtk1\">.</span><span class=\"mtk3\">clear</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk3\">clear</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L120-L124\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L120-L124</a></p>\n<p>ìµœì¢…ì ìœ¼ë¡œ <code>unmount</code> ë  ë•Œì— <code>useRef</code> ë¥¼ í†µí•´ ì €ì¥í•œ ê°’ì„ ëª¨ë‘ ì´ˆê¸° ìƒíƒœë¡œ ëŒë¦¬ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">isInitialRender</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk11\">childrenToRender</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">child</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk11\">PresenceChild</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7 mtki\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk3\">getChildKey</span><span class=\"mtk1\">(</span><span class=\"mtk4\">child</span><span class=\"mtk1\">)</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7 mtki\">isPresent</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7 mtki\">initial</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">initial</span><span class=\"mtk1\"> </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> </span><span class=\"mtk7\">undefined</span><span class=\"mtk1\"> </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">false</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7 mtki\">presenceAffectsLayout</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">presenceAffectsLayout</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">{</span><span class=\"mtk4\">child</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk11\">PresenceChild</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ))</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L126-L141\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L126-L141</a></p>\n<p>ì´ì œ ì‹¤ì œ ë Œë”ë§ í•˜ëŠ” ë¶€ë¶„ ì…ë‹ˆë‹¤. ë§Œì•½ ìµœì´ˆ ë Œë”ë§ ì´ë¼ë©´, ë§Œë“¤ì–´ë‘” <code>childrenToRender</code> ì— ìˆëŠ” <code>ReactElement</code> ë¥¼ êº¼ë‚´ í•˜ë‚˜ì”© ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„ì„ ìœ„í•œ <code>PresenceChild</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ì„œ ë Œë”ë§ì„ í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// If this is a subsequent render, deal with entering and exiting children</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> [...</span><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Diff the keys of the currently-present and target children to update our</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// exiting list.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentKeys</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\">.</span><span class=\"mtk11\">current</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">(</span><span class=\"mtk4\">getChildKey</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">targetKeys</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">filteredChildren</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">(</span><span class=\"mtk4\">getChildKey</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Diff the present children with our target children and mark those that are exiting</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">numPresent</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentKeys</span><span class=\"mtk1\">.</span><span class=\"mtk4\">length</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">let</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">numPresent</span><span class=\"mtk1\">; </span><span class=\"mtk4\">i</span><span class=\"mtk8\">++</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">presentKeys</span><span class=\"mtk1\">[</span><span class=\"mtk4\">i</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">targetKeys</span><span class=\"mtk1\">.</span><span class=\"mtk3\">indexOf</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">) </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk8\">-</span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk3\">add</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// If we currently have exiting children, and we&#39;re deferring rendering incoming children</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// until after all current children have exiting, empty the childrenToRender array</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">exitBeforeEnter</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk4\">size</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L143-L165\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L143-L165</a></p>\n<p>ì´í›„ ìµœì´ˆ ë Œë”ë§ì´ ì•„ë‹ˆë¼ë©´ ì´ì œ í•´ë‹¹ ë¡œì§ë“¤ì´ ì‹¤í–‰ ë©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì²«ë²ˆ ì§¸ ì¤„ì¸ <code>childrenToRender</code> ì— ë‹¤ì‹œ spread ë¬¸ë²•ì„ í†µí•´ì„œ ì¬í• ë‹¹ í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ ì½”ë“œì— ëŒ€í•œ íˆìŠ¤í† ë¦¬ë¥¼ ì‚´í´ë³¸ ê²°ê³¼ ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œ ì‹¤ìˆ˜ í•œ ê²ƒì„ ë³´ì—¬ í•´ë‹¹ ë¼ì¸ì— ëŒ€í•´ì„œ ì œê±°í•˜ëŠ” PRë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p><code>presentChildren</code> ê³¼ propsë¡œ ë„˜ì–´ì˜¨ <code>children</code> ì˜ keyë¥¼ ì¶”ì¶œí•˜ì—¬ <code>presentChildren</code> ì— ì¡´ì¬í•˜ì˜€ë˜ <code>key</code> ê°€ í˜„ì¬ <code>Children</code> ì— ì—†ë‹¤ë©´ <code>exiting</code> ì¤‘ì¸ ìƒíƒœë¡œ ì •ì˜ í•©ë‹ˆë‹¤.</p>\n<p><code>exitBeforeEnter</code> ì˜µì…˜ì´ ì¼œì ¸ìˆë‹¤ë©´, <code>exiting</code> ì´ ì „ë¶€ ëë‚œ ì´í›„ ë Œë”ë§ì„ í•  ìˆ˜ ìˆëŒê³  <code>childrenToRender</code> ë¥¼ ë¹„ì›Œì¤ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Loop through all currently exiting components and clone them to overwrite `animate`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// with any `exit` prop they might have defined.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk3\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">key</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5 mtki\">// If this component is actually entering again, early return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">targetKeys</span><span class=\"mtk1\">.</span><span class=\"mtk3\">indexOf</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">) </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk8\">-</span><span class=\"mtk7\">1</span><span class=\"mtk1\">) </span><span class=\"mtk9\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">child</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">allChildren</span><span class=\"mtk1\">.</span><span class=\"mtk3\">get</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk4\">child</span><span class=\"mtk1\">) </span><span class=\"mtk9\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">insertionIndex</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentKeys</span><span class=\"mtk1\">.</span><span class=\"mtk3\">indexOf</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">onExit</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">allChildren</span><span class=\"mtk1\">.</span><span class=\"mtk3\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk3\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// Remove this child from the present children</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">removeIndex</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\">.</span><span class=\"mtk11\">current</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findIndex</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk4 mtki\">presentChild</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">presentChild</span><span class=\"mtk1\">.</span><span class=\"mtk4\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\">.</span><span class=\"mtk11\">current</span><span class=\"mtk1\">.</span><span class=\"mtk3\">splice</span><span class=\"mtk1\">(</span><span class=\"mtk4\">removeIndex</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// Defer re-rendering until all exiting children have indeed left</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk4\">size</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">presentChildren</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">filteredChildren</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">isMounted</span><span class=\"mtk1\">.</span><span class=\"mtk4\">current</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">false</span><span class=\"mtk1\">) </span><span class=\"mtk9\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">forceRender</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">onExitComplete</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">onExitComplete</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">childrenToRender</span><span class=\"mtk1\">.</span><span class=\"mtk3\">splice</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">insertionIndex</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">0</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk11\">PresenceChild</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk3\">getChildKey</span><span class=\"mtk1\">(</span><span class=\"mtk4\">child</span><span class=\"mtk1\">)</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">isPresent</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">false</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">onExitComplete</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">onExit</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">custom</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">custom</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">presenceAffectsLayout</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">presenceAffectsLayout</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk4\">child</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk11\">PresenceChild</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L167-L212\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L167-L212</a></p>\n<p><code>exiting</code> ì— ì •ì˜ëœ <code>key</code> ë¥¼ ìˆœí™˜í•˜ë©´ì„œ <code>childrenToRender</code> ì— ì´ì „ì— ìœ„ì¹˜í•˜ë˜ ê³³ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ <code>onExit</code> ì— í•´ë‹¹í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ”ë°, exit ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œì´í›„ <code>exiting</code>, <code>allChildren</code> <code>presentChildren</code> ì—ì„œ ëª¨ë‘ ì œê±° í•˜ì—¬ ì¶”í›„ ë‹¤ì‹œ ë§ˆìš´íŠ¸í›„ ì œê±°ì‹œ ì• ë‹ˆë©”ì´ì…˜ì´ ë™ì‘ í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</p>\n<p>ë˜í•œ <code>exit</code> ì• ë‹ˆë©”ì´ì…˜ì´ ì¢…ë£Œí›„ ë°”ë¡œ ë Œë”ë§ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ëª¨ë“  <code>exiting</code> ê°ì²´ê°€ ì¢…ë£Œ ì´í›„ ë Œë”ë§ì„ ì—°ê¸°í•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ê¸°ì¡´ì½”ë“œëŠ” <code>const exiting = new Set&#x3C;ComponentKey>()</code> ìœ¼ë¡œ ë§¤ë²ˆ ì´ˆê¸°í™” ë˜ê¸° ë•Œë¬¸ì— ì—°ì†ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ exitingì´ ë°œìƒì‹œ ì„œë¡œ ë‹¤ë¥¸ exiting ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆì–´ì„œ <code>re-rendering</code> ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<p>í•´ë‹¹ ì´ìŠˆëŠ” <code>const exiting = useRef(new Set()).current</code> ë¡œ ê°ì‹¸ ëª¨ë‘ ë™ì¼í•œ ê°ì²´ë¥¼ ë°”ë¼ ë³¼ ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p><a href=\"https://github.com/framer/motion/pull/1569\">Fix AnimatePresence won't unmount fastly changing content by JaeSeoKim Â· Pull Request #1569 Â· framer/motion</a></p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// Add `MotionContext` even to children that don&#39;t need it to ensure we&#39;re rendering</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// the same tree between renders</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">childrenToRender</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">childrenToRender</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">child</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">child</span><span class=\"mtk1\">.</span><span class=\"mtk4\">key</span><span class=\"mtk1\"> </span><span class=\"mtk9\">as</span><span class=\"mtk1\"> </span><span class=\"mtk11\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk11\">number</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk3\">has</span><span class=\"mtk1\">(</span><span class=\"mtk4\">key</span><span class=\"mtk1\">) </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">child</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ) </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk11\">PresenceChild</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk3\">getChildKey</span><span class=\"mtk1\">(</span><span class=\"mtk4\">child</span><span class=\"mtk1\">)</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">isPresent</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7 mtki\">presenceAffectsLayout</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk4\">presenceAffectsLayout</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk4\">child</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk11\">PresenceChild</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L214-L229\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L214-L229</a></p>\n<p><code>childrenToRender</code> ë¥¼ ìˆœíšŒ í•˜ë©´ì„œ <code>exiting</code> ê°ì²´ì— ì†í•˜ì§€ ì•ŠëŠ” ìµœì´ˆ ë Œë”ë§ childì˜ ê²½ìš° <code>MotionContext</code> ë¥¼ í¬í•¨í•´ì•¼ í•˜ë¯€ë¡œ, í•´ë‹¹ ë‚´ìš©ì„ ì£¼ì…í•©ë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"tsx\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">env</span><span class=\"mtk1\"> </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;production&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">exitBeforeEnter</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">childrenToRender</span><span class=\"mtk1\">.</span><span class=\"mtk4\">length</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">console</span><span class=\"mtk1\">.</span><span class=\"mtk3\">warn</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">`You&#39;re attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9\">{</span><span class=\"mtk11\">exiting</span><span class=\"mtk1\">.</span><span class=\"mtk4\">size</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">childrenToRender</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> </span><span class=\"mtk11\">childrenToRender</span><span class=\"mtk1\">.</span><span class=\"mtk3\">map</span><span class=\"mtk1\">((</span><span class=\"mtk4 mtki\">child</span><span class=\"mtk1\">) </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">cloneElement</span><span class=\"mtk1\">(</span><span class=\"mtk4\">child</span><span class=\"mtk1\">))</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><a href=\"https://github.com/framer/motion/blob/85a60580d57650777871184561fc5e88508d7519/packages/framer-motion/src/components/AnimatePresence/index.tsx#L231-L247\">packages/framer-motion/src/components/AnimatePresence/index.tsx#L231-L247</a></p>\n<p><code>exitBeforeEnter</code> ì‚¬ìš©ì‹œì— ëŒ€í•œ ë¹„ì¥¬ì–¼ ê²½ê³  ì½”ë“œê°€ ìˆê³ , ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ <code>childrenToRender</code> ë¥¼ í™”ë©´ì— ë Œë”ë§ í•  ìˆ˜ ìˆë„ë¡ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<p>ì´ì œ <code>PresenceChild</code> ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘ì‹œí‚¨ ì´í›„, <code>exit</code> ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘í•´ì•¼ í•œë‹¤ë©´, í•´ë‹¹ ì• ë‹ˆë©”ì´ì…˜ì„ ë™ì‘í›„ propsë¡œ ë„˜ì–´ì˜¨ <code>onExitComplete</code> ë¥¼ í˜¸ì¶œ ì‹œì¼œ, <code>AnimatePresence</code> ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h1 id=\"ë¶„ì„í•˜ë©´ì„œ\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%84%9D%ED%95%98%EB%A9%B4%EC%84%9C\" aria-label=\"ë¶„ì„í•˜ë©´ì„œ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¶„ì„í•˜ë©´ì„œâ€¦</h1>\n<p><code>framer-motion</code> ë¥¼ ì‚¬ìš©í•´ë³´ê³  í¥ë¯¸ê°€ ìƒê²¨ì„œ ë¶„ì„ì„ í•´ë³´ê²Œ ë˜ì—ˆëŠ”ë°, ë‹¤ì–‘í•˜ê²Œ í™œìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê¹Šê²Œ ê³µë¶€ í•  ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ë˜ì—ˆê³ , ë˜ ì½”ë“œë¥¼ ì½ìœ¼ë©´ì„œ ì˜ë¬¸ì ì´ ìƒê¸´ ë¶€ë¶„ì„ í†µí•´ ì½”ë“œ ê¸°ì—¬ê¹Œì§€ ê°ˆ ìˆ˜ ìˆë‹¤ëŠ”ê²Œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.</p>\n<p>ì œê°€ ë¶„ì„í•œ ê¸€ì´ ë„ì›€ì´ ì•ˆë ìˆ˜ ìˆì§€ë§Œ, ë‹¤ë¥¸ ë¶„ë“¤ë„ ê¼­ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë¶„ì„í•˜ë©´ì„œ ê³µë¶€ì™€ í•¨ê»˜ ì½”ë“œê¸°ì—¬ë¥¼ í•´ë³¼ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#framer-motion%EC%9D%98-animatepresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0\">Framer Motionì˜ AnimatePresence ë™ì‘ ì›ë¦¬ ë¶„ì„í•˜ê¸°!</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#%EC%82%AC%EC%A0%84-%EC%A7%80%EC%8B%9D-%ED%95%99%EC%8A%B5%ED%95%98%EA%B8%B0\">ì‚¬ì „ ì§€ì‹ í•™ìŠµí•˜ê¸°</a></li>\n<li>\n<p><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#react-%EA%B3%B5%EC%8B%9D-api-hook\">React ê³µì‹ API, Hook</a></p>\n<ul>\n<li>\n<p><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#reactnode\">ReactNode</a></p>\n<ul>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#reactelement\">ReactElement</a></li>\n</ul>\n</li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#cloneelement\">cloneElement()</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#isvalidelement\">isValidElement()</a></li>\n<li>\n<p><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#reactchildren\">React.Children</a></p>\n<ul>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#reactchildrenonly\">React.Children.only</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#reactchildrenforeach\">React.Children.forEach</a></li>\n</ul>\n</li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#useref\">useRef</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#uselayouteffect\">useLayoutEffect</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#custom-react-hook\">Custom React Hook</a></p>\n<ul>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#useisomorphiclayouteffect\">useIsomorphicLayoutEffect</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#useismounted\">useIsMounted</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#useforceupdate\">useForceUpdate</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#useunmounteffect\">useUnmountEffect</a></li>\n</ul>\n</li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#animatepresence-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0\">AnimatePresence ì½”ë“œ ë¶„ì„í•˜ê¸°!</a></li>\n<li><a href=\"/React/Framer-Motion%EC%9D%98-AnimatePresence-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0/#%EB%B6%84%EC%84%9D%ED%95%98%EB%A9%B4%EC%84%9C\">ë¶„ì„í•˜ë©´ì„œâ€¦</a></li>\n</ul>","frontmatter":{"date":"2022ë…„ 06ì›” 06ì¼","title":"Framer Motionì˜ AnimatePresence ë™ì‘ ì›ë¦¬ ë¶„ì„í•˜ê¸°!","tags":["framer-motion","open source","react"]}}},"pageContext":{"slug":"/React/Framer-Motionì˜-AnimatePresence-ë™ì‘-ì›ë¦¬-ë¶„ì„í•˜ê¸°/","previous":{"fields":{"slug":"/Security/log4j-ì·¨ì•½ì -Log4Shell-CVE-2021-44228/"},"frontmatter":{"title":"log4j ì·¨ì•½ì (Log4Shell-CVE-2021-44228)ì´ ë¬´ì„œìš´ ì´ìœ "}},"next":null}},"staticQueryHashes":["1081905842","3911196313"]}