---
title: "[Typescript] badge42 ê°œë°œê¸°(4)"
date: 2020-11-22
tags: ["Badge42", "Readme Badge", "Javascript", "42Seoul"]
draft: false
---

**í† ì´ í”„ë¡œì íŠ¸(badge42) ê°œë°œê¸° 3í¸ ì…ë‹ˆë‹¤!**

**[ì´ì „ê¸€ 1í¸ ë³´ëŸ¬ ê°€ê¸°!](https://jaeseokim.github.io/Javascript/42-readme-stats-%EA%B0%9C%EB%B0%9C%EA%B8%B0_1/)**

**[ì´ì „ê¸€ 2í¸ ë³´ëŸ¬ ê°€ê¸°!](https://jaeseokim.github.io/Javascript/badge42-%EA%B0%9C%EB%B0%9C%EA%B8%B0_2_aka_42-readme-stats/)**

**[ì´ì „ê¸€ 3í¸ ë³´ëŸ¬ ê°€ê¸°!](https://jaeseokim.github.io/Javascript/badge42-%EA%B0%9C%EB%B0%9C%EA%B8%B0_3_aka_42-readme-stats/)**

# ğŸ“Œ badge42!

í•œë™ì•ˆ ê°œë°œì„ í•˜ë©´ì„œ ë§ì€ ë³€í™”ì™€ í•¨ê»˜ ì—¬ëŸ¬ê°€ì§€ ì´ìŠˆì— ëŒ€í•´ í•´ê²°í•œ ë°©ë²•ì— ëŒ€í•´ ê¸°ë¡ì„ í•˜ê³ ì ì‘ì„±ì„ í•´ë³´ì•˜ë‹¤!

## â™»ï¸ Typescriptë¡œ ì´ì „!

ì´ì „ ë¶€í„° ì‘ì—…ì„ í•˜ë©´ì„œ ë¶ˆë§Œ ì´ì˜€ë˜ ë¶€ë¶„ì¤‘ í•˜ë‚˜ì¸ API ì‘ë‹µê°’ì„ ê°€ì§€ê³  SVG renderë¥¼ í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì°¸ì¡°ë¥¼ í•˜ë‹¤ê°€ ì˜ëª»ëœ ë°ì´í„°ë¥¼ ì ‘ê·¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ëŠ”ë° ì´ë²ˆì— Typescriptë¡œ typeë¥¼ ì§€ì •í•˜ì—¬ ì´ë ‡í•œ ë¬¸ì œì ì´ ì—†ë„ë¡ í•˜ê³ ì ì´ì „ì„ í•˜ì˜€ë‹¤.

ì¼ë‹¨ ì´ì „ì„ í•˜ë©´ì„œ í¬ê²Œ ë³€ê²½ëœ ë¶€ë¶„ì€ ì¼ë‹¨ í˜„ì¬ëŠ” í•„ìš”ê°€ ì—†ëŠ” `next.js` ë¥¼ ì œê±° í•˜ì˜€ê³  velog.ioì˜ ë°±ì—”ë“œë¡œ ì‚¬ìš©ì´ ë˜ê³  ìˆë‹¤ê³  ì•Œë ¤ì§„ `Koa`ì— ê´€ì‹¬ì„ ê°€ì§€ê²Œ ë˜ì–´ì„œ Expressì—ì„œ Koaë¡œ ì´ì „ì„ í•˜ê²Œ ë˜ì—ˆë‹¤.

## ğŸ’„ add simple animation!

Typescriptë¡œ ì´ì „ì„ ì™„ë£Œí•œ ì´í›„ì—ëŠ” reactë¥¼ ì“°ê³  ìˆëŠ” ê°•ì ì„ ì‚´ë¦¬ê³ ì `emotion` ë¥¼ ì´ìš©í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì„ ì¶”ê°€í•˜ì˜€ë‹¤!

ì• ë‹ˆë©”ì´ì…˜ì€ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ fadein ì• ë‹ˆë©”ì´ì…˜ê³¼ progress bar ì• ë‹ˆë©”ì´ì…˜ì„ ì¶”ê°€í•˜ê³  durationë¥¼ ì£¼ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ ë³´ì´ë„ë¡ ì™„ì„±ì„ í•˜ì˜€ë‹¤!

![jaeskim](image/badge42-ê°œë°œê¸°_4/jaeskim.svg)

## ğŸ”’ [Email privacy issue #10](https://github.com/JaeSeoKim/badge42/issues/10)

í•œë™ì•ˆ 42seoulì—ì„œì˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì‹ ê²½ì„ ì œëŒ€ë¡œ ëª»ì“°ê³  ìˆë˜ ì°°ë‚˜ì— ìƒˆë¡œìš´ ì´ìŠˆê°€ ë“¤ì–´ì™€ì„œ í•´ê²°ì„ í•´ë³´ì•˜ë‹¤.

ì´ìŠˆì˜ ë‚´ìš©ì€ ë‹¤ë¦„ì´ ì•„ë‹Œ ê¸°ì¡´ì˜ badgeëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¬´ì¡°ê±´ì ìœ¼ë¡œ ì´ë©”ì¼ì„ ë³´ì´ê²Œ í‘œì‹œë¥¼ í•˜ëŠ”ë° ì´ë ‡ê²Œ ì´ë©”ì¼ì„ í‘œì‹œí•˜ê²Œ ëœë‹¤ë©´ ìŠ¤íŒ¸ë´‡ ê°™ì€ ê²ƒì— ì˜í•´ í¬ë¡¤ë§ì´ ë˜ê³  ìŠ¤íŒ¸ì´ ë‚ ë¼ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œì ì„ ì œì‹œ í•œ ê²ƒ ì´ì˜€ë‹¤.

> **[d-r-e](https://github.com/d-r-e)** commented [3 days ago](https://github.com/JaeSeoKim/badge42/issues/10#issue-743291583)
>
> The widget is great, but I would love to be able to hide the email so that spam bots can't find it. Also, as a suggestion, it would be really useful to show expertises as a list, or the number of achievements unlocked. Thanks for your work!

ì´ì œ ìœ„ì™€ ê°™ì€ ì´ìŠˆë¥¼ ë³´ê³  ì´ëŸ¬í•œ ë¬¸ì œì ì„ ìˆ˜ì •ì´ í•„ìš” í•˜ê² ë‹¤ê³  ìƒê°ì´ ë˜ì–´ì„œ í¬ê²Œ ì‘ì—…ì„ í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ë„ ì•„ë‹ˆì—¬ì„œ ë°”ë¡œ ìˆ˜ì •ì— ë‚˜ì„°ë‹¤.

ì¼ë‹¨ ì²« ë²ˆì§¸ë¡œ í•œ ì¼ì€ get ë©”ì†Œë“œë¡œ ê°’ì„ ë°›ëŠ” ë¡œì§ì„ ì¶”ê°€ í•˜ê³  Stats ì»´í¬ë„ŒíŠ¸ì— Propsë¡œ ì „ë‹¬ì„ í•˜ë„ë¡ ë§Œë“¤ì–´ ë‘ì—ˆë‹¤.

```tsx
const {
  params: { intraId },
  query: { privacyEmail },
  cacheStore,
} = ctx

ctx.body = ReactDomServer.renderToStaticMarkup(
  <Stats userData={user_data} logo={logo} privacyEmail={privacyEmail} />
)
```

ì´ì œ ì „ë‹¬ ë°›ì€ privacyEmailì´ trueë¼ë©´ ê¸°ì¡´ì— redering ë˜ëŠ” heightë¥¼ 25ì •ë„ë¥¼ ë¹¼ë„ë¡ ì„¤ì •ì„ í•˜ê³  emailì— ëŒ€í•œ ì •ë³´ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •ì„ í•˜ì˜€ë‹¤.

ì´ë ‡ê²Œ ë§Œë“¬ìœ¼ë¡œ ê¸°ì¡´ì˜ email ì •ë³´ë¥¼ ì œê±°í•˜ì˜€ì„ ë•Œì—ë„ ë¹ˆ ì—¬ë°±ì´ í¬ê²Œ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ë§Œë“¤ì—ˆë‹¤.

![jaeskim-noEmail](image/badge42-ê°œë°œê¸°_4/jaeskim-noEmail.svg)

ì´ì œ ì´ë ‡ê²Œ ìˆ˜ì •ì„ ì™„ë£Œ í•˜ì˜€ìœ¼ë‹ˆ readmeì— ì‚¬ìš© ë°©ë²•ì— ëŒ€í•œ ì˜ˆì œë¥¼ ì¶”ê°€ë¥¼ í•˜ê³  ì´ìŠˆ ë²ˆí˜¸ì™€ í•¨ê»˜ ì»¤ë°‹ í›„ pushë¥¼ í•˜ì˜€ë‹¤!

![image-20201122022332407](image/badge42-ê°œë°œê¸°_4/image-20201122022332407.png)

ê·¸ë¦¬ê³  ìœ„ì™€ ê°™ì€ ë‚´ìš©ì„ ë‹µë³€ì„ ë°›ê³  ì´ìŠˆëŠ” close ë˜ì—ˆë‹¤!

## ğŸ› [Error in Exp precision #9](https://github.com/JaeSeoKim/badge42/issues/9)

ì´ë²ˆ ì´ìŠˆëŠ” ë¶€ë™ ì†Œìˆ˜ì ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œ ë•Œë¬¸ì— ìƒê¸°ëŠ” ì˜¤ë¥˜ ì˜€ë‹¤.

ê¸°ì¡´ì˜ í¼ì„¼í‹°ì§€ì— ëŒ€í•´ êµ¬í•˜ëŠ” ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ì–´ ë‘ì—ˆëŠ”ë° 100ë¥¼ ê³±í•˜ì˜€ì„ ë•Œ ë¶€ë™ ì†Œìˆ˜ì ì˜ ë¬¸ì œë¡œ ì†Œìˆ˜ì  ì•„ë˜ì˜ ê°’ì´ ë³´ì´ê²Œ ë˜ëŠ” ë¬¸ì œì˜€ë‹¤.

```ts
const level_percentage = parseFloat((level % 1).toFixed(2)) * 100
```

ìœ„ ì½”ë“œë¥¼ ì•„ë˜ì˜ ì½”ë“œë¡œ ìˆ˜ì •ì„ í•˜ì—¬ì„œ ê°„ë‹¨í•˜ê²Œ í•´ê²°ì„ í•˜ì˜€ë‹¤!

```ts
const level_percentage = (parseFloat((level % 1).toFixed(2)) * 100).toFixed(0)
```

![image-20201122022443727](image/badge42-ê°œë°œê¸°_4/image-20201122022443727.png)

### âš“ï¸ choose **cursus**!

ê¸°ì¡´ì˜ ì½”ë“œì—ì„œëŠ” ë¬´ì¡°ê±´ cursusë°°ì—´ì—ì„œ ì²« ë²ˆì§¸ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë§Œ ì„ ê°€ì§€ê³  ì™€ì„œ redering í•˜ë„ë¡ ë§Œë“¤ì—ˆì—ˆëŠ”ë° ì´ë²ˆì— lodashë¥¼ ì´ìš©í•˜ì—¬ cursusì— ëŒ€í•´ì„œ ì„ íƒì´ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •ì„ í•˜ì˜€ë‹¤!

```ts
const index = _.findIndex<get42UserCrususData>(crusus, {
  cursus: { name: cursusName },
})
```

ì¼ë‹¨ ì²«ë²ˆì§¸ë¡œ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 42ì—ì„œ ë³¸ê³¼ì •ì„ ì§„í–‰í•˜ëŠ” í•™ìƒì€ 2ê°œì˜ cursusë¥¼ ì§„í–‰í•˜ì˜€ê³ , piscine ê³¼ì •ì—ì„œëŠ” coalitionì´ ì—†ê¸° ë•Œë¬¸ì— ê·¸ì ì— ëŒ€í•´ì„œ ì ì ˆí•œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ í•„ìš”í•˜ì˜€ë‹¤.

ê·¸ë˜ì„œ `cursusSlug.includes("piscine")` ë¥¼ ì´ìš©í•˜ì—¬ piscineì¸ ê²½ìš°ì—ëŠ” logoë¥¼ ì¶œë ¥ì„ í•˜ì§€ ì•Šë„ë¡ í•˜ê³  piscineê³¼ì • ë§Œì„ ì§„í–‰í•˜ì˜€ë˜ ì‚¬ëŒë“¤ë„ ì •ìƒì ìœ¼ë¡œ ë™ì‘ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì˜€ë‹¤!

![jaeskim-piscine](image/badge42-ê°œë°œê¸°_4/jaeskim-piscine.svg)

## ğŸš§ code coverage ì¶”ê°€í•˜ê¸°!

ìµœê·¼ì— [FEconf2020ì—ì„œ ë‚˜ì˜¨ ë°œí‘œ](https://www.youtube.com/watch?v=L1dtkLeIz-M&t=861s)ë¥¼ ë³´ë©´ì„œ í•œë²ˆ ì´ê±¸ badge42ì— ê°„ë‹¨í•˜ê²Œ ë¼ë„ ì ìš©ì„ í•˜ê³  ì‹¶ì–´ì„œ ì‹œë„í•˜ê²Œ ë˜ì—ˆë‹¤!

`@testing-library/react, jest` ë“±ì„ ì„¤ì¹˜í•˜ì—¬ testingì´ ê°€ëŠ¥í•˜ë„ë¡ í™˜ê²½ì„ ì„¤ì •ì„ í•˜ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì‘ì„±ì„ í•˜ì—¬ì„œ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ” ì§€ì— ëŒ€í•´ í™•ì¸ì„ í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

```tsx
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   Stats-42cursus.test.tsx                            :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: jaeskim <jaeskim@student.42seoul.kr>       +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2020/11/20 01:46:11 by jaeskim           #+#    #+#             */
/*   Updated: 2020/11/21 10:26:52 by jaeskim          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

import React from "react"
import { render } from "@testing-library/react"
import fs from "fs"
import Stats from "../src/components/Stats"
import getRemainDay from "../src/util/getRemainDay"
import { get42UserData } from "../src/api/api42"

describe("sample-jeaskim-2020-11-05 Stats", () => {
  /* SAMPLE DATA */
  const userData: get42UserData = JSON.parse(
    fs.readFileSync("test/sample-jeaskim-2020-11-05.json").toString()
  )
  const logo = ""

  const privacyEmail = false

  it("render Stats Container : ", () => {
    const { container } = render(
      <Stats
        logo={logo}
        privacyEmail={privacyEmail}
        userData={userData}
        cursusName={null}
      />
    )

    expect(container.querySelector("[data-testid='header']").textContent).toBe(
      "jaeskim's 42Seoul Stats"
    )

    expect(container.querySelector("[data-testid='cursus']").textContent).toBe(
      "42cursus!"
    )

    expect(
      container.querySelector("[data-testid='logo']").getAttribute("href")
    ).toBe(logo)

    expect(
      container.querySelector("[data-testid='information-grade']").textContent
    ).toBe("Grade- Learner")

    expect(
      container.querySelector("[data-testid='information-name']").textContent
    ).toBe("Name- Jaeseo Kim")

    if (privacyEmail) {
      expect(
        container.querySelector("[data-testid='information-email']")
      ).toBeNull()
    } else {
      expect(
        container.querySelector("[data-testid='information-email']").textContent
      ).toBe("Email- jaeskim@student.42seoul.kr")
    }

    expect(
      container.querySelector("[data-testid='blackhole']").textContent
    ).toBe(`${getRemainDay(userData.crusus[0].blackholed_at)} days left!`)

    expect(container.querySelector("[data-testid='level']").textContent).toBe(
      "level 1 - 66%"
    )

    expect(
      container
        .querySelector("[data-testid='svg-container']")
        .getAttribute("fill")
    ).toBe("#ffc221")
  })
})
```

ì´ë ‡ê²Œ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ `CI(github action)` ë¥¼ ì´ìš©í•˜ì—¬ `codecov.io` ì—ì„œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë° code coverageì— ëŒ€í•œ ë³´ê³ ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.

ì•„ë˜ì˜ ì½”ë“œëŠ” github actionë¥¼ ìœ„í•´ ì‘ì„±í•œ ì½”ë“œ ì´ë‹¤.

```yml
name: test

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Setup Node
        uses: actions/setup-node@v1
        with:
          node-version: "12.x"

      - name: Cache node modules
        uses: actions/cache@v2
        env:
          cache-name: cache-node-modules
        with:
          path: ~/.npm
          key: ${{ runner.os }}-npm-cache-${{ hashFiles('**/package-lock.json') }}
          restore-keys: |
            ${{ runner.os }}-npm-cache-
      - name: Install & Test
        run: |
          npm install
          npm run test
      - name: Code Coverage
        uses: codecov/codecov-action@v1
```

ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ `husky`ë¥¼ ì„¤ì¹˜í•˜ì—¬ precommit, prepushì— ëŒ€í•œ ì¡°ê±´ì„ test í†µê³¼ë¡œ ì„¤ì •ì„ í•˜ì—¬ì„œ ì‹¤ìˆ˜ë¡œ commitë˜ëŠ” pushê°€ ë˜ëŠ” ê²ƒì„ ë°©ì§€ í•˜ì˜€ë‹¤.

## ğŸ™ˆ ë§ˆë¬´ë¦¬ í•˜ë©´ì„œ...

ì´ë²ˆì— `ft_printf` í”„ë¡œì íŠ¸ë¥¼ ëë‚´ê³  ë‚˜ì„œ ì—¬ëŸ¬ê°€ì§€ ë°€ë ¤ ìˆë˜ ì´ìŠˆë¥¼ í•´ê²°í•˜ê³  testì½”ë“œë¥¼ ì‘ì„±í•´ì„œ code coverageë¥¼ í™•ì¸ ê°€ëŠ¥í•˜ê²Œ í•´ë³´ë‹ˆ ë­”ê°€ ëŠë‚Œì´ ì‹ ê¸°í•˜ê³  ì¬ë¯¸ìˆëŠ” ê¸°ë¶„ì´ë‹¤.
ì•„ì§ ë¨¸ë¦¬ì†ìœ¼ë¡œë§Œ êµ¬ìƒì„ í•˜ê³  ì œëŒ€ë¡œ ì‹¤í˜„ì„ ëª»í•œ ê¸°ëŠ¥ë“¤ì´ ë§ì€ë° ë¹¨ë¦¬ êµ¬í˜„ì„ í•´ë³´ê³  ì‹¶ë‹¤!
ê·¸ë¦¬ê³  ì–´ëŠì •ë„ ì™„ì„±ì„ í•˜ê³  42ì„œìš¸ì˜ 3ì¸µ ë³´ì»¬ë¶„ë“¤ê»˜ ê°€ì ¸ê°€ì„œ ì†Œê°œë¥¼ í•´ë“œë¦¬ê³  42 APIì— ëŒ€í•´ ì œí•œ í•´ì œë„ ë¬¼ì–´ë³´ê³  ì‹¶ë‹¤!
